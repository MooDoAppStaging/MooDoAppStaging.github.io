(window.webpackJsonp=window.webpackJsonp||[]).push([[2],{756:function(e,t,a){"use strict";var n=a(0),i=a(3),r=a(2),s=a.n(r),l=a(15),o=a(65);t.a=class extends l.a{close(e){this.props.onClose&&this.props.onClose(),i.default.menus.closeModal(this.props.modalID,e)}onCloseButton(e){this.props.onCloseButton?this.props.onCloseButton():this.close()}onEscapeKey(){this.props.noCancel||this.close()}render(){var e,t=this.props,a=this.getChildByKey("sidebar"),i=this.getChildByKey("content"),r=this.getChildByKey("buttons"),l={maxHeight:t.height?"85%":null},c=n.default.classNames("fancyModal c-bg-app popup c-shadow-popup",t.className,{small:t.small},{hasSidebar:!!a},{hasButtons:!!r}),d=n.default.classNames("fancyModalWrapper",{"small flexbox":t.small}),m=n.default.classNames("fancyModalContent c-border c-background f1",i.props.className),u=s.a.createElement(t.scrollable?o.a:"div",{className:m},i.props.children||i);if(t.small||(l.width=t.width,l.height=t.height,l.minWidth=t.minWidth),a){var h={width:t.sidebarWidth||180};e=s.a.createElement("div",{className:"fancyModalSidebar",style:h},a.props.children)}return s.a.createElement("span",{className:d},!t.noBackdrop&&s.a.createElement("div",{className:"fancyModalBackdrop",onClick:!1!==t.backdropClose?this.close.bind(this,!1):void 0}),s.a.createElement("div",{className:c,style:l,id:t.id},s.a.createElement("div",{className:"fancyModalInside flexbox flex1"},e,s.a.createElement("div",{className:"fancyModalContentArea c-border-light c-background flexbox flexvert f1"},u,r&&s.a.createElement("div",{className:n.default.classNames("fancyModalButtons c-background")},r)))))}}},757:function(e,t,a){"use strict";var n=a(57),i=a.n(n),r=a(71),s=a.n(r),l=a(0),o=a(2),c=a.n(o),d=a(15);t.a=class extends d.a{getValue(){return this.refs.select.value}setValue(e){this.refs.select.value=e}onChange(e){this.props.onChange&&this.props.onChange(this.getValue())}render(){let e=this.props,{onChange:t,className:a,children:n}=e,r=s()(e,["onChange","className","children"]),o=l.default.classNames(a,"fancySelect c-background c-border");return c.a.createElement("select",i()({},r,{className:o,ref:"select",onChange:t?this.onChange:void 0}),n)}}},758:function(e,t,a){"use strict";var n=a(0),i=a(2),r=a.n(i),s=a(15);t.a=class extends s.a{render(){var e=n.default.classNames("fancyTable c-border-heavy",this.props.className);return r.a.createElement("div",{className:e,id:this.props.id},this.props.children)}}},759:function(e,t,a){"use strict";var n=a(57),i=a.n(n),r=a(71),s=a.n(r),l=a(0),o=a(2),c=a.n(o),d=a(78),m=a(15);t.a=class extends m.a{render(){var e=this.props,{header:t,clickable:a,subtext:n}=e,r=s()(e,["header","clickable","subtext"]),o=l.default.classNames("fancyListItem",{"header c-foreground-very-faded":e.header},{clickable:!e.header&&!1!==e.clickable},{"selected c-background c-border-light":e.selected},{subtext:e.subtext},e.className);return!1===e.ripple||t||!1===e.clickable?c.a.createElement("div",i()({},r,{className:o}),this.props.children):c.a.createElement(d.a,i()({},r,{className:o}),e.children)}}},760:function(e,t,a){"use strict";var n=a(0),i=a(2),r=a.n(i),s=a(15),l=a(35);t.a=class extends s.a{init(){this.createObservables({isFocused:this.props.focused||!1})}onMount(){var e=this.refs.input;this.props.value&&(e.value=this.props.value),this.props.focused&&requestAnimationFrame(()=>{e&&(e.focus(),void 0!==this.props.selectionStart&&(e.selectionStart=this.props.selectionStart),void 0!==this.props.selectionEnd&&(e.selectionEnd=this.props.selectionEnd),e.scrollTop=0)})}onUnmount(){this.isFocused.get()&&this.onBlur()}focus(){this.refs.input.focus()}blur(){this.refs.input.blur()}getValue(){return this.refs.input.value}setValue(e){this.refs.input.value=e}getSelectionStart(){return this.refs.input.selectionStart}getSelectionEnd(){return this.refs.input.selectionEnd}onFocus(e){n.default.activeInput.set(this),this.isFocused.set(!0),this.props.onEscape&&(this.__hotkeyEscape=l.a.pushStackEscape(this.handleEscapeKey)),this.props.onFocus&&this.props.onFocus(e)}onBlur(e){n.default.activeInput.set(null),this.isFocused.set(!1),this.__hotkeyEscape&&(l.a.popStack(this.__hotkeyEscape),this.__hotkeyEscape=void 0),this.props.onBlur&&this.props.onBlur(e)}onKeyPress(e){this.props.onKeyPress&&this.props.onKeyPress(e)}handleEscapeKey(){this.props.onEscape&&this.props.onEscape()}render(){var e=this.props,t=n.default.classNames("fancyTextarea c-background c-foreground",e.className),a=!!e.spellCheck||null,i={fontSize:e.fontSize,height:e.height||150,margin:void 0!==e.margin?e.margin:"16px 0",overflow:e.height<=34&&"hidden"};return r.a.createElement("textarea",{className:t,style:i,ref:"input",readOnly:!!e.isReadOnly,spellCheck:a,onClick:e.onClick,onChange:e.onChange,onFocus:this.onFocus,onBlur:this.onBlur,onKeyDown:e.onKeyDown,onKeyPress:e.onKeyPress,placeholder:e.placeholder,tabIndex:e.tabIndex})}}},761:function(e,t,a){"use strict";var n=a(0),i=a(1),r=a(3),s=a(2),l=a.n(s),o=a(15),c=a(19),d=a(14),m=a(51),u=o.b.createClass({displayName:"ReactInviteSection",componentDisplay:i.a.ComponentDisplay.Desktop,getState:function(){var e=r.default.billingManager;return{validBilling:e._hasValidBillingData,premiumStatus:e._premiumStatus,inviteEmailSuccess:e.inviteEmailSuccess,inviteEmailError:e.inviteEmailError,inviteCodeError:e.inviteCodeError}},onTapInviteUrl:function(e){var t=e.target;t!==document.activeElement&&(c.default.selectElement(t),e.preventDefault(),n.default.sendEvent("Billing","TapInviteUrl"))},inviteEmails:function(){for(var e=0,t=this.refs.inviteEmails.getTokens(),a=[],n=0;n<t.length;n++){if(e++>5e3&&__infLoop&&__infLoop(e))throw new RangeError;a.push(t[n].email)}r.default.billingManager.sendInviteEmail(a)},render:function(){var e=r.default.billingManager,t=this.state;return l.a.createElement("span",{className:"new-modal-group"},l.a.createElement("div",{className:"new-modal-title"},l.a.createElement("div",{className:"title"},"Share Moo.do with your friends"),l.a.createElement("div",{className:"subtext center"},"Thank you for spreading the ",l.a.createElement("i",{className:"icon-heart red"}))),l.a.createElement("div",{className:"new-modal-center"},l.a.createElement("div",null,l.a.createElement("div",{className:"subtitle"},"Social"),l.a.createElement("span",{className:"shareIcons"},l.a.createElement(d.a,{iconSize:22,icon:"icon-twitter",tooltip:"@MooDoApp",onClick:e.shareTwitter.bind(e)}),l.a.createElement(d.a,{iconSize:22,marginLeft:16,marginRight:16,icon:"icon-facebook",tooltip:"@MooDoApp",onClick:e.shareFacebook.bind(e)}),l.a.createElement(d.a,{iconSize:22,icon:"icon-google-plus",tooltip:"@MooDoApp",onClick:e.shareGoogle.bind(e)})),l.a.createElement("br",null),l.a.createElement("br",null),l.a.createElement("div",{className:"subtitle"},"Share Link"),l.a.createElement("div",{className:"subtext"},e.getSelectText()),l.a.createElement(m.a,{display:"inline-block",width:280,height:36,value:e.getInviteUrl(),onMouseDown:this.onTapInviteUrl,readonly:!0}),l.a.createElement("br",null),l.a.createElement("br",null),l.a.createElement("div",{className:"subtitle"},"Share by email"),l.a.createElement("div",{className:"subtext"},"Separate multiple email addresses with commas."),l.a.createElement(m.a,{ref:"inviteEmails",width:350,buttonWidth:70,height:36,autocompleteMode:"email",placeholder:"Add friends' email addresses",buttonText:"SEND",onButtonClick:this.inviteEmails}),(t.inviteEmailSuccess||t.inviteEmailError)&&l.a.createElement("div",{id:"inviteEmailMessage",className:n.default.classNames({success:t.inviteEmailSuccess},{error:t.inviteEmailError})},t.inviteEmailSuccess||t.inviteEmailError))))}});t.a=u},762:function(e,t,a){"use strict";a.r(t);var n=a(0),i=a(1),r=a(3),s=a(2),l=a.n(s),o=a(72),c=a.n(o),d=a(15),m=a(44),u=a(95),h=a(763),p=a(14),g=a(51),f=a(65),E=a(50),C=a(34),v=a(757),y=a(13);t.default=class extends d.a{init(){var e=this.props;this.createObservables({selectedIndex:e.elementInput||e.fromPane||e.onlyMatches?0:-1,expanded:-1,selectedDocument:y.a.getDefaultDocument()})}onMount(){if(this.hasOwnInput()){var e=this.props,t=this.refs.input;t&&(t.focus(),t.updateAutocomplete(e.item||e.items&&e.items[0]))}document.addEventListener("keydown",this.onInputKeyDown,!0)}componentWillReceiveProps(e){this.props.matches!==e.matches&&this.updateState(e)}onUnmount(){document.removeEventListener("keydown",this.onInputKeyDown,!0)}onBeforeChanged(e,t){var a=this.refs;if(e.matches!==t.matches&&!e.hasSpecialMatches){this.expanded.set(-1,!1),e.expanded=-1;var n=!a.input||!this.props.allowCustom&&a.input.getValue()&&this.state.matches.length>0?0:-1;this.selectedIndex.set(n,!1),e.selectedIndex=n}}onAfterChanged(e,t){e.matches.length>t.matches.length&&setTimeout(function(){this.refs.contextMenu&&this.refs.contextMenu.updateState()}.bind(this),0)}getState(e){var t=this.getSpecialMatches();return{matches:e.matches||t||m.a.matches,hasSpecialMatches:!!t,owner:m.a.owner}}updateTextFromIndex(){if(this.hasOwnInput()){var e=this.refs.input,t=this.selectedIndex.get(),a="";if(t>=0){var n=this.state.matches[t];a=this.getInsertText(n)}e.setValue(a),e.selectEnd()}}onInputKeyDown(e){var t=this.state,a=this.props;if(a.allowCustom&&e.keyCode===i.a.KeyCode.Enter)this.onSelected(),n.default.preventDefault(e),n.default.stopPropagation(e);else if(t.matches.length>0){var r=this.selectedIndex.get();if(t.matches.length>1&&(e.keyCode===i.a.KeyCode.DownArrow||e.keyCode===i.a.KeyCode.UpArrow)){if(e.keyCode===i.a.KeyCode.UpArrow?--r<(a.allowCustom?-1:0)&&(r=t.matches.length-1):e.keyCode===i.a.KeyCode.DownArrow&&++r>t.matches.length-1&&(r=a.allowCustom?-1:0),r!==this.selectedIndex.get()&&(this.selectedIndex.set(r),this.updateTextFromIndex(),r>=0)){var s=this.refs["item_"+this.selectedIndex.get()];try{n.default.PAssert(871,s,"Item must exist in autocomplete to be scrolled to")}catch(o){n.default.reportError(o)}if(s){var l=c.a.findDOMNode(s);n.default.scrollIntoView(l,i.a.ScrollDuration.Default)}}n.default.preventDefault(e)}else e.keyCode===i.a.KeyCode.RightArrow?this.expanded.set(r):e.keyCode===i.a.KeyCode.Enter&&r>=0&&(this.onSelected(),n.default.preventDefault(e),n.default.stopPropagation(e))}}onEscapeKey(){this.hide()}hide(){m.a.hide()}onMouseOver(e){this.selectedIndex.set(e)}onClick(e){this.selectedIndex.set(e),this.updateTextFromIndex(),this.onSelected()}onButtonClick(){this.onSelected()}hasOwnInput(){return!this.props.elementInput&&!this.props.fromPane&&!this.props.onlyMatches}onSelected(){var e,t,a=this.props,n=this.state,i=this.refs.input,r={owner:n.owner,index:a.indexInPane};if(a.allowCustom)(a.allowEmpty||i.getValue())&&(t={text:i.getValue()});else{var s=this.selectedIndex.get();t=this.state.matches[s]}t&&("contact"===t.type&&"email"===this.props.mode?(e=m.a.insertMatch(""),r.token=t):"item"===t.type?(e=m.a.insertMatch(""),r.item=t.item):e=m.a.insertMatch(this.getInsertText(t)),e&&(r.value=e.text,r.offset=e.offset),a.onSelected?a.onSelected(r):n.owner&&n.owner.onAutocompleteSelected&&n.owner.onAutocompleteSelected(r),this.hide())}getInsertText(e){return"email"===this.props.mode?e.text+" <"+e.email+">":"snooze"===e.type?e.insertText:e.text}insertHighlight(e){var t=[],a=m.a.getText(),n=e.toUpperCase().indexOf(a.toUpperCase());return n>=0&&a.length>0?(n>0&&t.push(e.substr(0,n)),t.push(l.a.createElement("span",{key:"match",className:"ac-match c-bg-autocomplete-highlight"},e.substr(n,a.length))),e.length>n+a.length&&t.push(e.substr(n+a.length))):t=e,t}onClickExpand(e,t){this.expanded.set(e),t.stopPropagation()}onClickExpandedInput(e){e.stopPropagation()}onSelectedAddChild(){var e=this.props,t=this.state,a=t.expanded,n=t.matches[a];if(e.onSelected){var i={item:n.item,subItemText:this.refs.inputAdd.getValue()};e.onSelected(i)}}getSpecialMatches(){if("snooze"===this.props.mode){var e=new Date,t=e.getHours(),a=e.getDay(),s=e.clone().clearTime().addHours(Math.min(t+3,23+59/60)),l=e.clone().clearTime();t<18?l.addHours(19):l.addHours(Math.min(t+2,23+59/60));var o=e.clone().clearTime();a<6?o.addDays(6-e.getDay()).addHours(9):6===a?o.addDays(1).addHours(9):o.addHours(Math.min(t+3,23+59/60));var c=e.clone().clearTime();a>0?c.addDays(8-e.getDay()).addHours(9):c.addDays(1).addHours(9);var d=e.clone().clearTime().addDays(1).addHours(9),m=e.clone().clearTime().addDays(1).addHours(19);return[{type:"snooze",icon:"icon-access_time",iconColor:"#f30",text:"Later Today",insertText:"Today "+s.toString(r.default.International.getFormat(i.a.DFormat.ShortTime)),date:s,showDay:!1},{type:"snooze",icon:"icon-access_time",iconColor:"#fa0",text:"Tonight",insertText:"Today "+l.toString(r.default.International.getFormat(i.a.DFormat.ShortTime)),date:l,showDay:!1},{type:"snooze",icon:"icon-access_time",iconColor:"#fd0",text:"Tomorrow Morning",insertText:"Tomorrow "+d.toString(r.default.International.getFormat(i.a.DFormat.ShortTime)),date:d,showDay:!0},{type:"snooze",icon:"icon-access_time",iconColor:"#2a6",text:"Tomorrow Night",insertText:"Tomorrow "+m.toString(r.default.International.getFormat(i.a.DFormat.ShortTime)),date:m,showDay:!0},{type:"snooze",icon:"icon-access_time",iconColor:n.default.colorBlue,text:"This Weekend",insertText:o.toString(r.default.International.getFormat(i.a.DFormat.NoPadShortDayTime)),date:o,showDay:!0},{type:"snooze",icon:"icon-access_time",iconColor:"#b0d",text:"Next Week",insertText:c.toString(r.default.International.getFormat(i.a.DFormat.NoPadShortDayTime)),date:c,showDay:!0}]}}onCloseButton(){r.default.menus.closeContextMenu()}setText(e){this.refs.input.setValue(e)}onAutocompleteDateChange(e){this.setText(e),this.refs.input.selectEnd()}onChangeDocument(e){this.selectedDocument.set(y.a.getDocumentById(e))}renderRightContent(){var e=this.state;if(e.matches.length>0&&e.selectedIndex>=0){var t,a=e.matches[e.selectedIndex];if("contact"===a.type&&(t=l.a.createElement(h.a,{contact:a})),t)return l.a.createElement("div",{className:"newAutocompleteRightContent c-border"},t)}}renderObject(e,t){var a;switch(e.type){case"contact":if(e.text&&e.email){a=this.insertHighlight(e.text);var r=this.insertHighlight(" <"+e.email+">");return l.a.createElement("span",null,l.a.createElement("span",{className:"contact c-contact"},a),r)}if(e.email)return e.email;if(e.text)return a=this.insertHighlight(e.text),l.a.createElement("span",{className:"contact c-contact"},a);break;case"tag":return a=this.insertHighlight(e.text),l.a.createElement(l.a.Fragment,null,l.a.createElement("span",{className:"tag c-tag"},a),l.a.createElement("span",{className:"number c-foreground-faded"},e.count));case"date":return a=this.insertHighlight(e.text),l.a.createElement("span",{className:"date c-date"},a);case"snooze":var s=(e.showDay?e.date.toString("dddd")+" ":"")+e.date.toString("h:mm tt");return l.a.createElement(l.a.Fragment,null,l.a.createElement("span",{className:"snoozeDate"},e.text),l.a.createElement("span",{className:"snoozeDetail"},s));case"item":var o=e.item,c=n.default.parentTextForItem(o),d=t===this.state.expanded,m=n.default.classNames("autocompleteItem flexbox",{hasParent:!!c},{itemExpanded:d}),h=this.props.mode===i.a.AutocompleteMode.Move;return l.a.createElement("div",{className:m},l.a.createElement("div",{className:"autocompleteItemInside f1"},c&&l.a.createElement("div",{className:"parentPath c-foreground-very-faded"},c),l.a.createElement(u.a,{key:o.id,item:o}),h&&d&&l.a.createElement(g.a,{ref:"inputAdd",placeholder:"Add subitem",buttonText:"MOVE TO CHILD",focused:!0,onButtonClick:this.onSelectedAddChild,onClick:this.onClickExpandedInput})),h&&l.a.createElement(p.a,{icon:d?"icon-angle-down":"icon-angle-right",className:"autocompleteExpand",width:46,height:46,onClick:this.onClickExpand.bind(this,t),tooltip:"Add sub-item"}));case i.a.AutocompleteMode.GmailLabel:return a=this.insertHighlight(e.text),l.a.createElement("span",null,a);default:try{n.default.PAssert(872,!1,"Invalid insert text",e.type)}catch(f){n.default.reportError(f)}}}render(){for(var e=0,t=this.state,a=this.props,i=[],r=0;r<t.matches.length;r++){if(e++>5e3&&__infLoop&&__infLoop(e))throw new RangeError;var s=t.matches[r],o=n.default.classNames("c-border-light autocomplete_"+s.type,{selected:r===t.selectedIndex});i.push(l.a.createElement(C.a,{key:r,ref:"item_"+r,icon:s.icon,iconColor:s.iconColor,className:o,onMouseOver:this.onMouseOver.bind(this,r),canClose:!1,noMouseUp:!0,onClick:this.onClick.bind(this,r)},this.renderObject(s,r)))}var c,d=a.text,m=a.buttonText;this.hasOwnInput()&&(c=!!a.allowEmpty||(a.allowCustom?void 0:t.selectedIndex>=0));var u,h=n.default.classNames("newAutocomplete flexbox",a.className,{flexvert:this.hasOwnInput()},{hasOwnInput:this.hasOwnInput()},{expanded:-1!==t.expanded});if(this.hasOwnInput()){var p=a.documentSelector&&t.selectedDocument.getRootItem()||a.item||a.items&&a.items[0];u=l.a.createElement("div",{className:"newAutocompleteTopBar c-border-heavy"},a.documentSelector&&l.a.createElement("div",{className:"flexbox",style:{padding:8}},l.a.createElement("div",{style:{paddingRight:16}},"Document:"),l.a.createElement(v.a,{className:"f1",defaultValue:t.selectedDocument.id,onChange:this.onChangeDocument},y.a.documentsArray.get().map(e=>l.a.createElement("option",{key:e.id,value:e.id},e.text.get())))),l.a.createElement(g.a,{ref:"input",display:"block",className:"f1",placeholder:d,autocompleteMode:a.mode,padding:{left:16,right:16},tokens:a.tokens,onTokenRemoved:a.onTokenRemoved,border:!1,buttonText:m,onEscape:this.onEscapeKey,buttonEnabled:c,onButtonClick:this.onButtonClick,autocompleteItem:p}))}var k=l.a.createElement(f.a,{className:"autocompleteMatches f1",style:{minWidth:260,maxWidth:320}},i);return a.onlyMatches?k:l.a.createElement(E.a,{className:h,id:a.id,element:a.elementDisplay,maxWidth:"none",positionOffset:a.positionOffset,position:a.position,useElementPosition:!0,overflowHeight:"shrink",ref:"contextMenu"},u,k,this.renderRightContent())}}},763:function(e,t,a){"use strict";var n=a(0),i=a(3),r=a(2),s=a.n(r),l=a(15);t.a=class extends l.a{onClickNumber(e,t){i.default.menus.closeContextMenu(),n.default.openUrl(e.link,t,!0)}onClickEmail(e,t){var a=i.default.pluginManager.getPluginGmail();if(a.isActive()){i.default.menus.closeContextMenu();var r={to:[{text:"",email:e.address}]};i.default.menus.openComposeEmail(a,void 0,void 0,r)}else n.default.openUrl(e.link,t,!0)}render(){var e=this,t=this.props.contact;return s.a.createElement("div",{className:"contactPreview"},s.a.createElement("div",{className:"contactName c-border"},t.text),t.phoneNumbers&&t.phoneNumbers.map(function(t){return s.a.createElement("div",{className:"contactRow contactPhone",key:t.number},s.a.createElement("i",{className:"contactButton icon-phone c-foreground-super-faded"}),s.a.createElement("span",{className:"contactNumber link",onClick:e.onClickNumber.bind(e,t)},t.number),s.a.createElement("span",{className:"phoneType c-foreground-faded"},t.type))}),t.emails&&t.emails.map(function(t){return s.a.createElement("div",{className:"contactRow contactEmail",key:t.address},s.a.createElement("i",{className:"icon-mail_outline contactButton c-foreground-super-faded"}),s.a.createElement("span",{className:"contactEmail link",onClick:e.onClickEmail.bind(e,t)},t.address))}))}}},764:function(e,t,a){"use strict";var n=a(1),i=a(3),r=a(2),s=a.n(r),l=a(15),o=a(6),c=a(452),d=l.b.createClass({displayName:"ReactNoteEditor",componentDisplay:n.a.ComponentDisplay.Everywhere,init:function(){var e=this.props,t=e.item.hasNote()&&e.item.getNote(),a=t?t.getParsedText():void 0;this.createObservables({hasValue:!!a})},onUnmount:function(){clearTimeout(this._noteUpdateTimeout),this._noteUpdateTimeout=void 0,this._saveNote()},getValue:function(){return this.refs.noteText.getValue()},_saveNote:function(){o.d.beginAction(),i.default.PaneUpdateBatcher.beginUpdateItems();var e=this.props.item,t=e.hasNote()&&e.getNote(),a=this.refs.noteText.getValue();!t&&a&&(t=e.createNote()),t&&(a!==t.getRawText()&&t.setText(a,n.a.ChangeType.Local),a||e.setNote(void 0,n.a.ChangeType.Local)),i.default.PaneUpdateBatcher.commitUpdateItems(),o.d.endAction()},onChange:function(){var e=this.refs.noteText.getValue().length>0;e!==this.hasValue.get()&&(this.hasValue.set(e),e&&this.props.onValueSet&&requestAnimationFrame(this.props.onValueSet)),clearTimeout(this._noteUpdateTimeout),this._noteUpdateTimeout=setTimeout(this._saveNote,8e3)},render:function(){var e=this.props,t=i.default.DisplaySettings.fontSize(),a=e.item.hasNote()&&e.item.getNote(),n=a?a.getParsedText():void 0,r=a?void 0:"Add note",l=this.state.hasValue?e.heightValue:e.heightEmpty,o=!e.item.canHaveNote();return s.a.createElement(c.a,{ref:"noteText",className:e.className,value:n,placeholder:r,focused:e.focused,onChange:this.onChange,onKeyDown:e.onKeyDown,selectionStart:e.selectionStart,selectionEnd:e.selectionEnd,fontSize:t,margin:0,height:l,tabIndex:e.tabIndex,richText:!!e.richText&&!!e.goFullscreen,goFullscreen:e.richText&&e.goFullscreen,onClickClose:e.onClickClose,isReadOnly:o})}});t.a=d},765:function(e,t,a){"use strict";a.r(t);var n=a(0),i=a(1),r=a(5),s=a(2),l=a.n(s),o=a(15),c=a(756),d=a(14),m=a(87),u=o.b.createClass({displayName:"ReactModalLightbox",componentDisplay:i.a.ComponentDisplay.Desktop,init:function(){this.createObservables({isLoaded:!1,error:!1})},onLoaded:function(){this.isLoaded.set(!0)},onError:function(){this.isLoaded.set(!0,!1),this.error.set("Could not load image")},openExternal:function(){this.props.buttonAction?this.props.buttonAction():n.default.openUrl(this.props.src),this.close()},close:function(){this.refs.modal.close()},render:function(){var e=this.props,t=this.state,a=e.src,s={maxWidth:Math.min(.95*r.a.windowWidth(),900),maxHeight:Math.min(.95*r.a.windowHeight()-30,900),visibility:!t.isLoaded&&"hidden"},o=n.default.classNames({loaded:t.isLoaded});return l.a.createElement(c.a,{id:"modalLightbox",className:o,closeButton:!1,scrollable:!1,modalID:i.a.Modals.Lightbox,ref:"modal"},l.a.createElement("div",{key:"content"},!t.isLoaded&&l.a.createElement(m.a,{center:!0}),!t.error&&l.a.createElement("img",{src:a,style:s,onLoad:this.onLoaded,onError:this.onError,onClick:this.close,ref:"image"}),t.error&&l.a.createElement("div",{className:"lightboxText"},t.error),t.isLoaded&&l.a.createElement(d.a,{id:"lightboxOpen",className:"c-border-heavy",primary:!0,height:30,onClick:this.openExternal},e.buttonText||(r.a.app?"Open in browser":"Open in new tab"))))}});t.default=u},766:function(e,t,a){"use strict";a.r(t);var n=a(57),i=a.n(n),r=a(2),s=a.n(r),l=a(15),o=a(35),c=a(1),d=a(14),m=a(51),u=a(756),h=l.b.createClass({displayName:"ReactModalPrompt",componentDisplay:c.a.ComponentDisplay.Everywhere,getHotkeys:function(){return[o.a.create(c.a.KeyCode.Enter,!0,c.a.Primary.Either,c.a.Shift.Either,this.onClickYes)]},onClickYes:function(){this.refs.modal.close(this.refs.input.getValue())},onClickNo:function(){this.refs.modal.close(!1)},render:function(){return s.a.createElement(u.a,i()({},this.props,{id:"modalPrompt",title:this.props.text,small:!0,scrollable:!1,modalID:c.a.Modals.Prompt,ref:"modal"}),s.a.createElement("div",{key:"content"},s.a.createElement(m.a,{focused:!0,ref:"input"})),s.a.createElement("div",{key:"buttons"},s.a.createElement(d.a,{primary:!0,width:100,onClick:this.onClickYes},"OK"),s.a.createElement(d.a,{width:100,onClick:this.onClickNo},"NO")))}});t.default=h},767:function(e,t,a){"use strict";a.r(t);var n=a(2),i=a.n(n),r=a(15),s=a(35),l=a(1),o=a(14),c=a(756),d=r.b.createClass({displayName:"ReactModalAlert",componentDisplay:l.a.ComponentDisplay.Everywhere,getHotkeys:function(){return[s.a.create(l.a.KeyCode.Enter,!0,l.a.Primary.Either,l.a.Shift.Either,this.onClickButton)]},onClickButton:function(){this.refs.modal.close()},render:function(){var e=this.props.actionText||"OKAY";return i.a.createElement(c.a,{id:"modalAlert",closeButton:!1,small:!0,backdropClose:!1,scrollable:!1,modalID:l.a.Modals.Alert,ref:"modal"},i.a.createElement("div",{key:"content",dangerouslySetInnerHTML:{__html:this.props.text}}),i.a.createElement("div",{key:"buttons"},i.a.createElement(o.a,{primary:!0,onClick:this.onClickButton},e)))}});t.default=d},768:function(e,t,a){"use strict";a.r(t);var n=a(1),i=a(0),r=a(3),s=a(2),l=a.n(s),o=a(15),c=a(14),d=a(87),m=a(756),u=a(56),h={None:null,NoBraintreeGlobal:1,AddScriptFailure:2,NoRemoteToken:3,RemoteTokenParse:4,ContactingServer:5,NoClientIdentifier:6},p={None:null,MissingNonce:1,MissingPlanID:2,ServerFailure:3,UnauthorizedUser:4,InvalidParameter:5,MissingParameter:6,BraintreeUnknown:7,BraintreePaypalBlock:8,BraintreeInvalidCCN:9,AlreadyPremium:10},g=["2m4b","gjgm","pmjw","5pm2"];t.default=class extends o.a{init(){this._braintreeRequested=!1,this._braintreeLoaded=!1,this._clientTokenRequested=!1,this._clientToken=void 0,this._btClient=void 0,this._btIntegration=void 0,this.createObservables({isSubmitting:!1,isLoading:!0,billingFailureCode:h.None,signupFailureCode:p.None,signupErrorMessage:void 0}),this._ensureBraintreeLib(),this._ensureClientToken()}onUnmount(){this._btIntegration&&(this._btIntegration.teardown(),this._btIntegration=void 0)}_handlePaymentMethodUpdate(e){this.props.isUpdate?e&&e.nonce?this._processUpdateNonce(void 0,e.nonce):this._processUpdateNonce({error:!0},void 0):e&&e.nonce?this._processPaymentNonce(void 0,e.nonce):this._processPaymentNonce({error:!0},void 0)}_notifyDependencyLoaded(){this._braintreeLoaded&&this._clientToken&&(this._btClient=new braintree.api.Client({clientToken:this._clientToken}),braintree.setup(this._clientToken,"dropin",{container:"braintreeDropin",onPaymentMethodReceived:this._handlePaymentMethodUpdate,onError:e=>{i.default.reportError(e)},onReady:e=>{this.isLoading.set(!1),this._btIntegration=e}}))}_notifyDependencyLoadError(e){this.billingFailureCode.set(e),i.default.reportError(new Error("Client hit error in billing: "+e)),r.default.billingManager.setLastSignupError(e),i.default.sendEvent("Billing","SignupError_"+e)}_ensureBraintreeLib(){this._braintreeRequested||(window.braintree?(this._braintreeLoaded=!0,this._notifyDependencyLoaded()):(this._braintreeRequested=!0,i.default.addScriptHack("https://js.braintreegateway.com/v2/braintree.js","braintreeScript",()=>{window.braintree?(this._braintreeLoaded=!0,this._notifyDependencyLoaded()):(this._braintreeRequested=!1,this._notifyDependencyLoadError(h.NoBraintreeGlobal))},()=>{this._braintreeRequested=!1,this._notifyDependencyLoadError(h.AddScriptFailure)})))}_ensureClientToken(){this._clientTokenRequested||(this._clientTokenRequested=!0,u.a.getBillingToken().then(e=>{e.value?(this._clientToken=e.value.token,this._notifyDependencyLoaded()):this._notifyDependencyLoadError(h.NoRemoteToken)}))}_setPaymentResponse(e){switch(e.code){case n.a.PrivateAPIErrorCodes.UnauthorizedUser:this.signupFailureCode.set(p.UnauthorizedUser),this.signupErrorMessage.set(void 0);break;case n.a.PrivateAPIErrorCodes.InvalidParameter:this.signupFailureCode.set(p.InvalidParameter),this.signupErrorMessage.set(void 0);break;case n.a.PrivateAPIErrorCodes.MissingParameter:this.signupFailureCode.set(p.MissingParameter),this.signupErrorMessage.set(void 0);break;case n.a.PrivateAPIErrorCodes.BraintreePaypalBlock:this.signupFailureCode.set(p.BraintreePaypalBlock),this.signupErrorMessage.set(e.data);break;case n.a.PrivateAPIErrorCodes.BraintreeInvalidCCN:this.signupFailureCode.set(p.BraintreeInvalidCCN),this.signupErrorMessage.set(e.data);break;case n.a.PrivateAPIErrorCodes.BraintreeUnknown:this.signupFailureCode.set(p.BraintreeUnknown),this.signupErrorMessage.set(e.data);break;case n.a.PrivateAPIErrorCodes.AlreadyPremium:this.signupFailureCode.set(p.AlreadyPremium),this.signupErrorMessage.set('Our database shows you as already being a Premium member. Please contact <a href="mailto:support@moo.do">support@moo.do</a>. Sorry for the trouble!');break;default:this.signupFailureCode.set(p.ServerFailure),this.signupErrorMessage.set(void 0)}}_processUpdateNonce(e,t){i.default.sendEvent("Billing","PremiumUpdate"),!e&&t&&(this.isSubmitting.get()||(this.isSubmitting.set(!0),u.a.updatePlan({nonce:t}).then(e=>{this.isSubmitting.set(!1),e.error?(void 0!==e.errorCode?this._setPaymentResponse({code:e.errorCode}):this.signupErrorMessage.set(e.error),i.default.sendEvent("Billing","PremiumUpdateFAILURE")):(r.default.menus.isModalOpen(this.id)&&this.onClickClose(),r.default.menus.alert({text:"Your payment information has been updated.",actionText:"OKAY"}),i.default.sendEvent("Billing","PremiumUpdateSUCCESS"))})))}_processPaymentNonce(e,t){if(i.default.sendEvent("Billing","PremiumSignup"),!e&&t){this.signupFailureCode.set(p.None),this.signupErrorMessage.set(void 0);var a=g[r.default.billingManager.getBillingPeriod()];try{i.default.PAssert(875,a,"Must have selected a valid plan to signup")}catch(s){i.default.reportError(s)}a?this.isSubmitting.get()||(this.isSubmitting.set(!0),u.a.purchasePlan({nonce:t,planID:a}).then(e=>{if(this.isSubmitting.set(!1),e.error)void 0!==e.errorCode?this._setPaymentResponse({code:e.errorCode}):this.signupErrorMessage.set(e.error),i.default.sendEvent("Billing","PremiumSignupFAILURE");else{r.default.menus.isModalOpen(this.id)&&this.onClickClose(),r.default.menus.alert({text:"Thank you for signing up for <b>Moo.do</b> Premium!",actionText:"OKAY"}),i.default.sendEvent("Billing","PremiumSignupSUCCESS");var t=i.default.parseInt(r.default.billingManager.getPlanPrice(g.indexOf(a)));i.default.reportAdConversion(n.a.ConversionID.Purchase,t)}})):(this.signupFailureCode.set(p.MissingPlanID),this.signupErrorMessage.set(void 0),i.default.sendEvent("Billing","PremiumSignupFAILURE"))}else this.signupFailureCode.set(p.MissingNonce),this.signupErrorMessage.set(void 0),i.default.sendEvent("Billing","PremiumSignupFAILURE")}onClickSubmit(){this.refs.form.submit()}onClickClose(){this.refs.modal.close()}render(){var e=this.state,t=e.billingFailureCode||e.signupFailureCode?200:400,a=i.default.classNames("billingSubmit loading20 right",{loading:e.isSubmitting},{disabled:e.isLoading}),r=e.signupErrorMessage?e.signupErrorMessage:"There was an error processing your payment. We will follow up with you shortly.";return l.a.createElement(m.a,{id:"modalBilling",title:"Enter Billing Info",width:400,height:t,scrollable:!1,modalID:n.a.Modals.Billing,ref:"modal"},l.a.createElement("div",{key:"content"},!e.billingFailureCode&&!e.signupFailureCode&&l.a.createElement("form",{id:"billingForm",method:"post",action:"javascript:void(0);",ref:"form"},l.a.createElement("div",{id:"braintreeDropin"}),e.isLoading&&l.a.createElement(d.a,{center:!0},"Loading billing system..."),!e.billingFailureCode&&l.a.createElement("div",{className:a},l.a.createElement("input",{type:"submit",className:"new-modal-button mat-button-raised mat-button-blue",value:"SUBMIT"}))),e.signupFailureCode&&l.a.createElement("div",{id:"billingSignupError",dangerouslySetInnerHTML:{__html:r}}),e.billingFailureCode&&l.a.createElement("div",{id:"billingError"},"There was an error loading our payment system. Please contact support@moo.do with code "+e.billingFailureCode+" or try again in a few minutes.")),l.a.createElement("div",{key:"buttons",style:{textAlign:"right"}},e.billingFailureCode&&l.a.createElement(c.a,{primary:!0,onClick:this.onClickClose},"OK")))}}},769:function(e,t,a){"use strict";a.r(t);var n=a(57),i=a.n(n),r=a(2),s=a.n(r),l=a(15),o=a(35),c=a(1),d=a(14),m=a(756),u=l.b.createClass({displayName:"ReactModalConfirm",componentDisplay:c.a.ComponentDisplay.Everywhere,getHotkeys:function(){return[o.a.create(c.a.KeyCode.Escape,!0,c.a.Primary.Either,c.a.Shift.Either,this.onClickNo),o.a.create(c.a.KeyCode.N,!0,c.a.Primary.Either,c.a.Shift.Either,this.onClickNo),o.a.create(c.a.KeyCode.Enter,!0,c.a.Primary.Either,c.a.Shift.Either,this.onClickYes),o.a.create(c.a.KeyCode.Y,!0,c.a.Primary.Either,c.a.Shift.Either,this.onClickYes)]},onClickYes:function(){this.refs.modal.close(!0)},onClickNo:function(){this.refs.modal.close(!1)},render:function(){return s.a.createElement(m.a,i()({},this.props,{id:"modalConfirm",small:!0,backdropClose:!1,scrollable:!1,closeButton:!1,modalID:c.a.Modals.Confirm,ref:"modal"}),s.a.createElement("div",{key:"content"},this.props.text),s.a.createElement("div",{key:"buttons"},s.a.createElement(d.a,{primary:!0,width:100,onClick:this.onClickYes},"YES"),s.a.createElement(d.a,{width:100,onClick:this.onClickNo},"NO")))}});t.default=u},770:function(e,t,a){"use strict";a.r(t);var n=a(57),i=a.n(n),r=a(1),s=a(2),l=a.n(s),o=a(15),c=a(14),d=a(756),m=o.b.createClass({displayName:"ReactModalOptions",componentDisplay:r.a.ComponentDisplay.Everywhere,onClickOption:function(e){this.refs.modal.close(e)},render:function(){return l.a.createElement(d.a,i()({},this.props,{id:"modalOptions",title:"Please Choose",small:!0,backdropClose:!1,scrollable:!1,modalID:r.a.Modals.Options,ref:"modal"}),l.a.createElement("div",{key:"content"},this.props.text),l.a.createElement("div",{key:"buttons"},this.props.options.map(function(e,t){return l.a.createElement(c.a,{key:t,raised:!0,width:120,margin:"0 8px",onClick:this.onClickOption.bind(this,e)},e)}.bind(this)),l.a.createElement(c.a,{cancel:!0,raised:!0,width:100,margin:"0 8px",onClick:this.onClickOption},"Cancel")))}});t.default=m},771:function(e,t,a){"use strict";a.r(t);var n=a(0),i=a(1),r=a(13),s=a(5),l=a(2),o=a(15),c=a(19),d=a(14),m=a(759),u=a(70),h=a(756),p=a(757);t.default=class extends o.a{init(){this.createObservables({exportedContent:""}),this.exportArchived=!1,this.includeNotes=!0,this.includePrefixes=!0,this.dataType="json",this.document=r.a.getDocumentsArray()[0]}getState(){return{documents:r.a.documentsArray}}onMount(){this.exportData()}exportData(){let e=this.document;var{exportArchived:t,includeNotes:a,includePrefixes:n}=this;"html"===this.dataType?this.exportedContent.set("HTML export is not ready yet"):"text"===this.dataType?this.exportedContent.set("Text export is not ready yet"):"json"===this.dataType&&e.toJSON({exportArchived:t,includeNotes:a}).then(e=>{this.exportedContent.set(e)})}setDataType(e){this.dataType=e,this.exportData()}onChangeArchiveItems(e){this.exportArchived=e,this.exportData()}onChangeIncludePrefixes(e){this.includePrefixes=e,this.exportData()}onChangeIncludeNotes(e){this.includeNotes=e,this.exportData()}onChangeDocument(e){let t=this.state.documents.find(t=>t.id===e);this.document=t,this.exportData()}onTapOpen(){open("url").document.write(this.exportedContent.get())}onTapSelect(){var e=c.default.createSelectionRange();e.selectNodeContents(this.refs.exportedContent),c.default.setSelectionRange(e)}onTapSaveExport(){var e="";"html"===this.dataType?e="html":"text"===this.dataType?e="txt":"json"===this.dataType&&(e="json");try{n.default.saveFile(this.state.exportedContent,"moodo."+e)}catch(t){n.default.reportError(t)}}onKeyDown(e){var t=s.a.getKeyCode(e);(s.a.mac&&e.metaKey||!s.a.mac&&e.ctrlKey)&&t===i.a.KeyCode.A&&this.onTapSelect(),e.preventDefault(),e.stopPropagation()}render(){var{documents:e}=this.state,t=this.dataType,a=n.default.classNames("exportedContent",t),r=this.state.exportedContent;return l.createElement(h.a,{id:"modalExport",title:"Export Data",width:860,height:900,sidebarWidth:160,modalID:i.a.Modals.ExportData},l.createElement("div",{key:"sidebar"},l.createElement(m.a,{header:!0},"Select document"),l.createElement(p.a,{style:{marginLeft:16,height:32},ref:"selectCalendar",onChange:this.onChangeDocument},e.map(e=>l.createElement("option",{key:e.id,value:e.id},e.text.get()))),l.createElement(m.a,{header:!0},"Data Type"),l.createElement(m.a,{selected:"html"===t,onClick:this.setDataType.bind(this,"html")},"HTML"),l.createElement(m.a,{selected:"text"===t,onClick:this.setDataType.bind(this,"text")},"Plain Text"),l.createElement(m.a,{selected:"json"===t,onClick:this.setDataType.bind(this,"json")},"Moo.do Backup (JSON)"),l.createElement(m.a,{header:!0},"Options"),l.createElement(m.a,null,l.createElement(u.a,{checked:this.includePrefixes,onChange:this.onChangeIncludePrefixes},"Include Prefixes")),l.createElement(m.a,null,l.createElement(u.a,{checked:this.includeNotes,onChange:this.onChangeIncludeNotes},"Include Notes")),l.createElement(m.a,null,l.createElement(u.a,{checked:this.exportArchived,onChange:this.onChangeArchiveItems},"Archived Items")),l.createElement(m.a,{header:!0},"Export"),!s.a.app&&l.createElement(d.a,{onClick:this.onTapOpen},"OPEN IN TAB"),l.createElement(d.a,{onClick:this.onTapSelect},"SELECT"),l.createElement(d.a,{onClick:this.onTapSaveExport},"SAVE")),l.createElement("div",{key:"content"},l.createElement("div",{className:a,onKeyDown:this.onKeyDown,contentEditable:!0,dangerouslySetInnerHTML:{__html:r},ref:"exportedContent"})))}}},772:function(e,t,a){"use strict";a.r(t);var n=a(0),i=a(1),r=a(3),s=a(2),l=a.n(s),o=a(15),c=a(756),d=a(759),m=a(14),u=a(51),h=a(760);t.default=class extends o.a{init(){var e=this.props.importer;a.e(3).then(a.bind(null,805)).then(e=>{let t=e.default;this.importer=new t,this.dimportLoaded.set(!0)}),"GTasks"===e&&(e="Google Tasks"),this.createObservables({isImporting:!1,preloadDisable:0,currentImporter:e||"Moo.do Backup",importMessage:"",dimportLoaded:!1}),this.refWorkflowy=l.a.createRef()}getImporterFromName(e){var t;switch(e){case"Wunderlist":t=this.importer.wunderlist;break;case"Workflowy":t=this.importer.workflowy;break;case"OPML":t=this.importer.opml;break;case"Moo.do Backup":t=this.importer.json;break;case"Google Tasks":t=this.importer.gtasks;break;case"Trello":t=this.importer.trello;break;case"Todoist":t=this.importer.todoist;break;default:try{n.default.PAssert(873,!1,"Must add valid importer: ",e)}catch(a){n.default.reportError(a)}}return t}selectImporter(e){var t=this.getImporterFromName(e);this.currentImporter.set(e),this.importMessage.set(""),this.isImporting.set(!1),t&&t.preload&&!t.isLoaded&&(this.preloadDisable.set(this.preloadDisable.get()+1),this.importMessage.set("Loading Trello login..."),t.preload(()=>{this.preloadDisable.set(this.preloadDisable.get()-1);var e=this.getImporterFromName(this.currentImporter.get());0===this.preloadDisable.get()&&e&&e.preload&&this.importMessage.set("")},e=>{this.preloadDisable.set(this.preloadDisable.get()-1),this.importMessage.set("Error loading Trello. Please try again.")}))}onImportError(e,t){!1!==e?(e&&n.default.isString(e)||(t||(t=e),e="Moo.do encountered an error importing your data. The developers have been notified with details of the error."),n.default.reportError(t||new Error(e),e),this.importMessage.set(e)):this.importMessage.set(""),this.isImporting.set(!1)}runImport(e,t,a){if(this.isImporting.get()||this.preloadDisable.get()>0)return;let s=()=>{this.importMessage.set(""),r.default.menus.alert({text:"Your data has been imported successfully!",actionText:"OK",callback:()=>{r.default.menus.closeModal(i.a.Modals.ImportData)}}),n.default.sendEvent("ImportSuccess",e)};if("Workflowy"===e){let e=this.refWorkflowy.current.getValue(),t=this.importer.opmlToDocument(e,"Workflowy Import");!0===t?s():this.importMessage.set(t)}else{var l=this.getImporterFromName(e);if(l){n.default.sendEvent("Menu","Import"+e),this.isImporting.set(!0),this.importMessage.set("Importing...");try{this.importer.runImport(l,t,a,()=>{this.isImporting.set(!1),s()},this.onImportError)}catch(o){this.onImportError("There was an issue importing your data. Please try again later.",o)}}}}onTapSelect(e){this.selectImporter(e)}whichArea(){switch(this.state.currentImporter){case"Wunderlist":return"disabled";case"Workflowy":return"WorkflowyArea";case"OPML":case"Moo.do Backup":return"UploadArea";case"Google Tasks":case"Trello":case"Todoist":return"OAuthArea";default:try{n.default.PAssert(874,!1,"Must add valid importer")}catch(e){n.default.reportError(e)}}return!1}onClickSupport(){r.default.menus.openModal(i.a.Modals.ReportBug)}onClickImport(){if(!this.isImporting.get()){var e=this.refs.email&&this.refs.email.getValue(),t=this.refs.password&&this.refs.password.getValue();this.runImport(this.state.currentImporter,e,t)}}renderListItem(e){return l.a.createElement(d.a,{selected:this.state.currentImporter===e,onClick:this.onTapSelect.bind(this,e)},e)}renderContent(){var e,t=this.state,a=this.state.currentImporter,n=this.whichArea(),i=l.a.createElement(m.a,{primary:!0,enabled:0===t.preloadDisable&&!t.isImporting,onClick:this.onClickImport},"IMPORT");return"LoginArea"===n?e=l.a.createElement("div",null,l.a.createElement("div",{className:"importTitle"},"Import data from ",a),l.a.createElement(u.a,{floatingText:"Email",display:"block",ref:"email"}),l.a.createElement(u.a,{type:"password",floatingText:"Password",display:"block",ref:"password"}),l.a.createElement("br",null)):"UploadArea"===n?e=l.a.createElement("div",{id:"importUploadArea"},l.a.createElement("div",{className:"importTitle"},"Upload ",a," file"),l.a.createElement("div",null,"Select a","OPML"===a?"n":""," ",a," file to upload"),l.a.createElement("form",{name:"importFileUpload"},l.a.createElement("input",{id:"importFileUploadButton",type:"file",required:!0,name:"importFile"}))):"OAuthArea"===n?e=l.a.createElement("div",null,l.a.createElement("div",{className:"importTitle"},"Import data from ",a),l.a.createElement("div",null,"Click to login to your account")):"disabled"===n?(e=l.a.createElement("div",null,l.a.createElement("div",null,"Importing data from ",a," is not yet migrated to the new backend. Sorry about that! Please contact support.")),i=l.a.createElement(m.a,{style:{marginLeft:0},raised:!0,onClick:this.onClickSupport},"Contact support")):"WorkflowyArea"===n&&(e=l.a.createElement("div",null,l.a.createElement("div",{className:"importTitle",style:{marginBottom:24}},"Import data from Workflowy"),l.a.createElement("div",null,"In Workflowy, click the gear icon in the top right and select Export All. Select OPML and copy it, and paste it in the box below."),l.a.createElement(h.a,{height:300,ref:this.refWorkflowy}))),l.a.createElement("div",{className:"importInside"},e,i,l.a.createElement("div",{className:"importMessage"},t.importMessage))}render(){let e,t="Loading...";return this.state.dimportLoaded&&(e=l.a.createElement(l.a.Fragment,null,l.a.createElement(d.a,{header:!0},"Import from app"),this.renderListItem("Wunderlist"),this.renderListItem("Google Tasks"),this.renderListItem("Workflowy"),this.renderListItem("Trello"),this.renderListItem("Todoist"),l.a.createElement(d.a,{header:!0},"Import from data"),this.renderListItem("Moo.do Backup"),this.renderListItem("OPML")),t=this.renderContent()),l.a.createElement(c.a,{id:"modalImport",title:"Import Data",width:700,height:540,sidebarWidth:160,modalID:i.a.Modals.ImportData},l.a.createElement("div",{key:"sidebar"},e),l.a.createElement("div",{key:"content"},t))}}},773:function(e,t,a){"use strict";a.r(t);var n=a(0),i=a(1),r=a(3),s=a(5),l=a(2),o=a.n(l),c=a(15),d=a(110),m=a(756),u=a(759),h=a(70),p=a(757),g=a(20),f=a(97),E=a(13),C=a(48);t.default=class extends c.a{init(){this.createObservables({documents:E.a.getDocumentsArray(),selectedDoc:this.props.doc||E.a.getDocumentsArray()[0],selectedTime:void 0,showRaw:!1,showCompleted:!1,backupData:void 0,previewText:""})}getState(){let e=E.a.getDocumentsArray(),t={};return e.forEach(e=>{t[e.id]=e.backups}),t}onKeyDown(e){s.a.getKeyCode(e),(s.a.mac&&e.metaKey||!s.a.mac&&e.ctrlKey)&&i.a.KeyCode.A}onChangeDocument(e){let t=this.state.documents.find(t=>t.id===e);this.selectedDoc.set(t)}onClickBackup(e){let t=this.state.selectedDoc;this.previewText.set("Loading..."),this.backupData.set(void 0),this.selectedTime.set(e),d.a.downloadBackup(t,e).then(a=>{if(this.selectedDoc.get()===t&&this.selectedTime.get()===e&&a){let e=e=>{let t=f.a.transformItems(e),n=a.doc;this.backupData.set({raw:a,rootItem:t[n.root]})},n=r.default.crypto.getKeyBySentinel(a.sentinel),s=()=>{Promise.all(a.items.map(e=>r.default.crypto.decryptText(n,e.t,e.id).then(t=>(e.t=t,e)))).then(e)};n?s():r.default.menus.openModal(i.a.Modals.EnterCode,{isPassword:!0,text:"This document was backed up with an encryption password. Please enter the password to unlock this backup.",onSelect:e=>new Promise((i,l)=>{let o="backuptemp"+t.id;e&&r.default.crypto.addKey({name:o,password:e,sentinelSalt:g.a.getEncryptionUid()}).then(e=>{a.sentinel===e.sentinel?(i(),n=e.key,s()):(l("Incorrect password. Please try again."),r.default.crypto.removeKey(o))})})})}})}onChangeShowRaw(e){this.showRaw.set(e)}onChangeShowCompleted(e){this.showCompleted.set(e)}renderItems(e,t){if(this.state.showCompleted||!(e.flags&i.a.VMLIFlag.Complete)){let a=e.text;if(a.includes(i.a.CharDate)){let t=C.a.fromData(e.date);t&&(a=a.replace(i.a.CharDate,"!"+t.toText()))}return a=t?"":"<li>".concat(n.default.escape(a),"</li>"),e.items&&(a+="<ul>",e.items.forEach(e=>a+=this.renderItems(e,!1)),a+="</ul>"),a}return""}renderBackup(){let e=this.state.backupData;return this.state.showRaw?JSON.stringify(e.raw,null,2):"<ul>".concat(this.renderItems(e.rootItem,!0),"</ul>")}renderBackups(){let e,{selectedTime:t,selectedDoc:a}=this.state,n=this.state[a.id];return n&&(e=Object.keys(n).sort((e,t)=>+t-+e)),o.a.createElement(o.a.Fragment,null,n&&e.map(e=>{let a=+e,n=new Date(a);return o.a.createElement(u.a,{key:a,className:"backupItem c-border",onClick:this.onClickBackup.bind(this,a),selected:t===a},n.toString("MMMM d, hh:mm tt"))}),!n&&o.a.createElement(u.a,null,"No backups..."))}render(){let e=this.state,t=n.default.classNames("flexbox flexvert"),a=e.backupData?this.renderBackup():"<ul><ul><li>".concat(e.previewText,"</li></ul></ul>");return o.a.createElement(m.a,{id:"modalBackups",title:"Backups",width:1e3,height:900,sidebarWidth:200,modalID:i.a.Modals.Backups},o.a.createElement("div",{key:"sidebar"},o.a.createElement(p.a,{style:{margin:"0 16px 8px 16px",height:32},defaultValue:this.props.doc?this.props.doc.id:void 0,ref:"selectCalendar",onChange:this.onChangeDocument},e.documents.map(e=>o.a.createElement("option",{key:e.id,value:e.id},e.text.get()))),e.selectedDoc&&this.renderBackups()),o.a.createElement("div",{key:"content",className:t},o.a.createElement("div",{className:"exportHeader"},o.a.createElement(h.a,{checked:e.showRaw,onChange:this.onChangeShowRaw},"Show raw"),o.a.createElement(h.a,{checked:e.showCompleted,onChange:this.onChangeShowCompleted},"Show completed")),o.a.createElement("div",{className:"exportedContent f1 scrollable c-border",onKeyDown:this.onKeyDown,contentEditable:!0,dangerouslySetInnerHTML:{__html:a},ref:"exportedContent"})))}}},774:function(e,t,a){"use strict";a.r(t);var n=a(57),i=a.n(n),r=a(1),s=a(3),l=a(2),o=a.n(l),c=a(15),d=a(14),m=a(760),u=a(756),h=c.b.createClass({displayName:"ReactModalReportProblem",componentDisplay:r.a.ComponentDisplay.Desktop,onMount:function(){this.refs.textarea.focus()},sendReport:function(e){var t=this.props;s.default.EmailPreview.reportMessage(t.accountID,t.threadID,t.msgID,this.refs.textarea.getValue(),e),this.refs.modal.close()},onClickSend:function(){this.sendReport(!0)},onClickCancel:function(){this.sendReport(!1)},render:function(){return o.a.createElement(u.a,i()({},this.props,{id:"modalReportProblem",title:"Report Problem",scrollable:!1,modalID:r.a.Modals.ReportProblem,ref:"modal"}),o.a.createElement("div",{key:"content"},o.a.createElement("div",{className:"fancyModalText"},"Please describe the display problem."),o.a.createElement(m.a,{ref:"textarea"}),o.a.createElement("div",{className:"fancyModalText"},"This will send the content of your email to the developers to fix display errors.")),o.a.createElement("div",{key:"buttons",style:{textAlign:"right"}},o.a.createElement(d.a,{width:100,onClick:this.onClickCancel},"CANCEL"),o.a.createElement(d.a,{primary:!0,width:100,onClick:this.onClickSend},"SEND")))}});t.default=h},775:function(e,t,a){"use strict";a.r(t);var n=a(57),i=a.n(n),r=a(1),s=a(3),l=a(2),o=a.n(l),c=a(15),d=a(14),m=a(760),u=a(756);t.default=class extends c.a{onMount(){this.refs.textarea.focus()}onClickCancel(){this.refs.modal.close(!1)}onClickDelete(e,t){return s.default.sendFeedback("Moo.do Deleted Account",this.refs.textarea.getValue()).then(()=>{t(),this.refs.modal.close(!0)}),!0}render(){return o.a.createElement(u.a,i()({},this.props,{id:"modalDeleteAccount",title:"Please Confirm",scrollable:!1,modalID:r.a.Modals.DeleteAccount,ref:"modal"}),o.a.createElement("div",{key:"content"},o.a.createElement("div",{className:"fancyModalText"},"It would be very helpful if you could describe how Moo.do could be more useful to you. Your feedback will help us improve Moo.do for you and others. Thanks!"),o.a.createElement(m.a,{ref:"textarea"})),o.a.createElement("div",{key:"buttons",style:{textAlign:"right"}},o.a.createElement(d.a,{width:100,onClick:this.onClickCancel},"CANCEL"),o.a.createElement(d.a,{primary:!0,width:100,onClick:this.onClickDelete},"DELETE")))}}},776:function(e,t,a){"use strict";a.r(t);var n=a(57),i=a.n(n),r=a(0),s=a(1),l=a(3),o=a(2),c=a.n(o),d=a(15),m=a(14),u=a(758),h=a(756);t.default=class extends d.a{onTransactionClick(e){var t=r.default.clone(e);let a=l.default.billingManager.userProperties;t.company=a.invoiceCompany,t.address=a.invoiceAddress;var n=window.btoa(JSON.stringify(t));r.default.openUrl(window.location.protocol+"//"+window.location.host+"/invoice#d="+n)}render(){return c.a.createElement(h.a,i()({},this.props,{id:"modalInvoices",title:"Account Invoices",scrollable:!1,modalID:s.a.Modals.Invoices,ref:"modal"}),c.a.createElement("div",{key:"content"},this.props.transactions.length>0&&c.a.createElement(u.a,{className:"transactionsTable"},c.a.createElement("div",{key:"header"},c.a.createElement("div",null,"Transaction Date"),c.a.createElement("div",null,"Amount"),c.a.createElement("div",null)),this.props.transactions.map(e=>{var t=new Date(e.date).toString(l.default.International.getFormat(s.a.DFormat.LongStrDate));return c.a.createElement("div",{key:e.id},c.a.createElement("div",null,t),c.a.createElement("div",null,e.amount),c.a.createElement(m.a,{primary:!0,onClick:this.onTransactionClick.bind(this,e),height:"auto"},"VIEW"))})),0===this.props.transactions.length&&c.a.createElement("div",null,"There are not transactions available for this account.")))}}},777:function(e,t,a){"use strict";a.r(t);var n=a(2),i=a.n(n),r=a(1),s=a(0),l=a(3),o=a(20),c=a(15),d=a(51),m=a(14),u=a(756),h=a(758),p=a(757),g=a(65),f=a(54),E=a(110);t.default=class extends c.a{init(){this.createObservables({page:0,error:!1,invites:[],defaultAcl:r.a.DocumentAccessRoles.Write})}getState(){let e=l.default.settings.encryptionKeys,t=this.props.doc;return{acl:t.acl,isShared:t.isShared(),encryptionKeys:e,hasDocPassword:e.get()&&!!e.get()[t.id]}}onClickShare(e,t){let a=this.refs.invite,n=a.getTokens().map(e=>e.email);if(this.error.set(""),n&&n.length>0)return this.props.doc.shareWithUser(n,this.state.defaultAcl).then(e=>{if(t(),e.error)this.error.set(e.error);else if(e.value){let t=e.value;!0!==t&&s.default.isArray(t)&&t.forEach(e=>{let{email:t,error:a,shared:n,invited:i}=e;i&&!this.invites.includes(t)&&this.invites.push(t)})}}),a.clearValue(),a.clearTokens(),!0}onChangeSelectRole(e,t){let a=+t;this.props.doc.shareWithUser([e.email],a)}onChangeDefaultRole(e){this.defaultAcl.set(+e.target.value)}onClickRemovePermission(e,t,a){return this.props.doc.shareWithUser([e.email],null).then(e=>{a(),e.error&&this.error.set(e.error)}),!0}onClickCancel(){l.default.menus.closeModal(r.a.Modals.ShareDoc)}onClickSkip(e,t){if(l.default.settings.hasUserPassword()){let e=this.props.doc;return f.a.updateDocumentEncryption(e,l.default.crypto.getGlobalKeyInfo()).then(()=>{this.page.set(1),t()}),!0}this.page.set(1)}onClickEncrypt(e,t){let a=this.props.doc,n=this.refs.pass1.getValue(),i=this.refs.pass2.getValue(),r=a.id;if(n===i)return E.a.backupDocumentAll(a).then(()=>{l.default.crypto.addKey({name:r,password:n,sentinelSalt:a.id}).then(e=>{f.a.updateDocumentEncryption(a,e).then(()=>{t()})})}),!0;this.error.set("Passwords do not match")}renderSelect(e,t){return i.a.createElement(p.a,{value:e,onChange:t,style:{height:28,marginTop:6,marginRight:8}},i.a.createElement("option",{value:r.a.DocumentAccessRoles.Admin},"Admin"),i.a.createElement("option",{value:r.a.DocumentAccessRoles.Write},"Write"))}renderPageEncryption(){let e={marginTop:8,width:240};return i.a.createElement("div",null,i.a.createElement("div",{className:"font-big4 bold"},"Make this document extra secure?"),i.a.createElement("div",{className:"modal-subtitle font-small1 c-foreground-light",style:{marginTop:16}},"This document will be encrypted using this password for an extra level of security. You will need to give this password to anyone you share the document with. For your security, Moo.do cannot recover your password, so keep your password safe!"),i.a.createElement("div",{className:"flexbox flex-center"},i.a.createElement("div",{style:{marginTop:16}},i.a.createElement(d.a,{type:"password",placeholder:"Password",ref:"pass1",style:e}),i.a.createElement(d.a,{type:"password",placeholder:"Confirm Password",ref:"pass2",style:e}))),i.a.createElement("div",{className:"flexbox flex-center"},i.a.createElement("div",{style:{marginTop:20}},i.a.createElement(m.a,{raised:!0,onClick:this.onClickSkip},"SKIP"),i.a.createElement(m.a,{primary:!0,raised:!0,style:{marginLeft:24},onClick:this.onClickEncrypt},"ENCRYPT"))))}renderPageShare(){let e=this.props.doc,{acl:t,error:a,invites:n}=this.state,r=Object.keys(t).filter(e=>e!==o.a.getEncryptionUid()).map(e=>({uid:e,name:t[e].t,email:t[e].e,role:t[e].r}));return i.a.createElement(g.a,{style:{height:"100%"}},i.a.createElement(h.a,null,i.a.createElement("div",{className:"fancyTableHeader font-big4 bold",style:{marginBottom:8}},"Share ",e.text.get()),r.map(t=>{let a=t.name?"".concat(t.name," <").concat(t.email,">"):t.email;return i.a.createElement("div",{key:t.uid,className:"flexbox"},i.a.createElement("div",{className:"f1"},a),this.renderSelect(t.role,this.onChangeSelectRole.bind(this,t)),e.isAdmin()&&i.a.createElement(m.a,{icon:"icon-close",width:40,height:40,onClick:this.onClickRemovePermission.bind(this,t)}))}),n.map(e=>i.a.createElement("div",{key:e,className:"flexbox"},i.a.createElement("div",{className:"f1"},e),i.a.createElement("div",null,"Invited")))),e.isAdmin()&&i.a.createElement(i.a.Fragment,null,i.a.createElement("div",{className:"flexbox",style:{marginTop:24}},i.a.createElement(d.a,{id:"inputShareInvite",className:"f1",placeholder:"Enter an mail address",autocompleteMode:"email",ref:"invite",style:{marginRight:8}}),this.renderSelect(this.state.defaultAcl,this.onChangeDefaultRole)),i.a.createElement(m.a,{primary:!0,raised:!0,onClick:this.onClickShare,style:{marginTop:16}},"INVITE")),a&&i.a.createElement("div",{className:"error"},a),!e.isAdmin()&&i.a.createElement("div",{className:"modal-group"},i.a.createElement("div",{className:"shareNotOwned gd"},"Only the creator of this file can share it with others. Please contact the creator to share it with others."),i.a.createElement(m.a,{id:"shareOkay",raised:!0,onClick:this.onClickCancel},"OKAY")))}render(){var e=this.props,t=this.state;return e.doc,i.a.createElement(u.a,{id:"shareDoc",modalID:r.a.Modals.ShareDoc,ref:"modal",title:"Share File",width:500,height:320},i.a.createElement("div",{key:"content"},t.hasDocPassword||t.isShared||1===t.page?this.renderPageShare():this.renderPageEncryption()))}}},778:function(e,t,a){"use strict";a.r(t);var n=a(2),i=a.n(n),r=a(1),s=a(0),l=a(3),o=a(15),c=a(14),d=a(760),m=a(756);t.default=class extends o.a{onClickUV(e){s.default.openUrl("https://feedback.moo.do/",e),s.default.sendEvent("Menu","FeedbackUserVoice")}onClickTwitter(e){s.default.openUrl("https://www.twitter.com/MooDoApp",e),s.default.sendEvent("Menu","FeedbackTwitter")}onClickFacebook(e){s.default.openUrl("https://www.facebook.com/MooDoApp",e),s.default.sendEvent("Menu","FeedbackFacebook")}onClickGooglePlus(e){s.default.openUrl("https://www.google.com/+MooDoApp",e),s.default.sendEvent("Menu","FeedbackGoogle")}onClickCancel(e){l.default.menus.closeModal(r.a.Modals.ReportBug)}onClickSend(e){var t=this.refs.description.getValue();t&&t.length>2&&(l.default.sendFeedback("Moo.do Feedback",t),l.default.menus.closeModal(r.a.Modals.ReportBug),l.default.toasts.pushMessage({text:"Thanks for taking the time to send us feedback!"}),s.default.sendEvent("Menu","SendFeedback"))}render(){return i.a.createElement(m.a,{id:"reportBug",modalID:r.a.Modals.ReportBug,ref:"modal",title:"Contact Support",width:450,height:500},i.a.createElement("div",{key:"content"},i.a.createElement("div",{className:"c-foreground-light"},"If you're requesting a feature, it's often easier to vote it up (or add it) on our UserVoice page."),i.a.createElement("div",{className:"center"},i.a.createElement(c.a,{className:"mc",primary:!0,onClick:this.onClickUV},"Open UserVoice")),i.a.createElement("br",null),i.a.createElement("div",{className:"c-foreground-light"},"Or talk to us on your favorite social network."),i.a.createElement("div",{className:"feedbackIcons marginCenter flexbox flex-center",style:{width:150}},i.a.createElement(c.a,{width:50,height:50,icon:"icon-twitter",tooltip:"@MooDoApp",onClick:this.onClickTwitter}),i.a.createElement(c.a,{width:50,height:50,marginLeft:16,icon:"icon-facebook",tooltip:"MooDoApp",onClick:this.onClickFacebook}),i.a.createElement(c.a,{width:50,height:50,marginLeft:16,icon:"icon-google-plus",tooltip:"+MooDoApp",onClick:this.onClickGooglePlus})),i.a.createElement("div",{className:"mat-subheader c-foreground-light"},"Or send us a message directly."),i.a.createElement(d.a,{focused:!0,id:"bugDescription",height:200,ref:"description",margin:0})),i.a.createElement("div",{key:"buttons"},i.a.createElement(c.a,{raised:!0,onClick:this.onClickCancel},"CANCEL"),i.a.createElement(c.a,{raised:!0,primary:!0,marginLeft:16,onClick:this.onClickSend},"SEND")))}}},779:function(e,t,a){"use strict";a.r(t);var n=a(57),i=a.n(n),r=a(1),s=a(3),l=a(2),o=a.n(l),c=a(15),d=a(14),m=a(51),u=a(756);t.default=class extends c.a{init(){this.createObservables({errorText:""})}onMount(){this.refs.code.focus()}onClickConfirm(){let e=this.refs.code.getValue();this.errorText.set(""),this.props.onSelect(e).then(()=>{s.default.menus.closeModal(r.a.Modals.EnterCode)}).catch(e=>{this.errorText.set(e)})}onClickCancel(){!1!==this.props.noCancel&&s.default.menus.closeModal(r.a.Modals.EnterCode)}render(){const{text:e,noCancel:t,isPassword:a}=this.props;return o.a.createElement(u.a,i()({},this.props,{id:"modalEnterCode",closeButton:!1,width:360,scrollable:!1,modalID:r.a.Modals.EnterCode,backdropClose:!1,ref:"modal"}),o.a.createElement("div",{key:"content"},o.a.createElement("div",{className:"mb16 c-foreground"},e),o.a.createElement(m.a,{ref:"code",type:a&&"password",onEnter:this.onClickConfirm}),o.a.createElement("div",{className:"red",style:{marginTop:8}},this.state.errorText),o.a.createElement("div",{style:{marginTop:24,textAlign:"right"}},!t&&o.a.createElement(d.a,{width:100,onClick:this.onClickCancel},"CANCEL"),o.a.createElement(d.a,{primary:!0,width:100,onClick:this.onClickConfirm},"CONFIRM"))))}}},780:function(e,t,a){"use strict";a.r(t);var n=a(57),i=a.n(n),r=a(0),s=a(1),l=a(3),o=a(26),c=a(2),d=a.n(c),m=a(15),u=a(756),h=a(14),p=a(70),g=a(65);t.default=class extends m.a{init(){}getState(){let e=this.props.importer;return{waitingText:e.waitingText,documents:e.documentsObs,showTryAgain:e.showTryAgain}}close(){o.a.createDefaultState(),l.default.menus.closeModal(s.a.Modals.ImportMoodo)}sortCmpDocs(e,t){return t.date.getTime()-e.date.getTime()}onClickTryAgain(){this.props.tryAgain()}onClickCancel(){this.close()}onClickImport(e,t){let a=Object.keys(this.refs).filter(e=>e.startsWith("checkbox_")&&this.refs[e].getValue()).map(e=>this.refs[e].props.itemID);return this.props.importer.importWithDocuments(a),this.close(),!0}render(){let{withDocuments:e}=this.props,{waitingText:t,documents:a,showTryAgain:n}=this.state,o=!t&&r.default.objectValues(a);return o&&o.sort(this.sortCmpDocs),d.a.createElement(u.a,i()({},this.props,{id:"modalImport",title:"Import Data",width:400,height:e?600:300,modalID:s.a.Modals.ImportMoodo,ref:"modal"}),d.a.createElement("div",{key:"content"},d.a.createElement("div",{className:"flexbox flexvert",style:{height:"100%"}},d.a.createElement("div",{className:"setupTitle"},"Import from Moo.do"),d.a.createElement(g.a,{className:"importMoodoWrapper f1"},t&&d.a.createElement(d.a.Fragment,null,d.a.createElement("div",{className:"c-foreground-light",dangerouslySetInnerHTML:{__html:t}}),n&&d.a.createElement("div",{className:"center"},d.a.createElement(h.a,{marginTop:24,raised:!0,onClick:this.onClickTryAgain},"Try again"))),!t&&o.map(e=>{let t=e.id;return d.a.createElement(p.a,{key:t,itemID:t,ref:"checkbox_"+t,style:{marginBottom:24}},d.a.createElement("div",{className:"mooDocText bold"},e.text),d.a.createElement("div",{className:"mooDocDate c-foreground-faded"},e.date.toString(l.default.International.getFormat(s.a.DFormat.MonthDayYearLong))))})),e&&d.a.createElement("div",{style:{marginTop:32,textAlign:"right"}},d.a.createElement(h.a,{raised:!0,onClick:this.onClickCancel},"CANCEL"),d.a.createElement(h.a,{raised:!0,primary:!0,marginLeft:16,enabled:!t,onClick:this.onClickImport},"IMPORT")))))}}},781:function(e,t,a){"use strict";a.r(t);var n=a(0),i=a(3),r=a(2),s=a.n(r),l=a(15),o=a(1),c=a(14),d=a(756);t.default=class extends l.a{onClickCancel(){this.props.onCancel(),i.default.menus.closeModal(o.a.Modals.ConfirmEncrypt)}onClickDownload(){n.default.saveFile(this.props.password,"moodo encryption password.txt")}onClickYes(){this.props.onYes(),i.default.menus.closeModal(o.a.Modals.ConfirmEncrypt)}render(){return s.a.createElement(d.a,{id:"modalConfirmEncrypt",closeButton:!1,small:!0,backdropClose:!1,scrollable:!1,modalID:o.a.Modals.ConfirmEncrypt,ref:"modal"},s.a.createElement("div",{key:"content"},s.a.createElement("p",null,"It is very important that you remember this password."),s.a.createElement("p",{style:{color:"red",fontWeight:"bold"}},"It cannot be reset."),s.a.createElement("p",null,"Are you sure you want to set an encryption password?")),s.a.createElement("div",{key:"buttons"},s.a.createElement(c.a,{raised:!0,cancel:!0,onClick:this.onClickCancel},"Cancel"),s.a.createElement(c.a,{raised:!0,marginLeft:16,onClick:this.onClickDownload},"Download Password"),s.a.createElement(c.a,{raised:!0,primary:!0,marginLeft:16,onClick:this.onClickYes},"Yes")))}}},782:function(e,t,a){"use strict";a.r(t);var n=a(2),i=a.n(n),r=a(15),s=a(4),l=a(50),o=a(34);t.default=class extends r.a{onClickAddSubproject(){var e=this.props;e.pane.zoomIn(e.item),e.pane.addProject()}onClickZoom(){this.props.item.canZoom()&&(s.a.setFocusedPane(this.props.pane),this.props.pane.zoomIn(this.props.item))}render(){return this.props.pane,i.a.createElement(l.a,{key:"contextMenuGmailSort",id:"contextMenuGmailSort",element:this.props.element},i.a.createElement(o.a,{icon:"icon-unfold_less",onClick:this.onClickZoom},"Zoom to item"),i.a.createElement(o.a,{icon:"icon-add",onClick:this.onClickAddSubproject},"Add subproject"),i.a.createElement(o.a,{icon:"icon-zoom-in",onClick:this.onClickZoom},"Zoom In"))}}},783:function(e,t,a){"use strict";a.r(t);var n=a(1),i=a(2),r=a.n(i),s=a(15),l=a(50),o=a(34),c=a(64);t.default=class extends s.a{setViewMode(e){this.props.onSelected(e)}render(){return this.props.pane,r.a.createElement(l.a,{key:"contextMenuGmailSort",id:"contextMenuGmailSort",element:this.props.element},r.a.createElement(c.a,null,"Sort by"),r.a.createElement(o.a,{icon:"icon-access_time",onClick:this.setViewMode.bind(this,n.a.GmailViewMode.Date)},n.a.GmailViewMode.Date),r.a.createElement(o.a,{icon:"icon-exclamation",onClick:this.setViewMode.bind(this,n.a.GmailViewMode.Priority)},n.a.GmailViewMode.Priority))}}},784:function(e,t,a){"use strict";a.r(t);var n=a(57),i=a.n(n),r=a(0),s=a(1),l=a(3),o=a(2),c=a(15),d=a(44),m=a(52),u=a(143),h=a(762),p=a(453),g=a(14),f=a(50),E=a(64);t.default=class extends c.a{getState(){var e=0,t=this.props.pane,a=t.search,n={closedHelps:l.default.settings.closedHelps,hasFilter:!1,matches:d.a.matches,showHelp:l.default.settings.shouldShowHelp("searchHelp"),viewState:t.viewState,viewMode:t.getViewMode(),sortModeBlocks:t.supportsSortBlocks()&&t.getSortModeBlocks(),sortModeItems:t.supportsSortItems()&&t.getSortModeItems()};t.isViewDates()&&(n.calendars=m.a.GCalendarsAvailable,n.displayCalendars=t.displayCalendars,n.displayLocalItems=t.displayLocalItems);for(var i=0;i<a.filters.length;i++){if(e++>5e3&&__infLoop&&__infLoop(e))throw new RangeError;var r=a.filters[i];n[r.name]=r.value,n[r.name+"Enabled"]=r.enabled,0!==r.value.get()&&(n.hasFilter=!0)}return n}onMount(){this.listenTo(this.props.pane.search.onChanged),this.props.pane.onDestroyed.listen(this.close)}onUnmount(){d.a.onClosed(),this.props.pane.onDestroyed.unlisten(this.close)}close(){l.default.menus.isContextMenuOpen("ReactContextMenuSearch")&&l.default.menus.closeContextMenu("ReactContextMenuSearch")}onSettingChanged(){this.updateState()}onClickSelectCalendars(e){l.default.menus.openContextMenu({componentName:"ReactContextMenuCalendars",element:e.target,pane:this.props.pane})}saveScrollOfTop(){this.props.pane.getInfiniteList().saveScrollOfTop(!0)}onToggleButton(e){this.saveScrollOfTop(),this.props.pane.search.toggleFilter(e)}setPriority(e){this.saveScrollOfTop();var t=this.props.pane.search;t.getFilterValue("priority")===e&&(e=0),t.setFilter("priority",e)}onClickCloseHelp(){l.default.settings.closeHelp("searchHelp")}onClickShowHelp(){l.default.settings.uncloseHelp("searchHelp")}renderSearchButton(e){var t=this.props.pane;return o.createElement(u.a,{key:e.name,filter:e,filterValue:e.value.get(),search:t.search,hasBorder:!0})}renderSearchPriority(){var e=this.props.pane.search.filter_priority.value.get(),t=r.default.classNames("searchPriorities",{hasSelected:!!e}),a=r.default.classNames("searchPriority searchP0",{selected:e===s.a.VMLIFlag.P0}),n=r.default.classNames("searchPriority searchP1",{selected:e===s.a.VMLIFlag.P1}),i=r.default.classNames("searchPriority searchP2",{selected:e===s.a.VMLIFlag.P2});return o.createElement("span",{key:"priority",className:t},o.createElement("span",{className:a,"data-tooltip":"Show only high priority",onClick:this.setPriority.bind(this,s.a.VMLIFlag.P0)}),o.createElement("span",{className:n,"data-tooltip":"Show medium priority and higher",onClick:this.setPriority.bind(this,s.a.VMLIFlag.P1)}),o.createElement("span",{className:i,"data-tooltip":"Show low priority and higher",onClick:this.setPriority.bind(this,s.a.VMLIFlag.P2)}))}render(){for(var e=0,t=this.props,a=this.props.pane,n=this.state,l=a.search,c=[],d=[],m=0;m<l.filters.length;m++){if(e++>5e3&&__infLoop&&__infLoop(e))throw new RangeError;var u=l.filters[m];u.enabled.get()&&(u.isOption?d.push(this.renderSearchButton(u)):u.icon?c.push(this.renderSearchButton(u)):"priority"===u.name&&c.push(this.renderSearchPriority()))}if(a.isViewDates()){var C=a.isCalFilterActive(),v=r.default.classNames("buttonCalendars",{selected:C});d.push(o.createElement(g.a,{key:"calendars",height:s.a.SearchHeight,className:v,onClick:this.onClickSelectCalendars,padding:8,tooltip:"Select calendars to display in this pane"},"Calendars"))}return o.createElement(f.a,i()({},t,{key:"contextMenuSearch"+a.id,id:"contextMenuSearch",maxHeight:400,element:t.element}),n.matches.length>0&&o.createElement(h.default,{onlyMatches:!0,matches:n.matches}),0===n.matches.length&&o.createElement(o.Fragment,null,o.createElement("div",{className:"flexbox"},!1!==t.showFilters&&o.createElement(p.a,{pane:a}),o.createElement("div",{className:"f1"}),!n.showHelp&&o.createElement(g.a,{className:"searchHelpButton",icon:"icon-question",iconSize:12,width:32,height:32,onClick:this.onClickShowHelp})),n.showHelp&&o.createElement(o.Fragment,null,!1!==t.showFilters&&o.createElement("hr",null),o.createElement("div",{className:"rel"},o.createElement(E.a,null,"Hints"),o.createElement(g.a,{className:"searchHintsClose",icon:"icon-close",iconSize:12,width:28,height:28,onClick:this.onClickCloseHelp}),o.createElement("div",{className:"searchHints c-foreground-light"},o.createElement("div",null,o.createElement("span",null,o.createElement("b",null,"-word")),"hide items including word"),o.createElement("div",null,o.createElement("span",null,"a ",o.createElement("b",null,"or")," b"),"show items matching a or b"),o.createElement("div",null,o.createElement("span",null,o.createElement("b",null,"#tag")),"show items with #tag"),o.createElement("div",null,o.createElement("span",null,o.createElement("b",null,"+name")),"show items with +name"),o.createElement("div",null,o.createElement("span",null,"date:",o.createElement("b",null,"<date>")),"show items on date"),o.createElement("div",null,o.createElement("span",null,"before:",o.createElement("b",null,"<date>")),"show items before date"),o.createElement("div",null,o.createElement("span",null,"after:",o.createElement("b",null,"<date>")),"show items after date"),o.createElement("div",null,o.createElement("span",null,"date:overdue"),"show overdue items"),o.createElement("div",null,o.createElement("span",null,o.createElement("b",null,s.a.PrefixItemAutocomplete+"item")),"zoom into item"))))))}}},785:function(e,t,a){"use strict";a.r(t);var n=a(57),i=a.n(n),r=a(71),s=a.n(r),l=a(1),o=a(3),c=a(2),d=a.n(c),m=a(15),u=a(35),h=a(26),p=a(14),g=a(50),f=a(64),E=a(51);t.default=class extends m.a{init(){this.refInput=d.a.createRef()}getHotkeys(){return[u.a.create(l.a.KeyCode.Escape,!0,l.a.Primary.Either,l.a.Shift.Either,this.onClickCancel),u.a.create(l.a.KeyCode.Enter,!0,l.a.Primary.Either,l.a.Shift.Either,this.onClickSave)]}onClickSave(){var e=this.refInput.current.getValue();this.props.board?h.a.renameBoard(this.props.board,e)?(o.default.tooltip.hideTip(),o.default.menus.closeContextMenu("ReactContextMenuNameBoard"),this.updateState()):o.default.tooltip.displayTip({text:"Please give this board a unique name.",element:this.refs.menu}):o.default.menus.closeContextMenu("ReactContextMenuNameBoard",e)}onClickCancel(){o.default.menus.closeContextMenu("ReactContextMenuNameBoard",!1)}render(){var e=this.props,{board:t}=e,a=s()(e,["board"]),n=(t?"Rename":"Name new")+" board";return d.a.createElement(g.a,i()({},a,{key:"contextMenuEditBoard",id:"contextMenuEditBoard",width:400}),d.a.createElement(f.a,{padding:0,border:!1},n),d.a.createElement(E.a,{value:t?this.props.board.name.get():"",focused:!0,ref:this.refInput}),d.a.createElement("div",{className:"fancyModalButtons center"},d.a.createElement(p.a,{primary:!0,width:100,onClick:this.onClickSave},"SAVE"),d.a.createElement(p.a,{width:100,onClick:this.onClickCancel},"CANCEL")))}}},786:function(e,t,a){"use strict";a.r(t);var n=a(57),i=a.n(n),r=a(3),s=a(2),l=a.n(s),o=a(15),c=a(50),d=a(34),m=a(64);t.default=class extends o.a{addPane(e){this.props.onSelected(e)}render(){var e=this,t=this.props,a=r.default.pluginManager.getPluginGmail(),n=a.getSyncAccounts();return l.a.createElement(c.a,i()({},t,{key:"contextMenuTitle",id:"contextMenuTitle",maxHeight:400}),t.showHeader&&l.a.createElement(m.a,{topHeader:!0},"Open Gmail Account"),n.map(function(t){var n=a.getDefaultDisplayItem(t);return l.a.createElement(d.a,{key:t,onClick:e.addPane.bind(e,n)},t)}))}}},787:function(e,t,a){"use strict";a.r(t);var n=a(1),i=a(3),r=a(2),s=a.n(r),l=a(15),o=a(4),c=a(50),d=a(34);t.default=class extends l.a{init(){this.refMenu=s.a.createRef()}onClickPrefix(e){o.a.applyPrefixToSelection(e,this.props.item),this.selectEnd()}onClickHR(){this.props.item.setText(n.a.TextMDHR,n.a.ChangeType.Local),this.selectEnd()}onClickFile(e,t){var a=this.props,{left:n,top:r}=this.refMenu.current.state;i.default.menus.openContextMenu({componentName:"ReactContextMenuDropZone",element:t.target,pane:a.pane,item:a.item,image:e,pos:{left:n,top:r},paneObject:a.paneObject})}selectEnd(){var e=this.props.item,t=e.getParsedText();o.a.selectItem(e,t.length)}render(){return s.a.createElement(c.a,{key:"contextMenuAddItem",id:"contextMenuAddItem",element:this.props.element,ref:this.refMenu},s.a.createElement(d.a,{icon:"icon-project",hotkey:n.a.Prefix.Header+" Space",iconSize:18,onClick:this.onClickPrefix.bind(this,n.a.Prefix.Header)},"Project"),s.a.createElement(d.a,{icon:"icon-check",hotkey:n.a.Prefix.Task+" Space",onClick:this.onClickPrefix.bind(this,n.a.Prefix.Task)},"Task"),s.a.createElement(d.a,{icon:"icon-bullet",hotkey:n.a.Prefix.Bullet+" Space",iconSize:24,onClick:this.onClickPrefix.bind(this,n.a.Prefix.Bullet)},"Bullet"),s.a.createElement(d.a,{icon:"icon-numlist",hotkey:n.a.Prefix.NumList+" Space",iconSize:14,onClick:this.onClickPrefix.bind(this,n.a.Prefix.NumList)},"Numbered List"),s.a.createElement(d.a,{icon:"icon-drive-file",iconSize:14,onClick:this.onClickFile.bind(this,!1)},"File"),s.a.createElement(d.a,{icon:"icon-image",iconSize:13,onClick:this.onClickFile.bind(this,!0)},"Image"),s.a.createElement(d.a,{icon:"icon-hr",hotkey:n.a.TextMDHR,iconSize:14,onClick:this.onClickHR},"Horizontal Line"))}}},788:function(e,t,a){"use strict";a.r(t);var n=a(1),i=a(3),r=a(2),s=a.n(r),l=a(15),o=a(6),c=a(14),d=a(70),m=a(50),u=a(64),h=a(34);t.default=class extends l.a{init(){this.createObservables({anyCalendarsSync:this.computeAnyCalendarsSync()}),o.d.miscAction({type:o.b.Misc,misc:o.a.OpenCalendarsMenu})}getState(){var e=this.props.pane;return{displayCalendars:e.displayCalendars,displayLocalItems:e.displayLocalItems}}getSyncCalendars(){return i.default.pluginManager.getPluginGCalendar().getImportCalendarList()}computeAnyCalendarsSync(){var e=this.props.pane.displayCalendars.get(),t=this.getSyncCalendars(),a=0;if(t)for(var n=0,i=0;i<t.length;i++){if(n++>5e3&&__infLoop&&__infLoop(n))throw new RangeError;!1!==e[t[i].id]&&a++}return a>0}onChangeDisplayCalendar(e,t){this.props.pane.setDisplayCalendar(e,t),this.anyCalendarsSync.set(this.computeAnyCalendarsSync())}onChangeDisplayLocal(e){this.props.pane.setDisplayLocal(e)}onChangeAllCalendars(e){for(var t=0,a=this.props.pane,n=this.getSyncCalendars(),i=this.state.displayCalendars,r=0;r<n.length;r++){if(t++>5e3&&__infLoop&&__infLoop(t))throw new RangeError;var s=n[r];i[s.id]!==e&&a.setDisplayCalendar(s,e)}}onClickAdd(){i.default.menus.closeContextMenu(),i.default.menus.openSettings(n.a.SettingsSections.GoogleCalendar)}onClickSettings(){i.default.menus.closeContextMenu(),i.default.menus.openSettings(n.a.SettingsSections.Plugins)}render(){var e=this.state,t=this.props,a=i.default.pluginManager.getPluginGCalendar(),n=a.isEnabled(),r=this.getSyncCalendars(),l=e.displayCalendars;return s.a.createElement(m.a,{key:"contextMenuSelectCalendars",id:"contextMenuSelectCalendars",element:t.element},s.a.createElement(h.a,null,s.a.createElement(d.a,{checked:e.displayLocalItems,onChange:this.onChangeDisplayLocal},"Display local events")),n&&s.a.createElement(s.a.Fragment,null,s.a.createElement(u.a,null,s.a.createElement(d.a,{checked:e.anyCalendarsSync,onChange:this.onChangeAllCalendars,size:14},"Google Calendars")),r&&r.map(e=>{var t=a.getCalendarBackgroundColor(e.id);return s.a.createElement(h.a,{key:e.id},s.a.createElement(d.a,{checked:!1!==l[e.id],checkedColor:t,onChange:this.onChangeDisplayCalendar.bind(this,e)},e.summary||e.id))}),(!r||0===r.length)&&s.a.createElement("div",{className:"center",style:{marginTop:8}},s.a.createElement(c.a,{raised:!0,primary:!0,onClick:this.onClickAdd},"ADD CALENDARS"))),!n&&s.a.createElement("div",{className:"center",style:{marginTop:24}},s.a.createElement(c.a,{raised:!0,primary:!0,onClick:this.onClickSettings},"ENABLE CALENDARS")))}}},789:function(e,t,a){"use strict";a.r(t);var n=a(57),i=a.n(n),r=a(1),s=a(3),l=a(2),o=a.n(l),c=a(15),d=a(35),m=a(51),u=a(50),h=a(14);t.default=class extends c.a{init(){var e=this.props.text,t=r.a.Regexp.MDLink,a=new RegExp(/\S{2,}\.[^0-9.\s]{2,}\S*$/);t.lastIndex=0;var n=t.exec(e);n?(this.text=n[2],this.link=n[3]):null===a.exec(e)?this.text=e:this.link=e,this.refText=o.a.createRef(),this.refLink=o.a.createRef()}getHotkeys(){return[d.a.create(r.a.KeyCode.Enter,!0,r.a.Primary.Either,r.a.Shift.Either,this.onClick),d.a.create(r.a.KeyCode.Escape,!0,r.a.Primary.Either,r.a.Shift.Either,this.close)]}onMount(){var e;(e=this.link||!this.text?this.refText.current:this.refLink.current).focus(),e.selectAll()}close(){s.default.menus.closeContextMenu("ReactContextMenuInsertLink")}onClickRemove(){var e=this.refText.current.getValue();this.props.onInsertLink({text:e,url:""})}onClick(){var e=this.refText.current.getValue(),t=this.refLink.current.getValue();(e||t)&&s.default.menus.isContextMenuOpen("ReactContextMenuInsertLink")&&(this.close(),t&&!t.startsWith("http")&&(t="http://"+t),this.props.onInsertLink({text:e,url:t}))}render(){return o.a.createElement(u.a,i()({},this.props,{key:"contextMenuInsertLink",id:"contextMenuInsertLink"}),o.a.createElement("div",{className:"flexbox"},o.a.createElement("span",null,"Text"),o.a.createElement(m.a,{className:"f1",ref:this.refText,height:28,width:260,value:this.text||this.link,onEnter:this.onClick,onEscape:this.close})),o.a.createElement("div",{className:"flexbox"},o.a.createElement("span",null,"Link"),o.a.createElement(m.a,{className:"f1",ref:this.refLink,height:28,width:260,value:this.link,onEnter:this.onClick,onEscape:this.close})),o.a.createElement("div",{className:"flexbox",style:{marginTop:16}},this.link&&o.a.createElement(h.a,{cancel:!0,height:32,onClick:this.onClickRemove},"REMOVE"),o.a.createElement("div",{className:"f1"}),o.a.createElement(h.a,{primary:!0,height:32,onClick:this.onClick},"INSERT")))}}},790:function(e,t,a){"use strict";a.r(t);var n=a(3),i=a(2),r=a.n(i),s=a(15),l=a(763),o=a(50);t.default=class extends s.a{onClose(){n.default.menus.closeContextMenu("ReactContextMenuContactDetails")}render(){return r.a.createElement(o.a,{key:"contextMenuContactDetails",id:"contextMenuContactDetails",element:this.props.element,position:this.props.position},r.a.createElement(l.a,{contact:this.props.contact}))}}},791:function(e,t,a){"use strict";a.r(t);var n=a(57),i=a.n(n),r=a(1),s=a(3),l=a(2),o=a.n(l),c=a(15),d=a(4),m=a(5),u=a(17),h=a(764),p=a(50),g=c.b.createClass({displayName:"ReactNotePopup",componentDisplay:r.a.ComponentDisplay.Everywhere,init:function(){this.createObservables({isFullscreen:!1})},getState:function(){return{maxWidth:this.props.pane.getWidth()-20}},onMount:function(){u.a.listen("windowResize",this.onResize)},onResize:function(){this.updateState(),setTimeout(function(){this.refs.menu.updateState()}.bind(this),300)},onUnmount:function(){var e=this.props.item;u.a.unlisten("windowResize",this.onResize),d.a.selectIndex(this.props.index-1,e.getParsedText().length)},onKeyPress:function(e){m.a.getKeyCode(e)!==r.a.KeyCode.Enter||!e.shiftKey||e.altKey||e.ctrlKey||e.metaKey||(s.default.menus.closeContextMenu(),e.preventDefault(),e.stopPropagation())},onClickClose:function(){s.default.menus.closeContextMenu()},onGoFullscreen:function(e){console.log(e),this.isFullscreen.set(e)},render:function(){var e=this.props,t=this.state,a=this.state.maxWidth,n={overflow:t.isFullscreen?"visible":void 0};return o.a.createElement(p.a,i()({},this.props,{key:e.note.id+"_Note",id:"contextMenuNote",width:600,maxWidth:a,style:n,ref:"menu"}),o.a.createElement(h.a,{ref:"noteText",item:e.item,focused:!0,onKeyPress:this.onKeyPress,selectionStart:e.selectionStart,selectionEnd:e.selectionEnd,richText:!0,goFullscreen:this.onGoFullscreen,onClickClose:this.onClickClose}))}});t.default=g},792:function(e,t,a){"use strict";a.r(t);var n=a(1),i=a(2),r=a.n(i),s=a(15),l=a(3),o=a(50);t.default=class extends s.a{_generateParticipantTextExpanded(e){return e.text?r.a.createElement("span",null,r.a.createElement("b",null,e.text)," <"+e.email+">"):e.email}renderLabels(){for(var e=0,t=l.default.pluginManager.getPluginGmail(),a=this.props.accountID,n=this.props.message.labelIds,i=[],s=0;s<n.length;s++){if(e++>5e3&&__infLoop&&__infLoop(e))throw new RangeError;var o=t._getLabelByID(a,n[s]);i.push(r.a.createElement("div",{key:s},o.getName()))}return this.renderLine("labels",i)}renderParticipants(e){var t=this.props.message[e].map(function(e,t){return r.a.createElement("div",{key:t},this._generateParticipantTextExpanded(e))}.bind(this));return this.renderLine(e,t)}renderLine(e,t){return r.a.createElement("div",{className:"emailDetailsLine flexbox"},r.a.createElement("div",null,e+":"),r.a.createElement("span",{className:"f1"},t))}render(){var e=this.props.message,t=e.date,a=t.toString(l.default.International.getFormat(n.a.DFormat.DayMonthDateYear))+" at "+t.toString(l.default.International.getFormat(n.a.DFormat.ShortTime));return r.a.createElement(o.a,{key:"contextMenuEmailDetails",id:"contextMenuEmailDetails",element:this.props.element},this.renderLine("from",this._generateParticipantTextExpanded(e.from)),e.to&&this.renderParticipants("to"),e.cc&&this.renderParticipants("cc"),e.bcc&&this.renderParticipants("bcc"),this.renderLine("date",a),this.renderLine("subject",e.subject),e.labelIds&&this.renderLabels())}}},793:function(e,t,a){"use strict";a.r(t);var n=a(0),i=a(5),r=a(1),s=a(3),l=a(2),o=a.n(l),c=a(15),d=a(46),m=a(4),u=a(41),h=a(14),p=a(50),g=a(64),f=a(34),E=a(31),C=a(39);t.default=class extends c.a{init(){var e=this.props,t=!1;this.mod=i.a.secModKey,this.priMod=i.a.priModKey,this.items=[],e.pane.applyToSelection(a=>{e.item===a&&(t=!0),this.item||(this.item=a),this.hasSelection=!0,this.items.push(a)}),t||(this.item=void 0,this.hasSelection=!1),this.item||(this.item=e.item,this.items=[this.item],this.hasSelection=!1);try{n.default.PAssert(710,this.item,"Must have a valid item")}catch(a){n.default.reportError(a)}}onClickComplete(){this.hasSelection?n.default.focusedPane.applyFnToSelection("setComplete",{toggle:"isComplete",value2:r.a.ChangeType.Local}):this.item.setComplete(!this.item.isComplete(),r.a.ChangeType.Local)}onClickStar(){this.hasSelection?n.default.focusedPane.applyFnToSelection("setStarred",{toggle:"isStarred",value2:r.a.ChangeType.Local}):this.item.setStarred(!this.item.isStarred(),r.a.ChangeType.Local)}onClickPriority(e){this.hasSelection?this.props.pane.applyPriorityToSelection(e):this.item.setPriority(e,r.a.ChangeType.Local),s.default.menus.closeContextMenu()}onClickIndent(e){m.a.fireKeyEvent(void 0,{normCode:r.a.KeyCode.Tab,shiftKey:e})}onClickMove(){this.props.pane.autocompleteMove()}onClickCreateTask(){this.props.pane.autocompleteCreateTask()}onClickNote(){m.a.editNote(this.item)}onClickCollapse(){this.item.toggleCollapsed(this.props.pane)}onClickZoom(){this.item.canZoom()&&(m.a.setFocusedPane(this.props.pane),this.props.pane.zoomIn(this.item))}onClickZoomNewPane(){var e=this.props.pane;if(this.item.canZoom()){var t=s.default.PaneManager.getPaneIndex(e)+1,a=e.getSaveInfo();a.item=this.item,a.document=e.getDocument(),delete a.id;var n=d.a.createPane(r.a.PaneMode.Task,a);return s.default.PaneManager.addPaneAtIndex(n,t),m.a.setFocusedPane(n),n.onAdded(),!1}}onClickGoto(){s.default.PaneManager.scrollToAndHighlightItem(this.item,this.props.pane)}onClickArchive(){var e=this.props.pane;e.isWriteable&&(this.hasSelection?e.archiveSelected(!0):this.props.item.archiveSelf(r.a.ChangeType.Local))}onClickUnarchive(){this.item.unArchive(r.a.ChangeType.Local)}onClickUndelete(){this.item.unDelete(r.a.ChangeType.Local)}onClickDelete(){var e=this.item,t=this.props.pane;if(e.isNote()){var a=m.a.getStartIndex(),n=e.parent();e.parent().setNote(void 0,r.a.ChangeType.Local),m.a.selectIndex(a-1,n.getParsedText().length)}else t.isWriteable&&(t.isViewDates()&&!e.hasAttachmentType(r.a.PluginType.Calendar)&&e.hasChildren()?s.default.menus.options("The item you are deleting has children.",["Remove Date","Delete All"],t=>{if("Remove Date"===t){e.setMooDate(void 0,r.a.ChangeType.Local);var a=e.getParsedText().replace(r.a.CharDate,"");e.setText(a,r.a.ChangeType.Local)}else"Delete All"===t&&e.deleteSelf(r.a.ChangeType.Local)}):this.hasSelection?(C.a.saveDeleteSelection(),t.deleteSelected()):(e.hasAttachmentType(r.a.PluginType.Calendar)&&this.onClickDeleteCalendar(),this.props.item.deleteSelf(r.a.ChangeType.Local)))}onClickAddCalendar(){var e=s.default.pluginManager.getPluginGCalendar(),t=this.item;e&&(e.createEventForItem(t),t.itemChanged.notify())}onClickDeleteCalendar(){var e=0,t=this.props.pane,a=0,i=(e,n)=>{a--,n?0===a&&t.updateItems():s.default.toasts.pushMessage({text:"There was an error removing the event from your Google Calendar.",action:r.a.MessageAction.Okay})};for(let d=0;d<this.items.length;d++){if(e++>5e3&&__infLoop&&__infLoop(e))throw new RangeError;let t=this.items[d];if(t.hasAttachmentType(r.a.PluginType.Calendar)){var l=t.getAttachmentByPlugin(r.a.PluginID.GCalendar);try{n.default.PAssert(711,l,"Must be able to get a valid attachment")}catch(c){n.default.reportError(c)}try{n.default.PAssert(712,this.item,"Must have a valid item")}catch(c){n.default.reportError(c)}var o=l.getPlugin();o.hasWritePermissionForAttach(l)?(a++,m.a.reset(),o.deleteCalendarEventForItem(t,l,n.default.newEmptyFn(),n.default.newEmptyFn(),i)):s.default.toasts.pushMessage(r.a.MessageID.ReadOnlyCalendar)}}}onClickReply(){this.hasSelection?this.props.pane.replySelected():this.props.pane.openEmailByItem(this.item,r.a.EmailResponseMode.Reply)}onClickReplyAll(){this.hasSelection?this.props.pane.replyAllSelected():this.props.pane.openEmailByItem(this.item,r.a.EmailResponseMode.ReplyAll)}onClickForward(){this.hasSelection?this.props.pane.forwardSelected():this.props.pane.openEmailByItem(this.item,r.a.EmailResponseMode.Forward)}onClickRead(){var e=this.item,t=e.getAttachmentByType(r.a.PluginType.Email),a=t.getPlugin(),n=a.isItemUnread(e);this.hasSelection?this.props.pane.markReadSelected(n):n?a.performAction(r.a.PluginAction.Gmail.MarkRead,!1,t):a.performAction(r.a.PluginAction.Gmail.MarkUnread,!1,t)}onClickStarGmail(){if(this.hasSelection)this.props.pane.toggleStarSelected();else{var e=this.item.getAttachmentByType(r.a.PluginType.Email),t=e.getPlugin();t.isItemStarred(this.item)?t.performAction(r.a.PluginAction.Gmail.Unstar,!1,e):t.performAction(r.a.PluginAction.Gmail.Star,!1,e)}}onClickSnooze(){this.props.pane.autocompleteSnooze()}onClickLabel(){this.props.pane.autocompleteLabel()}onClickSchedule(){this.props.pane.autocompleteSchedule()}onClickArchiveGmail(){var e=this.item,t=e.getAttachmentByType(r.a.PluginType.Email),a=t.getPlugin(),n=a.isItemArchived(e);"PaneGmail"===this.props.pane.type&&this.hasSelection?this.props.pane.archiveSelected(!n):n?a.performAction(r.a.PluginAction.Gmail.Unarchive,!1,t):a.performAction(r.a.PluginAction.Gmail.Archive,!1,t)}onClickDeleteGmail(){var e=this.item,t=e.getAttachmentByType(r.a.PluginType.Email).getPlugin(),a=t.isItemFullTrashed(e);this.hasSelection?this.props.pane.deleteSelected(t.isGmailItem,!a):t.isGmailItem(e)&&(this.onClickDeleteCalendar(),e.deleteSelf(r.a.ChangeType.Local))}onClickPrefix(e){m.a.applyPrefixToSelection(e,!this.hasSelection&&this.item)}onClickShowMDImageText(e){this.props.pane.search.clearStickyMatches();var t=this.item.getRawText(),a=e.substr(1);t=t.replace(e,a),this.item.setText(t,r.a.ChangeType.Local)}onClickShowDriveImageText(e){this.props.pane.search.clearStickyMatches();var t=this.item,a=t.getAttachmentByPlugin(r.a.PluginID.Drive);a.getPlugin().setShowInline(t,a,e),u.a.itemTextChanged(this.item)}onClickMakeLinkImage(e){var t=0;this.props.pane.search.clearStickyMatches();var a,n,i=this.item.getRawText();for(r.a.Regexp.MDLink.lastIndex=0;null!==(a=r.a.Regexp.MDLink.exec(i));){if(t++>5e3&&__infLoop&&__infLoop(t))throw new RangeError;a[3]===e&&(e=a[0],n="!["+a[2]+"]("+a[3]+(a[4]?a[4]:"")+")")}n||(n=e.startsWith("[")?"!"+e:"!["+e+"]("+e+")"),i=i.replace(e,n),this.item.setText(i,r.a.ChangeType.Local)}onViewInDrive(){var e=this.item,t=e.getAttachmentByPlugin(r.a.PluginID.Drive);t.getPlugin().openAttach(t,e,this.props.pane)}renderMenuItemMDImage(e){var t=e.getAttribute("data-original-text");return o.a.createElement(o.a.Fragment,null,o.a.createElement(f.a,{onClick:this.onClickShowMDImageText.bind(this,t)},"Show as text"),o.a.createElement("hr",null))}renderMenuLinkImage(e){var t=e.getAttribute("data-original-text")||e.getAttribute("data-href")||e.textContent;return o.a.createElement(o.a.Fragment,null,o.a.createElement(f.a,{onClick:this.onClickMakeLinkImage.bind(this,t)},"Show as image"),o.a.createElement("hr",null))}renderMenuDate(){return o.a.createElement("span",null,o.a.createElement(f.a,{icon:"icon-calendar",hotkey:{name:"AddToCalendar"},onClick:this.onClickAddCalendar},"Add to Google Calendar"))}renderMenuNote(){return o.a.createElement("span",null,o.a.createElement(f.a,{icon:"icon-edit",hotkey:{name:"EditNote"},onClick:this.onClickNote},"Edit"),o.a.createElement(f.a,{icon:"icon-delete",onClick:this.onClickDelete},"Delete"))}renderMenuDefault(){var e,t=this.props.pane,a=this.item,i=(this.mod,this.priMod),l=t.isViewCalendar(),c=!l,d=t.supportIndent&&!a.isNote()&&0!==a.getIndex()&&!t.search.isFlatSearchResult(a),m=t.supportIndent&&!a.isNote()&&a.parent()!==n.default.focusedItem&&!(t.search.isFlatSearchResult(a)||t.search.isFlatSearchResult(a.parent())),u=s.default.pluginManager.getPluginGCalendar();if(u&&a.getDate())if(a.hasAttachmentType(r.a.PluginType.Calendar)){var p=a.getAttachmentByType(r.a.PluginType.Calendar);e=o.a.createElement(f.a,{icon:"icon-delete",disabled:!u.hasWritePermissionForAttach(p),onClick:this.onClickDeleteCalendar},"Remove from Google Calendar")}else e=o.a.createElement(f.a,{icon:"icon-calendar",hotkey:c&&{name:"AddToCalendar"},onClick:this.onClickAddCalendar},"Add to Google Calendar");return o.a.createElement(o.a.Fragment,null,o.a.createElement(f.a,{icon:"icon-check",hotkey:c&&{name:"Complete"},onClick:this.onClickComplete},a.isComplete()?"Uncomplete":"Complete"),o.a.createElement(f.a,{icon:"icon-zoom-in",hotkey:c&&{name:"ZoomIn"},onClick:this.onClickZoom},"Zoom In"),o.a.createElement(f.a,{icon:"icon-star",hotkey:c&&{name:"Star"},onClick:this.onClickStar},a.isStarred()?"Unstar":"Star"),o.a.createElement(g.a,{hotkey:c&&i+" + #"},"Priority"),o.a.createElement("div",{className:"horizontalMenu"},o.a.createElement(h.a,{className:"c-border-heavy",id:"itemPriorityNone",width:24,height:24,tooltipHotkey:c&&{name:"PriorityNone"},onClick:this.onClickPriority.bind(this,r.a.VMLIFlag.None)}),o.a.createElement(h.a,{className:"c-border-heavy",id:"itemPriorityLow",width:24,height:24,tooltipHotkey:c&&{name:"Priority1"},onClick:this.onClickPriority.bind(this,r.a.VMLIFlag.P2)}),o.a.createElement(h.a,{className:"c-border-heavy",id:"itemPriorityMed",width:24,height:24,tooltipHotkey:c&&{name:"Priority2"},onClick:this.onClickPriority.bind(this,r.a.VMLIFlag.P1)}),o.a.createElement(h.a,{className:"c-border-heavy",id:"itemPriorityHigh",width:24,height:24,tooltipHotkey:c&&{name:"Priority3"},onClick:this.onClickPriority.bind(this,r.a.VMLIFlag.P0)})),o.a.createElement(g.a,null,"Item Type"),o.a.createElement("div",{className:"horizontalMenu"},o.a.createElement(h.a,{className:"c-border-heavy",iconSize:14,width:24,height:24,tooltip:"None",onClick:this.onClickPrefix.bind(this,null)}),o.a.createElement(h.a,{className:"c-border-heavy",icon:"icon-project",iconSize:18,width:24,height:24,tooltip:"Project",onClick:this.onClickPrefix.bind(this,r.a.Prefix.Header)}),o.a.createElement(h.a,{className:"c-border-heavy",icon:"icon-check",iconSize:15,width:24,height:24,tooltip:"Task",onClick:this.onClickPrefix.bind(this,r.a.Prefix.Task)}),o.a.createElement(h.a,{className:"c-border-heavy",icon:"icon-bullet",iconSize:22,width:24,height:24,tooltip:"Bullet",onClick:this.onClickPrefix.bind(this,r.a.Prefix.Bullet)}),o.a.createElement(h.a,{className:"c-border-heavy",icon:"icon-numlist",iconSize:13,width:24,height:24,tooltip:"Numbered List",onClick:this.onClickPrefix.bind(this,r.a.Prefix.NumList)})),e&&o.a.createElement("hr",null),e,o.a.createElement("hr",null),d&&o.a.createElement(f.a,{icon:"icon-format_indent_increase",hotkey:{name:"Indent"},onClick:this.onClickIndent.bind(this,!1)},"Indent"),m&&o.a.createElement(f.a,{icon:"icon-format_indent_decrease",hotkey:{name:"Unindent"},onClick:this.onClickIndent.bind(this,!0)},"Unindent"),!l&&o.a.createElement(f.a,{icon:"icon-align-left",hotkey:{name:"MoveAutocomplete"},onClick:this.onClickMove},"Move"),o.a.createElement("hr",null),!l&&o.a.createElement(f.a,{icon:"icon-sticky-note-o",hotkey:{name:"EditNote"},onClick:this.onClickNote},"Add Note"),o.a.createElement(f.a,{icon:"icon-zoom-in-plus",onClick:this.onClickZoomNewPane},"Open in New Pane"),o.a.createElement(f.a,{icon:"icon-keyboard-tab",hotkey:{name:"Goto"},onClick:this.onClickGoto},"Go to in all panes"),o.a.createElement("hr",null),o.a.createElement(f.a,{icon:"icon-task",onClick:this.onClickArchive},"Archive Item"),o.a.createElement(f.a,{icon:"icon-delete",hotkey:{name:"DeleteItem"},onClick:this.onClickDelete},"Delete"))}renderMenuArchived(){return o.a.createElement(o.a.Fragment,null,o.a.createElement(f.a,{icon:"icon-task",onClick:this.onClickUnarchive},"Unarchive"),o.a.createElement(f.a,{icon:"icon-delete",onClick:this.onClickDelete},"Delete"))}renderMenuDeleted(){return o.a.createElement(o.a.Fragment,null,o.a.createElement(f.a,{icon:"icon-task",onClick:this.onClickUndelete},"Undelete"))}renderMenuDrive(){var e=this.props.pane,t=this.item,a=t.isCollapsed(e,!1),n=e.supportCollapsing&&(t.isHeader()||t.hasChildren()),i=t.isHeader()||t.hasChildren(),s=t.getAttachmentByPlugin(r.a.PluginID.Drive),l=s.getPlugin().isImage(s),c=s.getField("showInline");return o.a.createElement(o.a.Fragment,null,!e.plugin&&l&&o.a.createElement(f.a,{onClick:this.onClickShowDriveImageText.bind(this,!c)},"Show as "+(c?"text":"image")),e.plugin&&o.a.createElement(f.a,{disabled:!n,icon:a?"icon-add":"icon-minus",hotkey:{name:"Collapse"},onClick:this.onClickCollapse},a?"Expand":"Collapse"),e.plugin&&o.a.createElement(f.a,{disabled:!i,icon:"icon-zoom-in",hotkey:{name:"ZoomIn"},onClick:this.onClickZoom},"Zoom In"),o.a.createElement(f.a,{onClick:this.onViewInDrive},"View in Drive"),!e.plugin&&o.a.createElement("hr",null))}renderMenuGCalendar(e){return e.getPlugin().hasWritePermissionForAttach(e)?o.a.createElement(o.a.Fragment,null,o.a.createElement(f.a,{icon:"icon-check",onClick:this.onClickComplete},e.getField("isComplete")?"Uncomplete":"Complete"),o.a.createElement(f.a,{icon:"icon-task",onClick:this.onClickArchive},e.getField("isArchived")?"Unarchive":"Archive"),o.a.createElement("hr",null),o.a.createElement(f.a,{className:"mat-subheader"},"Priority"),o.a.createElement("div",{id:"contextMenuPriority",className:"horizontalMenu"},o.a.createElement(h.a,{className:"c-border-heavy",id:"itemPriorityNone",onClick:this.onClickPriority.bind(this,r.a.VMLIFlag.None)}),o.a.createElement(h.a,{className:"c-border-heavy",id:"itemPriorityLow",onClick:this.onClickPriority.bind(this,r.a.VMLIFlag.P2)}),o.a.createElement(h.a,{className:"c-border-heavy",id:"itemPriorityMed",onClick:this.onClickPriority.bind(this,r.a.VMLIFlag.P1)}),o.a.createElement(h.a,{className:"c-border-heavy",id:"itemPriorityHigh",onClick:this.onClickPriority.bind(this,r.a.VMLIFlag.P0)})),o.a.createElement("hr",null),o.a.createElement(f.a,{icon:"icon-delete",onClick:this.onClickDeleteCalendar},"Remove from Google Calendar")):o.a.createElement(o.a.Fragment,null,o.a.createElement(f.a,{icon:"icon-warning"},"Read-Only Event"))}renderMenuGmail(e){var t=this.item,a=this.mod,n="PaneGmail"===this.props.pane.type,i=e.getPlugin(),s=i.isItemUnread(t),l=i.isItemStarred(t),c=i.isItemArchived(t),d=i.isItemFullTrashed(t),m=E.a.isAuthorizedForScopes(e.getField("accountID"),[r.a.GScope.GmailModify]),u=o.a.createElement(o.a.Fragment,null,o.a.createElement(f.a,{icon:"icon-reply",hotkey:n&&{name:"Reply",group:"Email"},onClick:this.onClickReply},"Reply"),o.a.createElement(f.a,{icon:"icon-reply-all",hotkey:n&&{name:"ReplyAll",group:"Email"},onClick:this.onClickReplyAll},"Reply All"),o.a.createElement(f.a,{icon:"icon-forward",hotkey:n&&{name:"Forward",group:"Email"},onClick:this.onClickForward},"Forward"),o.a.createElement("hr",null));return o.a.createElement(o.a.Fragment,null,u,n&&o.a.createElement(o.a.Fragment,null,o.a.createElement(f.a,{icon:s?"icon-drafts":"icon-unread",iconSize:14,hotkey:s?"":{name:"MarkUnread",group:"Email"},onClick:this.onClickRead},s?"Mark as read":"Mark as unread"),o.a.createElement(f.a,{icon:"icon-star",hotkey:{name:"Star",group:n?"Email":"Pane"},onClick:this.onClickStarGmail},l?"Unstar":"Star"),o.a.createElement("hr",null),o.a.createElement(f.a,{className:"mat-subheader",hotkey:a+" + #"},"Priority"),o.a.createElement("div",{id:"contextMenuPriority",className:"horizontalMenu"},o.a.createElement(h.a,{className:"c-border-heavy",id:"itemPriorityNone",onClick:this.onClickPriority.bind(this,r.a.VMLIFlag.None)}),o.a.createElement(h.a,{className:"c-border-heavy",id:"itemPriorityLow",onClick:this.onClickPriority.bind(this,r.a.VMLIFlag.P2)}),o.a.createElement(h.a,{className:"c-border-heavy",id:"itemPriorityMed",onClick:this.onClickPriority.bind(this,r.a.VMLIFlag.P1)}),o.a.createElement(h.a,{className:"c-border-heavy",id:"itemPriorityHigh",onClick:this.onClickPriority.bind(this,r.a.VMLIFlag.P0)})),o.a.createElement("hr",null),o.a.createElement(f.a,{disabled:!m,icon:"icon-access_time",hotkey:{name:"Snooze",group:"Email"},onClick:this.onClickSnooze},"Snooze"),o.a.createElement(f.a,{icon:"icon-tag",hotkey:{name:"Label",group:"Email"},onClick:this.onClickLabel},"Label"),o.a.createElement(f.a,{icon:"icon-check",hotkey:{name:"Task",group:"Email"},onClick:this.onClickCreateTask},"Create Task"),o.a.createElement(f.a,{icon:"icon-align-left",hotkey:{name:"Move",group:"Email"},onClick:this.onClickMove},"Add to Outline"),o.a.createElement(f.a,{icon:"icon-calendar",hotkey:{name:"Schedule",group:"Email"},onClick:this.onClickSchedule},"Add To Calendar"),o.a.createElement("hr",null),o.a.createElement(f.a,{disabled:d,icon:"icon-task",hotkey:{name:"Archive",group:"Email"},onClick:this.onClickArchiveGmail},c?"Unarchive":"Archive"),o.a.createElement(f.a,{icon:"icon-delete",hotkey:{name:"Delete",group:"Email"},onClick:this.onClickDeleteGmail},d?"Undelete":"Delete")))}render(){var e,t,a=this.props,i=a.pane,l=this.item,c=a.element,d=n.default.getPluginForElement(c);if(d){var m=d.getAttribute("plugin");if(l.hasPluginAttachment(m))switch(m){case r.a.PluginID.Drive:t=this.renderMenuDrive();break;case r.a.PluginID.GCalendar:t=this.renderMenuGCalendar(l.getAttachmentByPlugin(m));break;case r.a.PluginID.Gmail:t=this.renderMenuGmail(l.getAttachmentByPlugin(m))}i.plugin||(e=t,t=void 0)}else n.default.hasClass(c,"linkImage")?e=this.renderMenuLinkImage(c):n.default.hasClass(c,"mdImage")?e=this.renderMenuItemMDImage(c):n.default.hasClass(c,"driveImage")?e=this.renderMenuDrive():n.default.hasClass(c,"date")?s.default.pluginManager.getPluginGCalendar()&&(t=l.hasAttachmentType(r.a.PluginType.Calendar)?this.renderMenuGCalendar(l.getAttachmentByPlugin(r.a.PluginID.GCalendar)):this.renderMenuDate()):l.isNote()&&(t=this.renderMenuNote());if(!t){var u=i.getContextMenuMode();switch(u){case"Normal":t=this.renderMenuDefault();break;case"Archived":t=this.renderMenuArchived();break;case"Deleted":t=this.renderMenuDeleted();break;case"Gmail":t=this.renderMenuGmail(l.getAttachmentByPlugin(r.a.PluginID.Gmail));break;default:try{n.default.PAssert(713,!1,"Unknown context menu mdoe: "+u)}catch(h){n.default.reportError(h)}}}return o.a.createElement(p.a,{id:"contextMenuItem",element:a.element,supportArrows:!0,pos:a.pos,noBackdrop:a.noBackdrop},e,t)}}},794:function(e,t,a){"use strict";a.r(t);var n=a(57),i=a.n(n),r=a(0),s=a(1),l=a(5),o=a(3),c=a(13),d=a(2),m=a.n(d),u=a(15),h=a(110),p=a(50),g=a(34),f=a(14),E=a(53),C=a(31);t.default=class extends u.a{init(){this.createObservables({syncTimes:{},isBackingUp:!1,updateMessage:void 0});var e=o.default.pluginManager.getPlugin(s.a.PluginID.Gmail);e.isEnabled()&&this.syncTimes.set(e.getAllLastSyncTimes()),this.listenTo(C.a.onAccountsUpdated)}getState(){var e=c.a.onlineStatus.get(),t={onlineStatus:c.a.onlineStatus,lastSync:o.default.settings.lastSync,lastSyncText:this.getLastSyncText(),lastBackupText:this.getLastBackupText(),isOnline:"Offline"!==e,isConnected:"Online"===e,supportsOffline:!!window.applicationCache,nearQuota:l.a.isNearStorageQuota,hasUnsavedData:!1,cacheRatioWarning:parseFloat(o.default.pluginManager.getCacheSizeRatio())<.6,backupFrequency:o.default.settings.backupFrequency,isBackupEnabled:o.default.settings.isBackupEnabled(),hasUpdate:o.default.AppCache.hasUpdate};return t.hasWarning=t.nearQuota||t.hasUnsavedData||t.cacheRatioWarning||!t.supportsOffline,t}getLastSyncText(){var e=o.default.settings.lastSync.get();return e>0?new Date(e).toString(o.default.International.getFormat(s.a.DFormat.LongDayTime)):"Not synced"}getLastBackupText(){var e,t=h.a.getLastBackup();if(this.isBackingUp.get())e="Backing up...";else if(t>0){var a=new Date(t);e=E.a.toHumanText(a)}else e="Not backed up";return e}_handleQuotaOverClick(){o.default.toasts.pushMessage({text:"Your computer's offline storage quota has been exceeded. Please try freeing space on your device. Offline access will not work.",action:s.a.MessageAction.Okay})}_handleQuotaNearClick(){o.default.toasts.pushMessage({text:"Your computer's offline storage quota is almost exceeded. Please try freeing space on your device, running out will cause offline access to not work.",action:s.a.MessageAction.Okay})}_handleUnsavedClick(){o.default.toasts.pushMessage({text:"Your local changes have been unable to be persisted to disk and have not been saved remotely. You must reconnect to the internet to save them. Free up disk space to prevent this happening.",action:s.a.MessageAction.Okay})}_handleRatioClick(){o.default.toasts.pushMessage({text:"Due to low disk space your cache size was restricted. View your General Settings to reset your cache size.",action:s.a.MessageAction.OpenGeneralSettings})}_handleBlockClick(){}_handleCookiesClick(){}onClickBackup(){this.isBackingUp.set(!0),h.a.backupAll().then(()=>this.isBackingUp.set(!1))}onClickEnableBackups(){h.a.enable()}onClickCheckUpdates(e,t){this.state.hasUpdate?r.default.reload():o.default.AppCache.update(e=>{this.updateMessage.set(e?"Installing...":"Up to date")})}_handleIconWarningClick(e){C.a.authAccount(e,o.default.pluginManager.getPlugin(s.a.PluginID.Gmail).googleScopes(),r.default.emptyFn)}componentDidUpdate(){this.refs.menu.updateState()}_renderAccounts(){var e,t,a,n,i=this.state,r=[];for(var l in i.syncTimes)if(i.syncTimes.hasOwnProperty(l)){var c=i.syncTimes[l];if(e=void 0,t=void 0,a=void 0,n=c?l+": "+c.toString(o.default.International.getFormat(s.a.DFormat.ShortDayTime)):l+": Not synced",C.a.isLoaded){var d=C.a.getError(l);d?(e="icon-warning",t=d,a=this._handleIconWarningClick.bind(this,l)):o.default.pluginManager.getPlugin(s.a.PluginID.Gmail).verifyAuthorization(l)||(e="icon-warning",t="Missing authorization",a=this._handleIconWarningClick.bind(this,l))}r.push(m.a.createElement(g.a,{key:l,icon:e,iconTooltip:t,onClickIcon:a},n))}return r.length>0&&m.a.createElement(m.a.Fragment,null,m.a.createElement("hr",null),m.a.createElement(g.a,{className:"onlineStatusHeader"},"Email accounts"),r)}render(){var e=this.state,t=+s.a.jsVersion,a="".concat(t,": ").concat(new Date(t).toString("MMMM d, h:mm tt")),n=this._renderAccounts();return m.a.createElement(p.a,i()({},this.props,{ref:"menu",key:"contextMenuOnlineStatus",id:"contextMenuOnlineStatus",element:this.props.element}),m.a.createElement(g.a,{className:"onlineStatusHeader"},"Last Sync"),m.a.createElement(g.a,null,e.lastSyncText),m.a.createElement("hr",null),m.a.createElement(g.a,{className:"onlineStatusHeader",height:36},"Last Backup",m.a.createElement(f.a,{primary:!0,onClick:this.onClickBackup},"Backup now")),m.a.createElement(g.a,null,e.lastBackupText),e.hasWarning&&m.a.createElement("div",null,m.a.createElement("hr",null),m.a.createElement(g.a,{className:"onlineStatusHeader"},"Warnings"),!e.supportsOffline&&m.a.createElement(g.a,{clickCloses:!1,tooltip:"Learn More"},"Your browser does not support offline access"),e.nearQuota&&m.a.createElement(g.a,{clickCloses:!1,tooltip:"Learn More",onClick:this._handleQuotaNearClick},"Nearly out of disk space"),e.hasUnsavedData&&m.a.createElement(g.a,{clickCloses:!1,tooltip:"Learn More",onClick:this._handleUnsavedClick},"Unsaved changes will be lost"),e.cacheRatioWarning&&m.a.createElement(g.a,{clickCloses:!1,tooltip:"Learn More",onClick:this._handleRatioClick},"Your data is not efficiently being cached")),n,m.a.createElement("hr",null),m.a.createElement(g.a,{className:"onlineStatusHeader",height:36},"App version",e.updateMessage&&!e.hasUpdate?m.a.createElement("div",{style:{paddingLeft:48}},e.updateMessage):m.a.createElement(f.a,{primary:!0,onClick:this.onClickCheckUpdates},e.hasUpdate?"Update":"Check for updates")),l.a.isBeta&&m.a.createElement(g.a,null,"Beta"),m.a.createElement(g.a,null,a))}}},795:function(e,t,a){"use strict";a.r(t);var n=a(57),i=a.n(n),r=a(71),s=a.n(r),l=a(3),o=a(2),c=a(15),d=a(464),m=a(50);t.default=class extends c.a{onMount(){this.props.pane.onDestroyed.listen(this.close)}onUnmount(){this.props.pane.onDestroyed.unlisten(this.close)}close(){l.default.menus.closeContextMenu(this.props.componentName)}render(){var e=this.props,{pane:t,subset:a,onSelected:n}=e,r=s()(e,["pane","subset","onSelected"]);return o.createElement(m.a,i()({},r,{id:"contextMenuPanes",ref:"menu",key:"contextMenuAdd",supportArrows:!0}),o.createElement(d.a,{pane:t,subset:a}))}}},796:function(e,t,a){"use strict";a.r(t);var n=a(57),i=a.n(n),r=a(3),s=a(2),l=a.n(s),o=a(15),c=a(52),d=a(50),m=a(14);t.default=class extends o.a{onClickEnable(){c.a.refresh(),c.a.enableOfflineFeatures(!1,this.onEnable)}onEnable(e){e&&r.default.menus.closeContextMenu()}render(){return l.a.createElement(d.a,i()({},this.props,{key:"contextMenuAuthorize",id:"contextMenuAuthorize"}),l.a.createElement("div",null,this.props.message),l.a.createElement("div",{className:"center"},l.a.createElement(m.a,{primary:!0,raised:!0,onClick:this.onClickEnable},"AUTHORIZE")))}}},797:function(e,t,a){"use strict";a.r(t);var n=a(57),i=a.n(n),r=a(0),s=a(1),l=a(3),o=a(2),c=a.n(o),d=a(15),m=a(17),u=a(50),h=a(34);t.default=class extends d.a{onMount(){m.a.fireEvent("helpOpened",[])}onClickVideo(){var e="https://www.youtube.com/watch?v="+s.a.IntroVideoID;r.default.openUrl(e)}onClickGetStarted(){var e=r.default.createPath("help/basics");r.default.openUrl(e)}onClickGTDEmail(){var e=r.default.createPath("help/email");r.default.openUrl(e)}onClickAdvancedHelp(){l.default.intro.toggle(s.a.HelpMode.Normal)}onClickHotkeys(){l.default.intro.toggle(s.a.HelpMode.Hotkeys)}render(){return c.a.createElement(u.a,i()({},this.props,{key:"contextMenuHelp",id:"contextMenuHelp"}),c.a.createElement(h.a,{className:"helpVideoLink",onClick:this.onClickVideo},c.a.createElement("i",{className:"icon-youtube-play"}),c.a.createElement("div",null,"Introduction Video")),c.a.createElement("hr",null),c.a.createElement(h.a,{onClick:this.onClickGetStarted},"How to get started"),c.a.createElement(h.a,{onClick:this.onClickGTDEmail},"How to GTD your email"),c.a.createElement("hr",null),c.a.createElement(h.a,{onClick:this.onClickAdvancedHelp},"Advanced Help"),c.a.createElement(h.a,{onClick:this.onClickHotkeys},"Hotkeys"))}}},798:function(e,t,a){"use strict";a.r(t);var n=a(57),i=a.n(n),r=a(2),s=a.n(r),l=a(15),o=a(761),c=a(50);t.default=class extends l.a{render(){return s.a.createElement(c.a,i()({},this.props,{key:"contextMenuHeart",id:"contextMenuHeart",element:this.props.element}),s.a.createElement(o.a,{shouldShowInvitedBy:!1}))}}},799:function(e,t,a){"use strict";a.r(t);var n=a(57),i=a.n(n),r=a(0),s=a(1),l=a(3),o=a(20),c=a(5),d=a(104),m=a(2),u=a.n(m),h=a(15),p=a(6),g=a(50),f=a(34),E=a(31);t.default=class extends h.a{init(){E.a.ensureGapi()}onClickSettings(){l.default.menus.openSettings()}onClickDisplaySettings(){l.default.menus.openDisplaySettings()}onClickImport(){p.d.miscAction({type:p.b.Misc,misc:p.a.OpenImport}),l.default.menus.openModal(s.a.Modals.ImportData)}onClickExport(){p.d.miscAction({type:p.b.Misc,misc:p.a.OpenExport}),l.default.menus.openModal(s.a.Modals.ExportData)}onClickRevision(){l.default.menus.openModal(s.a.Modals.Backups)}onClickFeedback(){l.default.menus.openModal(s.a.Modals.ReportBug)}onClickBlog(){r.default.openUrl("https://www.moo.do/blog/")}onClickLogout(){l.default.setup.logoutClicked()}onClickShare(){l.default.menus.openContextMenu({componentName:"ReactContextMenuShare",element:this.props.element})}onClickDownloadApp(){r.default.openUrl(c.a.getAppDownloadURL())}onClickTrial(){l.default.menus.openSettings(s.a.SettingsSections.Account)}onClickHelp(){l.default.menus.openContextMenu({componentName:"ReactContextMenuHelp",element:this.props.element})}onClickImportMoodo(e,t){(new d.a).authAndImportDocuments()}render(){var e=l.default.billingManager,t=o.a.getAccountName(),a=e.isTrialState()&&!l.default.settings.trialOverHidden.get(),n=e.isTrialOver(),r=e.daysLeftInTrial.get();return s.a.jsVersion,u.a.createElement(g.a,i()({},this.props,{key:"contextMenuOptions",id:"contextMenuOptions",supportArrows:!0}),u.a.createElement(f.a,{onClick:this.onClickSettings},"Settings"),u.a.createElement(f.a,{onClick:this.onClickDisplaySettings},"Display Settings"),u.a.createElement("hr",null),u.a.createElement(f.a,{onClick:this.onClickHelp},"Help"),u.a.createElement("hr",null),u.a.createElement(f.a,{onClick:this.onClickImport},"Import Data"),u.a.createElement(f.a,{onClick:this.onClickExport},"Export Data"),u.a.createElement(f.a,{onClick:this.onClickRevision},"Revision History"),u.a.createElement(f.a,{onClick:this.onClickImportMoodo},"Import old Moo.do"),u.a.createElement("hr",null),u.a.createElement(f.a,{onClick:this.onClickFeedback},"Contact Support"),u.a.createElement(f.a,{onClick:this.onClickBlog},"Moo.do Blog"),c.a.canDownloadNativeApp()&&u.a.createElement(f.a,{onClick:this.onClickDownloadApp},"Get "+c.a.getPlatformName()+" app"),u.a.createElement("hr",null),a&&u.a.createElement(f.a,{className:n?"error":"",onClick:this.onClickTrial},n?"Trial over":"Trial: "+r+" days"),u.a.createElement(f.a,{onClick:this.onClickLogout},"Logout"),u.a.createElement(f.a,{className:"username",faded:!0},t),u.a.createElement(f.a,{className:"useremail",faded:!0},l.default.settings.getUserIdentifier()))}}},800:function(e,t,a){"use strict";a.r(t);var n=a(57),i=a.n(n),r=a(0),s=a(1),l=a(3),o=a(2),c=a.n(o),d=a(15),m=a(46),u=a(4),h=a(14),p=a(50),g=a(34),f=a(64),E=s.a.TaskViewMode,C={[s.a.PaneMode.Gmail]:"E",[s.a.PaneMode.Drive]:"F",0:"L",1:"G",2:"A",3:"C"},v={};v=[{Outline:"O",List_Flat:"F",Archived:"A",Deleted:"D"},{Groups_Project:"P",Groups_Tag:"T",Groups_Contact:"C",Groups_Priority:"R"},{Agenda_Today:"T",Agenda_Week:"W",Agenda_All:"A"},{Calendar_Day:"D",Calendar_Custom:"C",Calendar_Week:"W",Calendar_Month:"M"}];t.default=class extends d.a{init(){this.numAtIndex=[],this.availablePanes=m.a.getAvailablePanes(!!this.props.subset),this.isArrowing=!0,this.createObservables({selectedGroupIndex:0}),this.refMenu=c.a.createRef()}getState(){return{activePaneTypes:m.a.activePaneTypes,numInactivePanes:m.a.numInactivePanes,selectedGroup:this.selectedGroup?this.selectedGroup.get():-1}}onMount(){this.selectedGroup=this.refMenu.current.selectedIndex,u.a.reset()}onKeyPress(e,t){var a,n,i=this.selectedGroup.get(),r=i>=0&&i<=3?v[i]:C;for(var l in r)if(r.hasOwnProperty(l)&&s.a.KeyCode[r[l]]===e){a=l;break}if(this.isArrowing=!0,a&&(isNaN(+a)?E[a]&&(n=E[a],a=s.a.PaneMode.Task):a=+a,!isNaN(a)||n||this.isPaneTypeOk()))return t.preventDefault(),t.stopPropagation(),this.onSelected(a,n),isNaN(a);var o=this.selectedGroupIndex.get();e===s.a.KeyCode.LeftArrow&&o>0?(o--,this.selectedGroupIndex.set(o)):e===s.a.KeyCode.RightArrow&&o<this.numAtIndex[this.selectedGroup.get()]-1&&(o++,this.selectedGroupIndex.set(o))}onEnterKey(){var e=this.state,t=this.availablePanes[e.selectedGroup],a=t.viewModes?t.viewModes[e.selectedGroupIndex]:t;this.onSelected(a.type,a.viewMode)}isPaneTypeOk(){return!this.props.subset}onClickEnableMorePanes(){l.default.menus.openSettings(s.a.SettingsSections.Plugins)}onSelected(e,t){isNaN(e)?(this.props.onSelected(e,t),l.default.menus.isContextMenuOpen("ReactContextMenuAddPane")&&l.default.menus.closeContextMenu("ReactContextMenuAddPane")):(this.selectedGroup.set(e),this.selectedGroupIndex.set(0))}onSelectedIndexChanged(e){if(this._isMounted){this.isMouseOnButton||(this.isArrowing=!0);var t=this.numAtIndex[e]-1;this.selectedGroupIndex.get()>t?this.selectedGroupIndex.set(t):this.updateState()}}onMouseEnterButton(e,t,a){this.isMouseOnButton=!0,this.isArrowing=!1,this.selectedGroup.set(-1),this.selectedGroupIndex.set(t),this.isMouseOnButton=!1}renderPaneType(e,t){var a=this.state,n=this.selectedGroup?a.selectedGroup:-1,i=isNaN(n)||n<0||n>3;if(e.enableMore)return c.a.createElement(g.a,{key:"enableMore",className:"hasBorder c-border",onClick:this.onClickEnableMorePanes},"Enable more panes");if(e.viewModes){var s=0,l=r.default.classNames("hasHorButtons",{"hasBorder c-border":e.border},{selectedHotkey:t===n}),o=[],d=e.viewModes.length,m=r.default.classNames({"c-popup-item selected":t===n});this.numAtIndex[t]=d;for(var u=0;u<d;u++){if(s++>5e3&&__infLoop&&__infLoop(s))throw new RangeError;var p=e.viewModes[u],E=r.default.classNames("c-popup-item",{selected:t===n&&u===a.selectedGroupIndex});o.push(c.a.createElement(h.a,{key:p.text,className:E,padding:0,iconSize:15,color:"c-foreground",onMouseEnter:this.onMouseEnterButton.bind(this,t,u,d),onMouseUp:this.onSelected.bind(this,p.type,p.viewMode,void 0)},this.isArrowing&&t===n?c.a.createElement("div",{className:"viewHotkey bold"},v[t][p.viewMode]):c.a.createElement("div",{className:"viewIcon c-foreground-faded "+p.icon}),p.text))}return c.a.createElement(g.a,{className:l,key:e.text,customLayout:!0,onMouseEnter:this.onMouseEnterButton.bind(this,t,void 0,d),clickCloses:!1,hoverEffects:!1},c.a.createElement(f.a,{hotkeyCentered:!0,className:m,hotkey:i&&C[t]},e.text),c.a.createElement("div",{className:"horButtons  flexbox"},o))}var y=e.viewMode,k=r.default.classNames({"hasBorder c-border":e.border});return c.a.createElement(g.a,{key:e.text,className:k,icon:e.icon,height:32,hotkey:i&&(C[y]||C[e.type]),hotkeyCentered:!0,onClick:this.onSelected.bind(this,e.type,e.viewMode,null),clickCloses:!1,onMouseEnter:this.onMouseEnterButton.bind(this,void 0,void 0),id:"addPane_"+(y||e.type)},e.text)}render(){var e=this.props;return c.a.createElement(p.a,i()({},e,{id:"contextMenuPanes",ref:this.refMenu,key:"contextMenuAdd",className:"addPaneTypes",supportArrows:!0,onKeyPress:this.onKeyPress,onEnterKey:this.onEnterKey,onSelectedIndexChanged:this.onSelectedIndexChanged}),this.availablePanes.map(this.renderPaneType))}}},801:function(e,t,a){"use strict";a.r(t);var n=a(57),i=a.n(n),r=a(1),s=a(3),l=a(2),o=a.n(l),c=a(15),d=a(50),m=a(14);t.default=class extends c.a{onClickUpsell(){var e=!s.default.billingManager.isTrialOver();s.default.menus.closeContextMenu(),e?s.default.billingManager.startTrial():s.default.menus.openSettings(r.a.SettingsSections.Account)}render(){var e=this.props,t=!s.default.billingManager.isTrialOver();return o.a.createElement(d.a,i()({},e,{id:"contextMenuBoardsUpsell"}),o.a.createElement("div",null,o.a.createElement("div",null,e.premiumMessage),o.a.createElement("br",null),t&&o.a.createElement("div",null,"Start your "+r.a.TrialDuration+" day free trial to enable "+e.enableMessage+"."),!t&&o.a.createElement("div",null,"Go Premium to enable "+e.enableMessage+".")),o.a.createElement("br",null),o.a.createElement("div",{className:"center"},o.a.createElement(m.a,{primary:!0,raised:!0,onClick:this.onClickUpsell},t?"Start Trial":"Go Premium")))}}},802:function(e,t,a){"use strict";a.r(t);var n=a(0),i=a(1),r=a(3),s=a(2),l=a.n(s),o=a(15),c=a(6),d=a(50),m=a(51),u=a(4);t.default=class extends o.a{init(){var e=r.default.pluginManager.getPlugin(i.a.PluginID.Drive);this.createObservables({isHovered:!1,isDriveEnabled:e.isEnabled()}),this.refMenu=l.a.createRef(),this.refPicker=l.a.createRef(),this.refInputUrl=l.a.createRef()}doUpload(e){for(var t=0,a=r.default.pluginManager.getPluginDrive(),n=0;n<e.length;n++){if(t++>5e3&&__infLoop&&__infLoop(t))throw new RangeError;a.handleDropFile(e[n],this.props.pane,void 0,this.onUploadComplete.bind(this,0===n))}this.refMenu.current.close()}onUploadComplete(e,t){c.d.beginAction();var a=this.props,{item:n,itemParent:r,pane:s}=a,l=isNaN(a.insertIndex)?a.paneObject.index+1:a.insertIndex;if(e&&n)n.setText(t,i.a.ChangeType.Local);else{var o=r||n.parent(),d=s.createVMLI({text:t},{parent:o,changeType:i.a.ChangeType.AllLocal});o.insertItem(d,l)}return c.d.endAction(),n}onChangeFile(e){return e.target.files&&e.target.files.length>0&&this.doUpload(e.target.files),!1}onDragEnter(){this.isHovered.set(!0)}onDragLeave(){this.isHovered.set(!1)}onDrop(e){var t=e.dataTransfer;t.files&&t.files.length>0&&this.doUpload(t.files)}onClickEnableDrive(){this.refMenu.current.close(),r.default.menus.openSettings(i.a.SettingsSections.Plugins)}onClick(){this.refPicker.current.click()}onClickAddUrl(){this.refMenu.current.close();let e=this.props,t=this.refInputUrl.current.getValue();if(e.pane.setIgnoreRestoreScroll(),this.props.item)u.a.selectIndex(this.props.paneObject.index,0,0),this.props.item.onInsertLink({url:t},r.default.settings.showImagesInline.get());else{c.d.beginAction();let a=e.itemParent,n=e.pane.createVMLI({text:r.default.settings.getDefaultItemText()},{parent:a,changeType:i.a.ChangeType.AllLocal});a.insertItem(n,e.insertIndex),u.a.selectIndex(e.insertIndex,n.getParsedText().length),n.onInsertLink({url:t},r.default.settings.showImagesInline.get()),c.d.endAction()}}render(){var e=this.props,t=this.state,a=this.state.isHovered,i=e.image,r=n.default.classNames("uploadDropZone",{"hovered c-bg-light":a}),s=i?"image":"file";return l.a.createElement(d.a,{key:"contextMenuDropZone",id:"contextMenuDropZone",name:"ReactContextMenuDropZone",element:e.element,pos:e.pos,ref:this.refMenu},i&&l.a.createElement(m.a,{focused:!0,placeholder:"Enter an image address",height:32,buttonText:"ADD",onButtonClick:this.onClickAddUrl,ref:this.refInputUrl}),i&&l.a.createElement("div",{className:"dropOr center c-foreground-faded"},"or"),t.isDriveEnabled&&l.a.createElement("div",{className:r,onClick:this.onClick,onDragEnter:this.onDragEnter,onDragLeave:this.onDragLeave,onDrop:this.onDrop},(a?"Drop file(s)":"Drag files here or click")+" to add "+s+".",l.a.createElement("input",{type:"file",ref:this.refPicker,className:"hidden",multiple:!0,onChange:this.onChangeFile})),!t.isDriveEnabled&&l.a.createElement("div",{className:r,onClick:this.onClickEnableDrive},"Enable the Google Drive plugin to upload files"))}}},803:function(e,t,a){"use strict";a.r(t);var n=a(57),i=a.n(n),r=a(0),s=a(1),l=a(3),o=a(2),c=a(15),d=a(755),m=(a(754),a(51)),u=a(50),h=a(53),p=a(14),g=a(757),f=a(48),E=a(70);const C=200,v=40,y=252,k=100,b=Object(d.c)(d.a);t.default=class extends c.a{init(){var e=0;let t=[];for(let a=0;a<24;a++){if(e++>5e3&&__infLoop&&__infLoop(e))throw new RangeError;let n=a%12===0?"12":a>12?a-12:a,i=a>=12?"pm":"am";t.push(n+":00 "+i),t.push(n+":30 "+i)}if(this.times=t,this.createObservables({selectedDate:{start:void 0,end:void 0},selectedTimes:[],text:void 0}),this.updateText(),this.textOffset=this.props.textOffset,void 0===this.textOffset){let e=this.props.item.getParsedText(),t=e.indexOf(s.a.CharDate);this.textOffset=t>=0?t:e.length}}onMount(){this.updateDateTime()}setMooDate(e){let{item:t}=this.props,a=this.textOffset,n=t.getParsedText();if(t.setMooDate(e,s.a.ChangeType.Local),e&&void 0!==a&&t.getRawText().indexOf(s.a.CharDate)<0){let e=a,i="";n[a-1]===s.a.PrefixDate?e--:" "!==n[e]&&(i=" ");let r=n.substr(a);r=r?" "+r:" ",n=(n.substr(0,e)+i+s.a.CharDate+r).replace(/  /g," "),t.setText(n,s.a.ChangeType.Local)}}getMooDate(){return this.props.item.getMooDate()}onInputChange(e){r.default.timeoutOnce("ctxMenuDateUpdateDate",this._onInputChangeTimeout.bind(this,e),200)}_onInputChangeTimeout(e){let t=h.a.parseText(e);this.setMooDate(t),this.updateDateTime(),this.text.set(e)}onClickClearDate(){this.onInputChange("")}onClickSave(){l.default.menus.closeContextMenu("ReactContextMenuDate")}updateDateTime(){let e=this.getMooDate();if(e){let n=e.getTime();if(n){var t=0;n=Math.round(n/36e4);let i=2*Math.floor(n/10)+(n%10>0?1:0),r=e.getDuration()/(30*s.a.MSPerMinute)||2,l=[];for(var a=i;a<i+r;a++){if(t++>5e3&&__infLoop&&__infLoop(t))throw new RangeError;l.push(a)}this.selectedTimes.set(l),this.refs.times.scrollTop=28*(i-3)}else this.selectedTimes.set([]);if(e.isRange()){let t=e.getStart(),a=e.getEnd();t||(t=new Date),a||(a=new Date(t).addMonths(3)),this.selectedDate.set({start:t,end:a})}else this.selectedDate.set(e.getAllDates())}else this.selectedDate.set(void 0)}onMouseDownTime(e){this._mouseDownOnTime=e,this.selectedTimes.set([e]);let t=this.getMooDate();t||(t=f.a.now(),this.setMooDate(t)),t.setHours(e/2),t.setDuration(30*s.a.MSPerMinute),this.updateText(),document.addEventListener("mouseup",this.onMouseUpTime)}onMouseMoveTime(e){if(void 0!==this._mouseDownOnTime){var t=0;let n,i,r=this.selectedTimes.get();e<=this._mouseDownOnTime?(n=e,i=this._mouseDownOnTime):(n=this._mouseDownOnTime,i=e),r=[];for(var a=n;a<=i;a++){if(t++>5e3&&__infLoop&&__infLoop(t))throw new RangeError;r.push(a)}this.duration=r.length>0?30*r.length*s.a.MSPerMinute:void 0,this.getMooDate().setDuration(this.duration),this.updateText(),this.selectedTimes.set(r)}}onMouseUpTime(){this.setMooDate(this.getMooDate()),this._mouseDownOnTime=void 0,document.removeEventListener("mouseup",this.onMouseUpTime)}onSelectDate(e){this.selectedDate.set(e),this.setMooDate(e.start&&e.end?f.a.fromRange(e.start,e.end,(this.state.selectedTimes[0]||0)/2,this.duration):void 0),this.updateText()}onChangeRepeatComplete(e){let t=this.getMooDate();if(t){let{item:a}=this.props;t.setRepeatOnComplete(e),a.onMooDateUpdated(s.a.ChangeType.Local)}}onInputEnter(){l.default.menus.closeContextMenu("ReactContextMenuDate")}updateText(){let e=this.getMooDate();this.text.set(e?e.toText():"")}onChangeCalendar(e){let t=this.props.item;l.default.pluginManager.getPluginGCalendar().setCalendarForItem(t,e)}renderCalendarSelector(){let e=this.props.item,t=l.default.pluginManager.getPluginGCalendar(),a=e.hasPluginAttachment(s.a.PluginID.GCalendar),{calendars:n,selected:i}=t.getWriteableCalendarsForItem(e);return n?o.createElement(g.a,{defaultValue:i,style:{height:26,marginTop:2},ref:"selectCalendar",onChange:this.onChangeCalendar},o.createElement("option",{value:""},(a?"Remove from":"Add to")+" calendar"),n.map(e=>o.createElement("option",{key:e.id,value:e.id},e.summary))):void 0}render(){let e=this.state,t=this.getMooDate(),a=t&&t.repeatComplete,n=this.times.map((t,a)=>{let n=e.selectedTimes.indexOf(a)>=0,i=r.default.classNames({"c-popup-item":!n},{selected:n});return o.createElement("div",{key:t,className:i,onMouseDown:this.onMouseDownTime.bind(this,a),onMouseMove:this.onMouseMoveTime.bind(this,a)},t)});return o.createElement(u.a,i()({},this.props,{id:"contextMenuDate",width:y+k,maxHeight:C+v*v}),o.createElement("div",{className:"flexbox"},o.createElement(m.a,{className:"f1",placeholder:"Type or select a date",onChange:this.onInputChange,onEnter:this.onInputEnter,value:e.text,focused:!0,border:!1,ref:"input"}),o.createElement(p.a,{height:40,onClick:this.onClickClearDate},"Clear")),o.createElement("div",{className:"flexbox",style:{padding:"0 8px"}},o.createElement(E.a,{className:"f1",initialChecked:a,onChange:this.onChangeRepeatComplete},"Repeat from completion"),this.renderCalendarSelector()),o.createElement("div",{className:"calendarContainer flexbox c-border-heavy",style:{width:y+k,height:C}},o.createElement(d.b,{Component:b,autoFocus:!1,width:y,height:C,rowHeight:36,selected:e.selectedDate,onSelect:this.onSelectDate,locale:{weekStartsOn:l.default.settings.dayWeekStart.get()},displayOptions:{showHeader:!1,showOverlay:!1}}),o.createElement("div",{className:"times c-border-heavy scrollable f1",ref:"times"},n)))}}},804:function(e,t,a){"use strict";a.r(t);var n=a(2),i=a(15),r=a(14),s=a(51),l=a(50);t.default=class extends i.a{init(){}onClickSavePassword(){this.refs.pass1.getValue(),this.refs.pass2.getValue()}render(){let e=this.props,t={marginTop:8,width:240};return n.createElement(l.a,{key:"contextMenuDocumentPassword",id:"contextMenuDocumentPassword",className:"padded",element:e.element},n.createElement("div",{className:"bold"},"Enter a password"),n.createElement("div",null,n.createElement(s.a,{type:"password",placeholder:"Password",ref:"pass1",style:t,onEnter:this.onClickSavePassword}),n.createElement(s.a,{type:"password",placeholder:"Confirm Password",ref:"pass2",style:t,onEnter:this.onClickSavePassword})),n.createElement("div",{style:{marginTop:8}},n.createElement(r.a,{raised:!0,primary:!0,onClick:this.onClickSavePassword},"Save")))}}},806:function(e,t,a){"use strict";a.r(t);var n=a(0),i=a(1),r=a(3),s=a(5),l=a(2),o=a.n(l),c=a(15),d=a(52),m=a(761),u=a(70),h=a(14),p=c.b.createClass({displayName:"ReactModalSettingsGeneral",componentDisplay:i.a.ComponentDisplay.Desktop,init:function(){this.createObservables({isStoragePersisted:!1,usage:NaN,quota:NaN}),s.a.isStoragePersisted(e=>{this.isStoragePersisted.set(e)}),s.a.estimateAvailableStorage(e=>{this.usage.set(e.usage),this.quota.set(e.quota)},function(){})},onCacheRatioClick:function(){this.getCacheRatio()<.98&&(r.default.settings.cacheSizeRatio.set(1),n.default.sendEvent("CacheRatio","Changed",1),r.default.toasts.pushMessage({text:"Success!",action:i.a.MessageAction.Okay}))},onSettingChanged:function(e,t){e===r.default.settings.showFormattingToolbar&&(t=t?1:-1),e.set(t)},parseFn:function(e){return parseFloat(e.toFixed(2))},getCacheRatio:function(){return this.parseFn(r.default.pluginManager.getCacheSizeRatio())},onPersistClick:function(e){!this.state.isStoragePersisted&&e&&s.a.requestStoragePersistence(function(){this.isStoragePersisted.set(!0)}.bind(this),function(){this.isStoragePersisted.set(!1)}.bind(this))},onChangeDefaultItemPrefix:function(){r.default.settings.defaultItemPrefix.set(this.refs.selectItemPrefix.value)},renderCheckbox:function(e,t){let a=e===r.default.settings.showFormattingToolbar?r.default.settings.showFormattingToolbar.get()>=0:e.get();return o.a.createElement(u.a,{checked:a,onChange:this.onSettingChanged.bind(this,e)},t)},render:function(){var e=this.getCacheRatio()<.98,t=!s.a.app&&s.a.supportsPersistedStorage(),a=s.a.supportsEstimatedStorage(),n=r.default.settings.defaultItemPrefix.get(),l=(r.default.settings.showFormattingToolbar.get(),+(this.usage.get()/1024/1024).toFixed(2)),c=+(this.quota.get()/1024/1024).toFixed(2);return o.a.createElement("div",{key:"content"},o.a.createElement("div",{className:"modal-row"},o.a.createElement("div",{className:"settingsName bold ib"},"Default item type:"),o.a.createElement("select",{defaultValue:n,ref:"selectItemPrefix",onChange:this.onChangeDefaultItemPrefix},o.a.createElement("option",{value:""},"None"),o.a.createElement("option",{value:i.a.Prefix.Task},"Task"),o.a.createElement("option",{value:i.a.Prefix.Bullet},"Bullet")),o.a.createElement("div",{className:"modal-subtext c-foreground-faded"},"The default prefix for all new items. If you prefer the bulleted look of an Outliner, choose Bullet. If you prefer a checklist, choose Task. If you prefer the flat look of a document, choose None.")),o.a.createElement("div",{className:"modal-row"},this.renderCheckbox(r.default.settings.showMarkdown,"Show Markdown formatting"),o.a.createElement("div",{className:"modal-subtext c-foreground-faded"},"Show the raw Markdown formatting characters in selected items")),o.a.createElement("div",{className:"modal-row"},this.renderCheckbox(r.default.settings.openEvernoteApp,"Open Evernote links in Evernote app"),o.a.createElement("div",{className:"modal-subtext c-foreground-faded"},"If not enabled, Evernote links will open the Evernote website")),o.a.createElement("div",{className:"modal-row"},this.renderCheckbox(r.default.settings.selectFullItems,"Select full items"),o.a.createElement("div",{className:"modal-subtext c-foreground-faded"},"Expand selection to cover the full items when selecting multiple items")),o.a.createElement("div",{className:"modal-row"},this.renderCheckbox(r.default.settings.showFormattingToolbar,"Enable Formatting Toolbar"),o.a.createElement("div",{className:"modal-subtext c-foreground-faded"},"Show a toolbar with formatting hotkeys when text is selected")),o.a.createElement("div",{className:"modal-row"},this.renderCheckbox(r.default.settings.showImagesInline,"Show Images Inline"),o.a.createElement("div",{className:"modal-subtext c-foreground-faded"},"Show images inline by default when inserting a link to an image, dragging a file from the Drive pane, or uploading an image from your computer. If disabled, it will show a link to the image.")),o.a.createElement("hr",null),t&&o.a.createElement("div",{className:"modal-row"},o.a.createElement(u.a,{checked:this.state.isStoragePersisted,onChange:this.onPersistClick,canChange:!this.state.isStoragePersisted},"Enable Persistent Storage"),o.a.createElement("div",{className:"modal-subtext c-foreground-faded"},"Allow Moo.do to store your data offline without potential for the browser to delete it. This can help Moo.do's performance if your disk is low on free-space.")),e&&o.a.createElement("div",{className:"modal-row"},o.a.createElement(h.a,{raised:!0,onClick:this.onCacheRatioClick},"Reset Cache Ratio"),o.a.createElement("div",{className:"modal-subtext c-foreground-faded"},"If you have run out of disk space in the past, we may not be efficiently caching your data. If you have resolved any disk space issues, click this button to efficiently cache your data again.")),a&&o.a.createElement("div",{className:"modal-row"},o.a.createElement("div",{className:"modal-row-title"},"Estimated disk usage"),o.a.createElement("div",{className:"modal-subtext"},o.a.createElement("b",null,"Usage: "),Math.round(l)," MB / ",o.a.createElement("b",null,"Quota: "),Math.round(c)," MB")))}});var g=class extends c.a{init(){this.pluginsEnabled={},this.pluginOptions={},d.a.refresh()}onMount(){this.checkTiers()}getState(){for(var e=0,t={isSaveEnabled:d.a.isSaveEnabled,premiumStatus:r.default.billingManager._premiumStatus},a=d.a.pluginsAvailable,n=0;n<a.length;++n){if(e++>5e3&&__infLoop&&__infLoop(e))throw new RangeError;var i=a[n];this.pluginsEnabled[i]=t[i+"Enabled"]=d.a.getPluginEnabledObservable(i);var s=d.a.getPluginOptions(i);for(var l in s)if(s.hasOwnProperty(l)){var o=i+"_"+l;this.pluginOptions[o]=t[o]=s[l]}}return t}openSection(e){this.props.openSection(e)}onChangeFree(e){this.refs[i.a.PluginID.Contacts].setValue(e),this.refs[i.a.PluginID.Gmail].setValue(e),this.onChangeFeature()}onChangePremium(e){this.refs[i.a.PluginID.GCalendar].setValue(e),this.refs[i.a.PluginID.Drive].setValue(e),this.refs.DriveShared.setValue(e),this.onChangeFeature()}checkTier(e,t){for(var a=0,n=0,i=0;i<t.length;i++){if(a++>5e3&&__infLoop&&__infLoop(a))throw new RangeError;this.refs[t[i]].getValue()?n++:n--}n===t.length&&e.setValue(!0),n===-t.length&&e.setValue(!1)}checkTiers(){this.checkTier(this.refs.free,[i.a.PluginID.Contacts,i.a.PluginID.Gmail]),this.checkTier(this.refs.premium,[i.a.PluginID.GCalendar,i.a.PluginID.Drive,"DriveShared"])}onChangeFeature(){d.a.isSaveEnabled.set(!0),this.checkTiers()}onClickFixError(){d.a.enableOfflineFeatures(!0,function(){d.a.refresh(),this.updateState()}.bind(this))}onClickCancel(e){for(var t in this.refs)if(this.refs.hasOwnProperty(t)){var a=this.refs[t];a.checked&&a.resetValue()}this.checkTiers()}onClickSave(e,t){var a=!0,n=[i.a.PluginID.Contacts,i.a.PluginID.GCalendar,i.a.PluginID.Gmail,i.a.PluginID.Drive].map(e=>{var t=!!this.refs[e].getValue(),n=r.default.pluginManager.getPlugin(e),s={id:e,enable:t};return t&&(n&&!n.isAvailable()&&(a=!1),e===i.a.PluginID.Drive&&(s.shared=!!this.refs.DriveShared.getValue())),s});if(!a){if(r.default.billingManager.isTrialOver())return this.openSection(i.a.SettingsSections.Account),!1;r.default.billingManager.startTrial()}var s=!1;return d.a.setEnabledPlugins(n,e=>{s=!0,t(),e&&d.a.isSaveEnabled.set(!1)}),!s}renderPluginOptionCheckbox(e,t,a,n,i){return o.a.createElement(u.a,{className:"subcheckbox",ref:t,initialChecked:!!this.state[e+"_"+a],disabled:i,onChange:this.onChangeFeature},n)}renderPluginCheckbox(e,t,a,n){return o.a.createElement(u.a,{ref:e,initialChecked:!!this.state[e+"Enabled"],disabled:n,onChange:this.onChangeFeature},a,t)}render(){var e=r.default.billingManager,t=this.state,a=e.hasPremiumFeatures(),n=e.isTrialOver();return o.a.createElement("div",{key:"content",className:"new-modal-group"},o.a.createElement("div",{className:"new-modal-title"},o.a.createElement("div",{className:"title"},"Integrate with your other services"),o.a.createElement("div",{className:"subtext center c-foreground-light"},"Use ",o.a.createElement("b",null,"Moo.do")," to organize everything in one place")),o.a.createElement("div",{className:"setupFeatures featureCheckboxes"},!1,o.a.createElement("div",{className:"featureTier c-border"},o.a.createElement("div",{className:"tierTitleWrapper"},o.a.createElement(u.a,{ref:"free",className:"tierTitle c-background",initialChecked:!1,onChange:this.onChangeFree},"Free Plugins")),o.a.createElement("div",{className:"flexbox"},o.a.createElement("div",{className:"setupFeatureHalf"},this.renderPluginCheckbox(i.a.PluginID.Contacts,"Google Contacts",o.a.createElement("img",{src:"/img/plugin-gcontacts.png"}))),o.a.createElement("div",{className:"setupFeatureHalf"},this.renderPluginCheckbox(i.a.PluginID.Gmail,"Gmail",o.a.createElement("img",{src:"/img/plugin-gmail.png"}))))),o.a.createElement("div",{className:"featureTier c-border"},o.a.createElement("div",{className:"tierTitleWrapper"},o.a.createElement(u.a,{ref:"premium",className:"tierTitle c-background",initialChecked:!1,onChange:this.onChangePremium},"Premium Plugins")),!a&&n&&o.a.createElement("div",{className:"featureTierDesc error"},"Your free trial of Premium has ended. Please signup to continue using premium features or contact support@moo.do to extend."),!a&&!n&&o.a.createElement("div",{className:"featureTierDesc c-foreground-light"},"Enabling Premium features will start a free "+i.a.TrialDuration+" day trial of Moo.do Premium."),o.a.createElement("div",{className:"flexbox"},o.a.createElement("div",{className:"setupFeature setupFeatureHalf"},this.renderPluginCheckbox(i.a.PluginID.GCalendar,"Google Calendar",o.a.createElement("img",{src:"/img/plugin-gcal.png"}),n)),o.a.createElement("div",{className:"setupFeature setupFeatureHalf"},this.renderPluginCheckbox(i.a.PluginID.Drive,"Google Drive",o.a.createElement("img",{src:"/img/plugin-gdrive.png"}),n),this.renderPluginOptionCheckbox(i.a.PluginID.Drive,"DriveShared",i.a.PluginSettingsID.Drive.WriteAccess,"Share files with collaborators",n)))),o.a.createElement("div",{className:"setupSubtext"},o.a.createElement("b",null,"Moo.do")," connects with your Google services to integrate everything together. Plugin data is cached locally on your device and is never sent to any server. See our ",o.a.createElement("span",{className:"link"},"Privacy Policy")," for more details."),o.a.createElement("div",{className:"setupButtons center"},o.a.createElement(h.a,{raised:!0,primary:!0,onClick:this.onClickSave,enabled:t.isSaveEnabled},"SAVE"),o.a.createElement(h.a,{raised:!0,marginLeft:24,onClick:this.onClickCancel,enabled:t.isSaveEnabled},"RESET"))))}},f=a(20),E=a(104);var C=class extends c.a{getState(){var e=r.default.billingManager,t=e.userProperties;return{validBilling:e._hasValidBillingData,premiumStatus:e._premiumStatus,daysLeftInTrial:e.daysLeftInTrial,trialOverHidden:r.default.settings.trialOverHidden.get(),monthlyInvoice:t.monthlyInvoice,invoiceEmail:t.invoiceEmail,invoiceCompany:t.invoiceCompany,invoiceAddress:t.invoiceAddress,isUnsubscribed:t.isUnsubscribed,hasImportedMoodo:!!e.userProperties.gid}}onClickDismissTrial(){r.default.settings.trialOverHidden.set(!0),this.updateState()}onClickRestoreMoodo(e,t){return(new E.a).authAndImportServer(e=>{t()}),!0}onUnsubscribedChanged(e){this.state.isUnsubscribed,r.default.menus.alert({text:"Unsubscribing from emails is not working in the new backend yet. If you need this immediately please contact support."})}render(){var e=r.default.billingManager,t=this.state,a=f.a.getAccountName(),n=f.a.getDefaultAccountID(),s=e.getMonthlyPrice(),l=e.getYearlyPrice();return o.a.createElement("div",{key:"content",className:"new-modal-group"},e.isTrialOver()&&!t.trialOverHidden&&o.a.createElement("div",{className:"new-modal-row-1c"},o.a.createElement("div",{className:"new-modal-row trialEnd"},o.a.createElement("div",null,"Your trial has ended. Please sign up to continue using Premium features."),o.a.createElement("div",{className:"center",style:{marginTop:16}},o.a.createElement(h.a,{raised:!0,onClick:this.onClickDismissTrial},"DISMISS"))),o.a.createElement("hr",null)),o.a.createElement("div",{className:"new-modal-title"},o.a.createElement("div",{className:"title"},a&&"Hi "+a),t.validBilling&&e.isTrialState()&&o.a.createElement("div",{className:"subtext center"},"We hope your trial of Premium is going well."),t.validBilling&&e.hasPremium()&&o.a.createElement("div",{className:"subtext center"},"We are very happy to have you as a Premium Member."),t.validBilling&&!e.hasPremium()&&!e.isTrialState()&&o.a.createElement("div",{className:"subtext center"},"We hope Moo.do is helping you be productive.")),o.a.createElement("div",{className:"new-modal-row new-modal-row-2c"},o.a.createElement("div",{className:"left-header"},"ACCOUNT STATUS"),o.a.createElement("div",{className:"right-content"},o.a.createElement("div",{className:"new-modal-subrow"},o.a.createElement("div",null,o.a.createElement("div",{className:"subtitle"},"Account email"),o.a.createElement("div",{className:"subtext"},n)),o.a.createElement("div",null,o.a.createElement("div",{className:"subtitle"},"Member since"),o.a.createElement("div",{className:"subtext"},e.getJoinDate().toString(r.default.International.getFormat(i.a.DFormat.LongStrDate)))),e.isTrialState()&&!e.isTrialOver()&&o.a.createElement("div",null,o.a.createElement("div",{className:"subtitle"},"Days left in trial"),o.a.createElement("div",{className:"subtext"},t.daysLeftInTrial)),e.hasPremium()&&o.a.createElement("div",null,o.a.createElement("div",{className:"subtitle"},"Premium since"),o.a.createElement("div",{className:"subtext"},e.getPremiumStartDate().toString(r.default.International.getFormat(i.a.DFormat.LongStrDate)))),e.canceledUserHasPremiumAccess()&&o.a.createElement("div",null,o.a.createElement("div",{className:"subtitle"},"Premium end"),o.a.createElement("div",{className:"subtext"},e.premiumEndDateText())),e.hasPremium()&&e.hasSubscription()&&o.a.createElement("div",null,o.a.createElement("div",{className:"subtitle"},"Next billing cycle"),o.a.createElement("div",{className:"subtext"},e.nextBillingDateText()))))),o.a.createElement("div",{className:"new-modal-row new-modal-row-2c"},o.a.createElement("div",{className:"left-header"},"MANAGE ACCOUNT"),o.a.createElement("div",{className:"right-content"},o.a.createElement("div",{className:"new-modal-subrow"},!e.hasPremium()&&o.a.createElement("div",null,o.a.createElement(h.a,{raised:!0,onClick:e.onTapDeleteAccount},"DELETE ACCOUNT")),e.hasPremium()&&e.hasSubscription()&&o.a.createElement("div",null,o.a.createElement(h.a,{raised:!0,onClick:e.onTapUpdatePaymentMethod},"UPDATE PAYMENT METHOD")),e.hasPremium()&&e.hasSubscription()&&o.a.createElement("div",null,o.a.createElement(h.a,{raised:!0,onClick:e.cancelSubscription},"CANCEL PREMIUM")),o.a.createElement("div",null,o.a.createElement(u.a,{checked:e.userProperties.isUnsubscribed,onChange:this.onUnsubscribedChanged},"Unsubscribe from emails"))))),e.hasPremium()&&e.hasSubscription()&&o.a.createElement("div",{className:"new-modal-row new-modal-row-2c"},o.a.createElement("div",{className:"left-header"},"INVOICES"),o.a.createElement("div",{className:"right-content"},o.a.createElement("div",{className:"new-modal-subrow"},o.a.createElement("div",null,"Invoice emails are still being worked on for the new backend. If you need this immediately please contact support."),o.a.createElement("div",null,o.a.createElement(h.a,{raised:!0,onClick:e.onTapViewInvoices},"VIEW INVOICES"))))),!e.hasPremium()&&o.a.createElement("span",{id:"accountSettingsPremium"},o.a.createElement("hr",null),o.a.createElement("div",{className:"new-modal-title",style:{marginTop:24}},o.a.createElement("div",{className:"title"},"Moo.do Premium"),o.a.createElement("div",{className:"subtext center"},"Integrate more of your services together and unlock advanced organization and customization features."),o.a.createElement("div",{className:"center",style:{marginTop:24}},!t.hasImportedMoodo&&o.a.createElement("div",null,o.a.createElement(h.a,{fontSize:14,raised:!0,onClick:this.onClickRestoreMoodo},"Restore from old Moo.do")),o.a.createElement("div",{style:{marginTop:16}},o.a.createElement(h.a,{fontSize:14,raised:!0,primary:!0,onClick:e.onTapSignupMonth},"$"+s+" / month"),o.a.createElement(h.a,{fontSize:14,raised:!0,primary:!0,marginLeft:16,onClick:e.onTapSignupYear},"$"+l+" / year"),o.a.createElement(h.a,{fontSize:14,raised:!0,primary:!0,marginLeft:16,onClick:e.onTapCodeSignup},"Enter Code")))),o.a.createElement("div",{id:"premiumFeatures"},o.a.createElement("div",{className:"flexbox c-border"},o.a.createElement("div",{className:"premiumImg premiumShadow"},o.a.createElement("img",{src:"/img/about/CalendarPane.gif"})),o.a.createElement("div",{className:"premiumDesc"},o.a.createElement("div",{className:"premiumTitle"},"Calendar Pane"),o.a.createElement("div",{className:"premiumText"},"Day, Week, and Month views for managing your calendar."))),o.a.createElement("div",{className:"flexbox c-border"},o.a.createElement("div",{className:"premiumImg premiumShadow"},o.a.createElement("img",{src:"/img/about/DrivePane.png"})),o.a.createElement("div",{className:"premiumDesc"},o.a.createElement("div",{className:"premiumTitle"},"Google Drive Pane"),o.a.createElement("div",{className:"premiumText"},"Attach documents to your tasks. Dragging a file from your computer into Moo.do automatically uploads it to Drive."))),o.a.createElement("div",{className:"flexbox c-border"},o.a.createElement("div",{className:"premiumImg premiumShadow"},o.a.createElement("img",{src:"/img/about/GCalSettings.jpg"})),o.a.createElement("div",{className:"premiumDesc"},o.a.createElement("div",{className:"premiumTitle"},"Google Calendar Sync"),o.a.createElement("div",{className:"premiumText"},"Two way sync: Manage your Google Calendar in Moo.do and/or sync your Moo.do events with your Google Calendar."))),o.a.createElement("div",{className:"flexbox c-border"},o.a.createElement("div",{className:"premiumImg premiumShadow"},o.a.createElement("img",{src:"/blog/img/update-workspaces.png"})),o.a.createElement("div",{className:"premiumDesc"},o.a.createElement("div",{className:"premiumTitle"},"Boards"),o.a.createElement("div",{className:"premiumText"},"Save sets of panes to easily switch between workflows."))),o.a.createElement("div",{className:"flexbox c-border"},o.a.createElement("div",{className:"premiumImg premiumShadow"},o.a.createElement("img",{src:"/img/about/DisplaySettings-Small.jpg"})),o.a.createElement("div",{className:"premiumDesc"},o.a.createElement("div",{className:"premiumTitle"},"Advanced Display Settings"),o.a.createElement("div",{className:"premiumText"},"Customize Moo.do's look and feel to your liking."))),o.a.createElement("div",{className:"flexbox c-border"},o.a.createElement("div",{className:"premiumImg"},o.a.createElement("img",{src:"/img/about/GmailCache.jpg"})),o.a.createElement("div",{className:"premiumDesc"},o.a.createElement("div",{className:"premiumTitle"},"Gmail Sync Time"),o.a.createElement("div",{className:"premiumText"},"Cache emails for access while offline and quicker load time.")))),o.a.createElement("table",{id:"pricingTable"},o.a.createElement("tbody",null,o.a.createElement("tr",{className:"c-border c-bg-faded"},o.a.createElement("td",null),o.a.createElement("td",null,"Free"),o.a.createElement("td",null,"Premium")),o.a.createElement("tr",{className:"empty"},o.a.createElement("td",null),o.a.createElement("td",null),o.a.createElement("td",null)),o.a.createElement("tr",{className:"header price"},o.a.createElement("td",null,"Price"),o.a.createElement("td",null,"$0"),o.a.createElement("td",null,o.a.createElement("div",null,"$"+s+" / month"),o.a.createElement("div",null,"$"+l+" / year"))),o.a.createElement("tr",{className:"header"},o.a.createElement("td",null,"Core Features"),o.a.createElement("td",null),o.a.createElement("td",null)),o.a.createElement("tr",null,o.a.createElement("td",null,"Unlimited items"),o.a.createElement("td",{className:"icon-check"}),o.a.createElement("td",{className:"icon-check"})),o.a.createElement("tr",null,o.a.createElement("td",null,"Powerful search"),o.a.createElement("td",{className:"icon-check"}),o.a.createElement("td",{className:"icon-check"})),o.a.createElement("tr",null,o.a.createElement("td",null,"Realtime collaboration"),o.a.createElement("td",{className:"icon-check"}),o.a.createElement("td",{className:"icon-check"})),o.a.createElement("tr",null,o.a.createElement("td",null,"Multiple Boards"),o.a.createElement("td",null),o.a.createElement("td",{className:"icon-check"})),o.a.createElement("tr",null,o.a.createElement("td",null,"Day, Week, Month views"),o.a.createElement("td",null),o.a.createElement("td",{className:"icon-check"})),o.a.createElement("tr",{className:"empty"},o.a.createElement("td",null),o.a.createElement("td",null),o.a.createElement("td",null)),o.a.createElement("tr",{className:"header"},o.a.createElement("td",null,"Plugins"),o.a.createElement("td",null),o.a.createElement("td",null)),o.a.createElement("tr",null,o.a.createElement("td",null,o.a.createElement("img",{src:"/img/plugin-gcontacts.png"}),"Google Contacts"),o.a.createElement("td",{className:"icon-check"}),o.a.createElement("td",{className:"icon-check"})),o.a.createElement("tr",null,o.a.createElement("td",null,o.a.createElement("img",{src:"/img/plugin-mailbird.png"}),"Mailbird"),o.a.createElement("td",{className:"icon-check"}),o.a.createElement("td",{className:"icon-check"})),o.a.createElement("tr",null,o.a.createElement("td",null,o.a.createElement("img",{src:"/img/plugin-gdrive.png"}),"Google Drive"),o.a.createElement("td",null),o.a.createElement("td",{className:"icon-check"})),o.a.createElement("tr",{className:"empty"},o.a.createElement("td",null),o.a.createElement("td",null),o.a.createElement("td",null)),o.a.createElement("tr",{className:"header"},o.a.createElement("td",null,o.a.createElement("img",{src:"/img/plugin-gmail.png"}),"Gmail"),o.a.createElement("td",null),o.a.createElement("td",null)),o.a.createElement("tr",null,o.a.createElement("td",null,"Standard email features"),o.a.createElement("td",{className:"icon-check"}),o.a.createElement("td",{className:"icon-check"})),o.a.createElement("tr",null,o.a.createElement("td",null,"Offline sync"),o.a.createElement("td",null,"5 days"),o.a.createElement("td",null,"120 days")),o.a.createElement("tr",{className:"empty"},o.a.createElement("td",null),o.a.createElement("td",null),o.a.createElement("td",null)),o.a.createElement("tr",{className:"header"},o.a.createElement("td",null,o.a.createElement("img",{src:"/img/plugin-gcal.png"}),"Google Calendar"),o.a.createElement("td",null),o.a.createElement("td",null)),o.a.createElement("tr",null,o.a.createElement("td",null,"Sync Moo.do tasks"),o.a.createElement("td",null),o.a.createElement("td",{className:"icon-check"})),o.a.createElement("tr",null,o.a.createElement("td",null,"Manage Calendar in Moo.do"),o.a.createElement("td",null),o.a.createElement("td",{className:"icon-check"})),o.a.createElement("tr",{className:"empty"},o.a.createElement("td",null),o.a.createElement("td",null),o.a.createElement("td",null)),o.a.createElement("tr",{className:"header"},o.a.createElement("td",null,"Customization"),o.a.createElement("td",null),o.a.createElement("td",null)),o.a.createElement("tr",null,o.a.createElement("td",null,"Display settings presets"),o.a.createElement("td",{className:"icon-check"}),o.a.createElement("td",{className:"icon-check"})),o.a.createElement("tr",null,o.a.createElement("td",null,"Advanced display settings"),o.a.createElement("td",null),o.a.createElement("td",{className:"icon-check"})),o.a.createElement("tr",{className:"empty"},o.a.createElement("td",null),o.a.createElement("td",null),o.a.createElement("td",null)),o.a.createElement("tr",{className:"header"},o.a.createElement("td",null,"We love you",o.a.createElement("i",{className:"icon-heart"})),o.a.createElement("td",null),o.a.createElement("td",null)),o.a.createElement("tr",null,o.a.createElement("td",null,"Early access to new features"),o.a.createElement("td",null),o.a.createElement("td",{className:"icon-check"})),o.a.createElement("tr",null,o.a.createElement("td",null,"Premium support"),o.a.createElement("td",null),o.a.createElement("td",{className:"icon-check"})),o.a.createElement("tr",{className:"empty"},o.a.createElement("td",null),o.a.createElement("td",null),o.a.createElement("td",null))))))}},v=a(87),y=c.b.createClass({displayName:"ReactModalSettingsEarly",componentDisplay:i.a.ComponentDisplay.Desktop,init:function(){this.createObservables({isSendingFeedback:!1})},openSection:function(e){this.props.openSection(e)},onClickDiscard:function(){this.refs.feedback.value="",this.refs.feedback.focus()},onClickSend:function(e,t){var a=this.refs.feedback.value;if(a&&a.length>2){this.isSendingFeedback.set(!0);return r.default.sendFeedback("Moo.do Feedback",a).then(()=>{this.refs.feedback.value="",this.isSendingFeedback.set(!1),t&&n.default.isFunction(t)&&t()}),!0}},render:function(){r.default.billingManager,this.props;var e=this.state;return o.a.createElement("div",{key:"content",className:"new-modal-group"},o.a.createElement("div",{className:"new-modal-title"},o.a.createElement("div",{className:"title"},"Send Feedback"),o.a.createElement("div",{className:"subtext middle"},"Send the developers bug reports, feedback, or suggestions. Your feedback is very helpful in planning what to do next.")),o.a.createElement("div",{className:"earlyAccessFeedback"},o.a.createElement("textarea",{className:"feedbackTextArea c-background c-foreground",ref:"feedback",style:{marginBottom:16,color:e.isSendingFeedback?"#aaa":null}}),e.isSendingFeedback&&o.a.createElement(v.a,{top:100}),o.a.createElement("div",{style:{textAlign:"right"}},o.a.createElement(h.a,{raised:!0,onClick:this.onClickDiscard},"DISCARD"),o.a.createElement(h.a,{raised:!0,primary:!0,marginLeft:16,onClick:this.onClickSend},"SEND"))))}}),k=a(31),b=a(51),S=a(758);a(753);const x={width:50,height:40,textAlign:"center"};var w=class extends c.a{init(){this.createObservables({addingAccount:!1,errorMessage:"",linkingAccount:void 0,isAddEnabled:!1}),d.a.refresh(),this.listenTo(k.a.onAccountsUpdated)}getState(){let e=r.default.settings.syncAccounts,t=f.a.getDefaultAccountID(),a=e.get()||{[t]:{}},n=Object.keys(a),i={authTokens:k.a.authTokens,syncAccountsObs:e,syncAccounts:a,accountsList:n};return n.remove(t),n.splice(0,0,t),i}onClickAddAccount(){this.errorMessage.set(""),setTimeout(()=>{this.refs.addAccount.focus()},0)}onClickAddButton(e,t){this.errorMessage.set("");var a=this.refs.addAccount.getValue();if(!this.state.syncAccounts||!this.state.syncAccounts[a]){let e=n.default.clone(r.default.settings.syncAccounts.get()||{}),s=[];e[a]={},this.refs.addGmail.getValue()?(s.push(i.a.PluginID.Gmail),e[a][i.a.PluginID.Gmail]=!0):this.refs.addCalendar.getValue()&&(s.push(i.a.PluginID.GCalendar),e[a][i.a.PluginID.GCalendar]=!0);let l=s.map(e=>r.default.pluginManager.getPlugin(e).googleScopes()).flat();k.a.authAccount(a,l,a=>{a&&(r.default.settings.syncAccounts.set(e),this.refs.addAccount.clearValue()),t()})}return!0}onClickFixEmail(e){}onClickRemoveEmail(e){k.a.removeAccount(e);let t=n.default.clone(r.default.settings.syncAccounts.get());delete t[e],r.default.settings.syncAccounts.set(t)}onClickCheckbox(e,t,a){let i=r.default.pluginManager.getPlugin(t).googleScopes(),s=n.default.cloneDeep(r.default.settings.syncAccounts.get());s[e]||(s[e]={}),a?k.a.authAccount(e,i,n=>{s[e][t]=a,r.default.settings.syncAccounts.set(s)}):(s[e][t]=!1,r.default.settings.syncAccounts.set(s))}onChangeAdd(){let e=this.refs.addAccount.getValue();this.isAddEnabled.set(e&&e.includes("@")&&e.includes(".")&&!(!this.refs.addGmail.getValue()&&!this.refs.addCalendar.getValue()))}renderAccountCheckbox(e,t){let{syncAccounts:a}=this.state,n=r.default.pluginManager.getPlugin(t).isEnabled();return o.a.createElement("div",{style:x},o.a.createElement(u.a,{disabled:!n,initialChecked:!a[e]||a[e][t],onClick:this.onClickCheckbox.bind(this,e,t)}))}renderAccount(e){var t=f.a.getDefaultAccountID()===e,a=this.state.linkingAccount===e,r=n.default.classNames("accountRow c-border flexbox",{linking:a});return o.a.createElement("div",{key:"row"+e,className:r},o.a.createElement("div",{className:"f1"},a?"":e),this.renderAccountCheckbox(e,i.a.PluginID.Gmail),this.renderAccountCheckbox(e,i.a.PluginID.GCalendar),o.a.createElement("div",{style:x},!t&&!a&&o.a.createElement(o.a.Fragment,null,o.a.createElement(h.a,{icon:"icon-close",iconSize:20,width:40,height:40,onClick:this.onClickRemoveEmail.bind(this,e)}),!1)))}renderAddAccount(){var e=n.default.classNames("accountRow c-border flexbox");return o.a.createElement("div",{key:"rowAdding",className:e},o.a.createElement(b.a,{className:"addAccount f1",ref:"addAccount",floatingText:"Add Account Email",padding:{left:16,right:16},height:40,onChange:this.onChangeAdd}),o.a.createElement("div",{style:x},o.a.createElement(u.a,{ref:"addGmail",onChange:this.onChangeAdd})),o.a.createElement("div",{style:x},o.a.createElement(u.a,{ref:"addCalendar",onChange:this.onChangeAdd})),o.a.createElement("div",{style:x},o.a.createElement(h.a,{padding:8,primary:!0,raised:!0,enabled:this.state.isAddEnabled,onClick:this.onClickAddButton},"ADD")))}render(){var e=this.state.accountsList,t=o.a.createElement(S.a,{className:"gmailAccountTable"},o.a.createElement("div",{key:"header",className:"flexbox"},o.a.createElement("div",{className:"f1"},"Account"),o.a.createElement("div",{style:x},"Gmail"),o.a.createElement("div",{style:x},"Calendar"),o.a.createElement("div",{style:x})),e.map(e=>this.renderAccount(e)),this.renderAddAccount());return o.a.createElement("div",{key:"content",className:"new-modal-group"},o.a.createElement("div",{className:"new-modal-title"},o.a.createElement("div",{className:"title"},"Sync Accounts"),o.a.createElement("div",{className:"subtext center"},"Manage syncing with multiple Google accounts")),t,this.state.errorMessage&&o.a.createElement("div",{key:"errorMessage",style:{textAlign:"center"}},this.state.errorMessage))}},N=a(193);var D=class extends c.a{init(){this.hadCalendarSyncUpdated=!1,this.createObservables({addingCalendar:!1}),this.refAddCalendar=o.a.createRef(),d.a.refresh()}openSection(e){this.props.openSection(e)}onUnmount(){if(this.hadCalendarSyncUpdated){var e=r.default.pluginManager.getPlugin(i.a.PluginID.GCalendar);e.isActive()&&e.forceRemoteEventSync()}}getState(){var e=r.default.pluginManager.getPluginGCalendar(),t={premiumStatus:r.default.billingManager._premiumStatus,hasAccounts:e.getSyncAccounts().length>0,GCalendarsAvailable:d.a.GCalendarsAvailable,GCalendarSyncErrors:d.a.GCalendarSyncErrors,GCalendarAddFailure:d.a.GCalendarAddFailure,GCalendarListFailure:d.a.GCalendarListFailure,GCalendarListLoading:d.a.GCalendarListLoading},a=d.a.getPluginOptions(i.a.PluginID.GCalendar);for(var n in a)a.hasOwnProperty(n)&&(t[i.a.PluginID.GCalendar+"_"+n]=a[n]);return t}toggleCalendarImport(e){var t=i.a.PluginSettingsID.GCalendar.ImportCalendars,a=(this.state[i.a.PluginID.GCalendar+"_"+t]||[]).slice(0),r=this.isExportCalendar(e);r&&this.disableCalendarExport();var s=a.indexOfWithProperty("id",e.id);if(s>=0)a.removeAt(s);else{try{n.default.PAssert(1153,!r,"Export calendar state must be matching with import calendar state")}catch(l){n.default.reportError(l)}try{n.default.PAssert(1154,e.accountID,"Calendar should have an accountID")}catch(l){n.default.reportError(l)}a.push({id:e.id,summary:e.summary,accessRole:e.accessRole,accountID:e.accountID})}d.a.setPluginOption(i.a.PluginID.GCalendar,t,a,!1),this.hadCalendarSyncUpdated=!0}enableCalendarExport(e){d.a.setPluginOption(i.a.PluginID.GCalendar,i.a.PluginSettingsID.GCalendar.ExportCalendar,e.id,!1),this.hadCalendarSyncUpdated=!0,this.isImportCalendar(e)||this.toggleCalendarImport(e)}disableCalendarExport(){d.a.setPluginOption(i.a.PluginID.GCalendar,i.a.PluginSettingsID.GCalendar.ExportCalendar,null,!1)}toggleCalendarExport(e){this.isExportCalendar(e)?this.disableCalendarExport():this.enableCalendarExport(e)}onAddCalendarClick(e){this.addingCalendar.set(e),setTimeout(()=>{this.refAddCalendar.current.focus()},0)}onAddButtonClick(e,t){d.a.addCalendar(e,t),this.addingCalendar.set(!1)}isImportCalendar(e){var t=!1;if(this.state.GCalendar_importCalendars)for(var a=0,i=0;i<this.state.GCalendar_importCalendars.length;++i){if(a++>5e3&&__infLoop&&__infLoop(a))throw new RangeError;var r=this.state.GCalendar_importCalendars[i];if(n.default.isObject(r)||(r={id:r}),r.id===e.id){t=!0;break}}return t}isExportCalendar(e){var t=!1;return this.state.GCalendar_exportCalendar&&(t=this.state.GCalendar_exportCalendar===e.id),t}onDisplayOverdueChange(e){r.default.pluginManager.setSetting(i.a.PluginID.GCalendar,i.a.PluginSettingsID.GCalendar.DisplayOverdueInAgenda,e)}onSyncNewEventsChange(e){r.default.pluginManager.setSetting(i.a.PluginID.GCalendar,i.a.PluginSettingsID.GCalendar.SyncNewEvents,e)}onSyncDraggedEventsChange(e){r.default.pluginManager.setSetting(i.a.PluginID.GCalendar,i.a.PluginSettingsID.GCalendar.SyncDraggedEvents,e)}onCreateLocalChange(e){r.default.pluginManager.setSetting(i.a.PluginID.GCalendar,i.a.PluginSettingsID.GCalendar.CreateLocalEvents,e)}updateCalendarEvents(){var e=r.default.pluginManager.getPlugin(i.a.PluginID.GCalendar);try{n.default.PAssert(1155,e,"GCalendar plugin does not exist. HOW?")}catch(t){n.default.reportError(t)}e&&e.runCalendarSync()}onChangeWeeksPast(e){r.default.pluginManager.setSetting(i.a.PluginID.GCalendar,i.a.PluginSettingsID.GCalendar.WeeksPast,e),clearTimeout(this.timeoutUpdateCalendarEvents),this.timeoutUpdateCalendarEvents=setTimeout(this.updateCalendarEvents,5e3)}onChangeWeeksFuture(e){r.default.pluginManager.setSetting(i.a.PluginID.GCalendar,i.a.PluginSettingsID.GCalendar.WeeksFuture,e),clearTimeout(this.timeoutUpdateCalendarEvents),this.timeoutUpdateCalendarEvents=setTimeout(this.updateCalendarEvents,5e3)}comparatorCalendar(e,t){let a=e.accountID&&t.accountID?e.accountID.localeCompare(t.accountID):0;if(0===a)return e.summary.localeCompare(t.summary);{let n=r.default.settings.getUserIdentifier();e.accountID===n&&(a=-1),t.accountID===n&&(a=1)}return a}onClickSyncAccounts(){this.openSection(i.a.SettingsSections.Linked)}renderTableRows(){let e=this.state,t=e.GCalendarsAvailable,a=e.GCalendarSyncErrors,s=r.default.settings.syncAccounts.get(),l=r.default.pluginManager.getPlugin(i.a.PluginID.GCalendar),c=!l.getSetting(i.a.PluginSettingsID.GCalendar.WriteAccess)&&this.state.GCalendar_exportCalendar,d={},m=[];t.sort(this.comparatorCalendar),t.forEach(e=>{d[e.accountID]||(d[e.accountID]=[]),d[e.accountID].push(e)});let p=f.a.getDefaultAccountID(),g=Object.keys(s);return g.includes(p)&&(g.remove(p),g.splice(0,0,p)),Object.keys(s).forEach(t=>{let r=d[t];if(m.push(o.a.createElement("div",{className:"calendarAccount bold c-blue",key:"account_"+t},o.a.createElement("div",null,"Account: "+t),!r&&o.a.createElement(h.a,{raised:!0,style:{width:"auto"},onClick:this.onClickSyncAccounts},"Sync this account"))),r){r.forEach(e=>{var r=this.isImportCalendar(e),s=this.isExportCalendar(e),d="owner"===e.accessRole||"writer"===e.accessRole,h=n.default.classNames("calendarSettingsName",{import:r},{export:s});if(a){var p=a.indexOfWithProperty("id",e.id),g=null,f=null;if(p>=0){var E=a[p];E.result===i.a.SyncResult.FailureNoRead?g=!0:E.result===i.a.SyncResult.FailureNoRead&&(f=!0)}}var C=l.getCalendarBackgroundColor(e.id);m.push(o.a.createElement("div",{key:e.id+t},o.a.createElement("div",{className:h},e.summary||e.id),o.a.createElement(u.a,{checked:r,error:g,checkedColor:C,onChange:this.toggleCalendarImport.bind(this,e)}),d?o.a.createElement(u.a,{checked:s,checkedColor:C,error:g||f||s&&c,radio:!0,onChange:this.toggleCalendarExport.bind(this,e)}):o.a.createElement("div",null)))});let s=e.addingCalendar===t;m.push(o.a.createElement(o.a.Fragment,{key:"add"+t},e.GCalendarAddFailure&&o.a.createElement("div",{key:"footerError"},o.a.createElement("div",{style:{textAlign:"center"}},"There was an error creating your new calendar. Please try again.")),s&&o.a.createElement("div",{key:"footer"},o.a.createElement(b.a,{ref:this.refAddCalendar,floatingText:"New calendar name",padding:{left:0,right:24},height:50,buttonText:"ADD",onButtonClick:this.onAddButtonClick.bind(this,t)})),!s&&o.a.createElement("div",{key:"footer"},o.a.createElement("div",{style:{textAlign:"center"}},o.a.createElement(h.a,{height:"auto",onClick:this.onAddCalendarClick.bind(this,t)},"ADD NEW CALENDAR")))))}}),m}renderCalendarSettings(){var e,t,a,n,s=this.state,l=0,c=s.GCalendarSyncErrors,m=!1;if(c)for(var p=0,g=0;g<c.length;g++){if(p++>5e3&&__infLoop&&__infLoop(p))throw new RangeError;var f=c[g].result;f===i.a.SyncResult.FailureOAuth?m=!0:f!==i.a.SyncResult.FailureNoRead&&f!==i.a.SyncResult.FailureNoWrite||l++}var E=r.default.pluginManager.getPlugin(i.a.PluginID.GCalendar),C=E.getSetting(i.a.PluginSettingsID.GCalendar.WeeksPast),y=E.getSetting(i.a.PluginSettingsID.GCalendar.WeeksFuture),k=E.getSetting(i.a.PluginSettingsID.GCalendar.DisplayOverdueInAgenda),b=E.getSetting(i.a.PluginSettingsID.GCalendar.SyncNewEvents),x=E.getSetting(i.a.PluginSettingsID.GCalendar.SyncDraggedEvents),w=E.getSetting(i.a.PluginSettingsID.GCalendar.CreateLocalEvents);return r.default.billingManager.hasPremiumFeatures()?m&&0===s.GCalendarsAvailable.length?n=o.a.createElement("div",{className:"center"},o.a.createElement("div",{className:"error"},"We encountered a sync error. Please allow access to your calendar."),o.a.createElement("br",null),o.a.createElement(h.a,{raised:!0,primary:!0,onClick:d.a.enablePlugin.bind(d.a,i.a.PluginID.GCalendar)},"ALLOW")):s.GCalendarListFailure?n=o.a.createElement("div",{className:"center"},o.a.createElement("div",{className:"error"},"There was an error syncing your calendar list. Please try again."),o.a.createElement("br",null),o.a.createElement(h.a,{raised:!0,primary:!0,onClick:d.a.updateCalendarList.bind(d.a)},"RETRY")):s.GCalendarListLoading?n=o.a.createElement(v.a,null,"Loading Google Calendars..."):(l>0&&(n=o.a.createElement("div",{className:"center"},o.a.createElement("div",{style:{maxWidth:600,lineHeight:1.5,marginBottom:16},className:"error"},"There was an error reading or saving to your calendars. Please check your Google Calendar settings. The affected calendars are marked with a ",o.a.createElement(u.a,{checked:!0,error:!0,style:{marginLeft:5,marginRight:5}})," below."))),e=o.a.createElement(S.a,{className:"calendarSettingsTable new-modal-row"},o.a.createElement("div",{key:"header",className:"fancyTableHeader"},o.a.createElement("div",null,"Calendar Name"),o.a.createElement("div",null,"Sync"),o.a.createElement("div",null,"Default Save")),this.renderTableRows())):n=o.a.createElement("div",{className:"center"},o.a.createElement("div",{className:"error"},"You must have an active Premium subscription or Trial to use Google Calendar."),o.a.createElement("br",null),o.a.createElement(h.a,{raised:!0,primary:!0,onClick:this.openSection.bind(this,i.a.SettingsSections.Account)},"ABOUT PREMIUM")),t=o.a.createElement("div",{className:"new-modal-row new-modal-row-1c"},o.a.createElement("span",{style:{display:"inline-block",width:140}},"Weeks in the past"),o.a.createElement(N.a,{value:C,minValue:0,maxValue:-i.a.CalendarMinSyncWeeks,onChange:this.onChangeWeeksPast}),o.a.createElement("span",{style:{display:"inline-block",marginLeft:32,width:140}},"Weeks in the future"),o.a.createElement(N.a,{value:y,minValue:0,maxValue:i.a.CalendarMaxSyncWeeks,onChange:this.onChangeWeeksFuture})),a=o.a.createElement("div",{className:"new-modal-row new-modal-row-1c"},o.a.createElement("div",{className:"new-modal-row new-modal-row-1c"},o.a.createElement(u.a,{ref:"displayoverdue",checked:k,onChange:this.onDisplayOverdueChange},"Display overdue Google Calendar events in agenda"),o.a.createElement("div",{className:"subtext"},"In the Agenda view of the Calendar Pane, display events from Google Calendar that happened in the past.")),o.a.createElement("div",{className:"new-modal-row new-modal-row-1c"},o.a.createElement(u.a,{ref:"syncDraggedEvents",checked:x,onChange:this.onSyncDraggedEventsChange},"Sync dragged events"),o.a.createElement("div",{className:"subtext"},"Add events to Google Calendar when dragging onto the Calendar pane.")),o.a.createElement("div",{className:"new-modal-row new-modal-row-1c"},o.a.createElement(u.a,{ref:"syncNewEvents",checked:b,onChange:this.onSyncNewEventsChange},"Sync new events created in add item popup by default"),o.a.createElement("div",{className:"subtext"},"When adding events in the New Item popup, an event will be created in the selected Google Calendar.")),o.a.createElement("div",{className:"new-modal-row new-modal-row-1c"},o.a.createElement(u.a,{ref:"createLocalEvents",checked:w,onChange:this.onCreateLocalChange},"Create a local item for new calendar events by default"),o.a.createElement("div",{className:"subtext"},"When adding events in the New Item popup, a Moo.do item will be created in the current document."))),o.a.createElement("div",{className:"calendarSettings"},n,e,t,a)}render(){let{hasAccounts:e}=this.state;return o.a.createElement("div",{className:"new-modal-group"},e&&o.a.createElement("div",{className:"new-modal-row new-modal-row-1c"},this.renderCalendarSettings()),!e&&o.a.createElement("div",{className:"new-modal-row new-modal-row-1c"},o.a.createElement("div",{className:"subtext"},"No sync accounts available. Please check the Sync Accounts settings."),o.a.createElement("div",{style:{marginTop:24}},o.a.createElement(h.a,{raised:!0,primary:!0,onClick:this.onClickSyncAccounts},"Sync Accounts Settings"))))}},M=a(47),P=c.b.createClass({displayName:"ReactModalSettingsContacts",componentDisplay:i.a.ComponentDisplay.Desktop,getState:function(){return{contacts:M.a._contacts}},render:function(){var e=this.state;return o.a.createElement("div",{className:"settingPluginOptions"},o.a.createElement("div",{className:"subtext"},o.a.createElement("span",null,"We will not send emails or otherwise communicate with your contacts unless you ask us to."),o.a.createElement("span",null," If you need instant access to contacts you just added you can sync them by pressing the button below, otherwise your contacts will appear automatically after a few hours.")),o.a.createElement("div",{className:"center"},o.a.createElement(h.a,{id:"refreshContacts",raised:!0,primary:!0,onClick:d.a.onTapRefreshContacts},"REFRESH CONTACTS"),o.a.createElement("div",{id:"numContacts"},e.contacts.length+" contacts loaded")))}}),I=c.b.createClass({displayName:"ReactModalSettingsGmail",componentDisplay:i.a.ComponentDisplay.Desktop,init:function(){this.hadGmailSyncUpdated=!1},onUnmount:function(){if(this.hadGmailSyncUpdated){var e=r.default.pluginManager.getPluginGmail();e.isActive()&&e._forceThreadSync()}},getState:function(){return{GmailNumSyncd:d.a.GmailNumSyncd,GmailCacheSize:d.a.GmailCacheSize,GmailSyncAccounts:d.a.GmailSyncAccounts}},onSyncTimeChanged:function(e){r.default.pluginManager.setSetting(i.a.PluginID.Gmail,i.a.PluginSettingsID.Gmail.SyncTime,e),this.hadGmailSyncUpdated=!0},onScheduleChange:function(e){r.default.pluginManager.setSetting(i.a.PluginID.Gmail,i.a.PluginSettingsID.Gmail.ArchiveOnSchedule,e)},onOrganizeChange:function(e){r.default.pluginManager.setSetting(i.a.PluginID.Gmail,i.a.PluginSettingsID.Gmail.ArchiveOnOrganize,e)},onSignatureChange:function(e){r.default.pluginManager.setSetting(i.a.PluginID.Gmail,i.a.PluginSettingsID.Gmail.InsertSignatureAboveReplies,e)},onClickSetupAccounts:function(){this.props.openSection(i.a.SettingsSections.Linked)},onClickFullSync:function(e,t){return r.default.pluginManager.getPluginGmail().syncAllAccountsFull(t),!0},render:function(){var e=r.default.pluginManager.getPlugin(i.a.PluginID.Gmail),t=e.getSetting(i.a.PluginSettingsID.Gmail.SyncTime),a=e.getSetting(i.a.PluginSettingsID.Gmail.ArchiveOnSchedule),n=e.getSetting(i.a.PluginSettingsID.Gmail.ArchiveOnOrganize),s=e.getSetting(i.a.PluginSettingsID.Gmail.InsertSignatureAboveReplies),l=r.default.billingManager.hasPremium()?i.a.MaxGmailSyncTime.Premium:i.a.MaxGmailSyncTime.Free;return o.a.createElement("div",{className:"new-modal-group gmailSettings"},o.a.createElement("div",{className:"new-modal-row new-modal-row-1c center"},o.a.createElement(h.a,{raised:!0,onClick:this.onClickSetupAccounts},"SETUP ACCOUNTS")),o.a.createElement("div",{className:"new-modal-row new-modal-row-1c"},o.a.createElement("span",{style:{width:160}},"Offline sync days\xa0\xa0"),o.a.createElement(N.a,{value:t,minValue:0,maxValue:l,onChange:this.onSyncTimeChanged}),o.a.createElement("div",{className:"subtext"},"The number of days in the past that your email will be saved for offline access (0 - ".concat(l,")."))),o.a.createElement("div",{className:"new-modal-row new-modal-row-1c"},o.a.createElement(u.a,{ref:"archiveOnSchedule",checked:a,onChange:this.onScheduleChange},"Archive emails when scheduled"),o.a.createElement("div",{className:"subtext"},"If enabled, when you use the 'Schedule' feature to put an email on your calendar it will be archived.")),o.a.createElement("div",{className:"new-modal-row new-modal-row-1c"},o.a.createElement(u.a,{ref:"archiveOnOrganize",checked:n,onChange:this.onOrganizeChange},"Archive emails when organized"),o.a.createElement("div",{className:"subtext"},"If enabled, when you drag an email to your outline it will be archived and marked as Moo.do/Handled.")),o.a.createElement("div",{className:"new-modal-row new-modal-row-1c"},o.a.createElement(u.a,{ref:"insertSignatureAboveReplies",checked:s,onChange:this.onSignatureChange},"Insert signature before quoted text in replies"),o.a.createElement("div",{className:"subtext"},"If enabled, your signature will be inserted above the quoted text in replies and will remove the '--' line that precedes it.")),o.a.createElement("div",{className:"new-modal-row new-modal-row-1c center"},o.a.createElement(h.a,{raised:!0,onClick:this.onClickFullSync},"Force Full Sync")))}}),T=a(208),A=a(145),L=["overdue","starred","important","#next","#soon","#later","#someday"];var F=class extends c.a{init(){for(var e=0,t=0,a=0,n=r.default.timeline.agendaSort.get(),i=[],s=Object.keys(n).map(e=>({key:e,value:n[e]})),l=0;l<15;l++){if(e++>5e3&&__infLoop&&__infLoop(e))throw new RangeError;s.push(l)}for(s.sort(this.sortComparator),l=0;l<L.length;l++){if(t++>5e3&&__infLoop&&__infLoop(t))throw new RangeError;let e=L[l];s.indexOfWithProperty("key",e)<0&&i.push({key:e,value:0})}var o=T.a.getAll();for(l=0;l<o.length;l++){if(a++>5e3&&__infLoop&&__infLoop(a))throw new RangeError;var c="#"+o[l].text;s.indexOfWithProperty("key",c)<0&&i.push({key:c,value:0})}i.sort(this.sortComparatorNonSort),this.createObservables({sortArray:s,nonSortArray:i,selected:{array:"sort",index:0}})}sortComparatorNonSort(e,t){var a=e.key[0],n=t.key[0];return"#"===a&&"#"!==n?1:"#"===n&&"#"!==a?-1:e.key.localeCompare(t.key)}sortComparator(e,t){return(isNaN(e)?e.value:100*e)-(isNaN(t)?t.value:100*t)}moveChild(e,t,a,n){var i=this.state,r=a&&a!==this.refs.sortList?"nonSort":"sort",s=n&&n!==this.refs.nonSortList?"sort":"nonSort",l=i[r+"Array"],o=i[s+"Array"],c=l===o,d="sort"===r?i.nonSortArray:i.sortArray,m=l[e];c?l.splice(e,1):m.isDragging=!0;var u=d.indexOfWithProperty("key",m.key);u>=0&&d.splice(u,1),o.splice(t,0,m),this[r+"Array"].set(l,!1),this[s+"Array"].set(o,!0)}onDragOut(e,t){var a=t&&t!==this.refs.sortList?"nonSort":"sort",n=this.state[a+"Array"],i="sort"===a?this.nonSortArray:this.sortArray,r=n[e],s=i.indexOfWithProperty("key",r.key);s>=0&&i.splice(s,1)}onDragEnd(e,t,a){var n=e.props.owner,i=e.props.index,r=n&&n!==this.refs.sortList?"nonSort":"sort",s=this.state[r+"Array"][i];if(s.isDragging=!1,t){var l=e.props.owner;(l&&l!==this.refs.nonSortList?this.sortArray:this.nonSortArray).splice(e.props.index,1)}this.sortArray.indexOf(s)<0&&this.nonSortArray.indexOf(s)<0&&this.nonSortArray.push(s),this.sortArray.notify(),a&&this.saveAfterTimeout()}saveAfterTimeout(){this._saveTimeout&&clearTimeout(this._saveTimeout),this._saveTimeout=setTimeout(this.saveToSettings,200)}saveToSettings(){for(var e,t=0,a=this.state.sortArray,n={},i=-1,s=0;s<a.length;s++){if(t++>5e3&&__infLoop&&__infLoop(t))throw new RangeError;var l=a[s];if(isNaN(l)){var o=100*i,c=e&&e>o?e+1:o+1;n[l.key]=c,e=c}else i=l}r.default.timeline.saveAgendaSort(n)}getDragTargetFromElement(e){var t=n.default.findParent(e,"fancySortableList"),a=this.refs;return t===a.sortList.getElement()?a.sortList:t===a.nonSortList.getElement()?a.nonSortList:void 0}onClickMoveToOtherList(){var e=this.state.selected,t=e.array,a=e.index,n="sort"===t?"nonSort":"sort",i=this.state[t+"Array"][a];isNaN(i)&&(this[t+"Array"].splice(a,1),this[n+"Array"].splice(0,0,i)),this.saveAfterTimeout()}onClickListItem(e,t){this.selected.set({array:e,index:t})}renderListItem(e,t,a,i){var r=this.state,s=this.onClickListItem.bind(this,i,t);if(isNaN(e)){var l=e.key.capitalize(),c=n.default.classNames(a,{"tag c-tag":l.startsWith("#")},{"selected c-popup-item":r.selected.array===i&&r.selected.index===t});return o.a.createElement("div",{key:l,className:c,onClick:s,"data-isdragging":e.isDragging},l)}return o.a.createElement("div",{key:e,className:a+" date c-date","data-nodrag":!0},o.a.createElement("span",{className:"icon-calendar"}),o.a.createElement("span",null,"Today"+(e>0?" + "+e+" days":"")))}render(){var e,t=0,a=0,i=this.state,r=i.sortArray,s=i.nonSortArray,l=[],c=[],d=i.selected.array,m=n.default.classNames("agendaSortSettingsItem c-background"),u=n.default.classNames({"icon-arrow_forward":"sort"===d},{"icon-arrow_back":"nonSort"===d});for(e=0;e<r.length;e++){if(t++>5e3&&__infLoop&&__infLoop(t))throw new RangeError;l.push(this.renderListItem(r[e],e,m,"sort"))}for(e=0;e<s.length;e++){if(a++>5e3&&__infLoop&&__infLoop(a))throw new RangeError;c.push(this.renderListItem(s[e],e,m,"nonSort"))}return o.a.createElement("div",{className:"agendaSortListsContainer modal-row flexbox flexvert",style:{height:"100%"}},o.a.createElement("div",{className:"modal-row-title"},"Change agenda sort"),o.a.createElement("div",{className:"modal-subtext c-foreground-faded"},"Customize the sort order of the Agenda. Drag and drop tags and blocks to arrange them relative to dates."),o.a.createElement("div",{className:"modal-row agendaSortLists flexbox f1"},o.a.createElement("div",{className:"agendaSortListWrapper flexbox flexvert f1"},o.a.createElement("div",{className:"bold"},"Order on Agenda"),o.a.createElement(A.a,{className:"agendaSortList f1 c-border-light",moveChild:this.moveChild,onDragEnd:this.onDragEnd,onDragOut:this.onDragOut,ref:"sortList",getDragTargetFromElement:this.getDragTargetFromElement,classDragging:"c-foreground-very-faded"},l)),o.a.createElement("div",{className:"flexbox flexvert height100"},o.a.createElement(h.a,{raised:!0,round:!1,icon:u,onClick:this.onClickMoveToOtherList})),o.a.createElement("div",{className:"agendaSortListWrapper flexbox flexvert f1"},o.a.createElement("div",{className:"bold"},"Not on Agenda"),o.a.createElement(A.a,{className:"agendaSortList agendaSortList f1 c-border-light",moveChild:this.moveChild,onDragEnd:this.onDragEnd,onDragOut:this.onDragOut,ref:"nonSortList",getDragTargetFromElement:this.getDragTargetFromElement,classDragging:"c-foreground-very-faded"},c))))}};var R=class extends c.a{init(){}onChangeDateFormat(){var e=this.refs.selectDateFormat.value;r.default.settings.dateFormat.set(e)}onChangeDayWeekStart(){r.default.settings.dayWeekStart.set(+this.refs.selectDayWeekStart.value)}onNotificationsChanged(e){r.default.settings.disableNotifications.set(!e),e?s.a.usesHTML5Notifications()?s.a.hasNotificationPermission()||Notification.requestPermission(e=>{"granted"===e?r.default.timeline.updateNotifications():(r.default.settings.disableNotifications.set(!0),this.refs.notifications.setValue(!1),r.default.toasts.pushMessage({text:"To enable notifications in the future, you must first give permission in your browser.",action:i.a.MessageAction.OpenURL,actionText:"LEARN MORE",data:{url:"https://support.google.com/chrome/answer/6148059"}}))}):r.default.timeline.updateNotifications():r.default.timeline.clearNotifications()}onDelayChanged(e){r.default.settings.notificationDelay.set(e),n.default.sendEvent("NotificationDelay","Changed",e)}onCustomDaysChanged(e){r.default.settings.calendarCustomDays.set(e)}render(){var e=r.default.International.getCurrentDateFormat(),t=r.default.settings.dayWeekStart.get(),a=r.default.settings.calendarCustomDays.get(),n=r.default.settings.notificationDelay.get(),l=!r.default.settings.disableNotifications.get()&&s.a.hasNotificationPermission();return o.a.createElement("div",{key:"content"},o.a.createElement("div",{className:"modal-row"},o.a.createElement("div",{className:"settingsName ib bold"},"Date Format:"),o.a.createElement("select",{defaultValue:e,ref:"selectDateFormat",onChange:this.onChangeDateFormat},o.a.createElement("option",{value:i.a.DateFormat.MDY},"M/D/Y"),o.a.createElement("option",{value:i.a.DateFormat.DMY},"D/M/Y"),o.a.createElement("option",{value:i.a.DateFormat.DMYDot},"D.M.Y"),o.a.createElement("option",{value:i.a.DateFormat.YMD},"Y/M/D"),o.a.createElement("option",{value:i.a.DateFormat.YMDDot},"Y.M.D"))),o.a.createElement("div",{className:"modal-row"},o.a.createElement("div",{className:"settingsName ib bold"},"Start week on:"),o.a.createElement("select",{defaultValue:t,ref:"selectDayWeekStart",onChange:this.onChangeDayWeekStart},o.a.createElement("option",{value:0},"Sunday"),o.a.createElement("option",{value:1},"Monday"))),o.a.createElement("div",{className:"modal-row"},o.a.createElement("div",{className:"settingsName ib bold"},"Number of days in custom calendar view (Premium):"),o.a.createElement(N.a,{value:a,minValue:1,maxValue:14,readonly:!r.default.billingManager.hasPremiumFeatures(),onChange:this.onCustomDaysChanged})),s.a.supportsNotifications()&&o.a.createElement(o.a.Fragment,null,o.a.createElement("hr",null),o.a.createElement("div",{className:"modal-row"},o.a.createElement(u.a,{ref:"notifications",checked:l,onChange:this.onNotificationsChanged},"Enable notifications"),o.a.createElement("div",{className:"modal-subtext c-foreground-faded"},"Display native notifications for items that use a specific @date and time in their text. These are only displayed for the currently open document on this device.")),o.a.createElement("div",{className:"modal-row"},o.a.createElement("span",{className:"settingsName ib bold"},"Notification Time"),o.a.createElement(N.a,{value:n,minValue:0,maxValue:120,interval:5,onChange:this.onDelayChanged}),o.a.createElement("div",{className:"modal-subtext c-foreground-faded"},"Time in minutes before event to display a notification about the event."))))}},_=a(110),G=a(757),O=a(53);var B=class extends c.a{init(){this.createObservables({backupText:""})}getState(){return{backupFrequency:r.default.settings.backupFrequency,lastBackupText:this.getLastBackupText()}}getLastBackupText(){var e,t=_.a.getLastBackup();if(t>0){var a=new Date(t);e=O.a.toHumanText(a)}else e="Not backed up";return e}onToggleEnable(){let e,t=r.default.settings.backupFrequency;if(this.state.backupFrequency>0)e=0,t.set(e);else{let a=()=>{e=i.a.DefaultBackupFrequency,this.refs.selectTimeframe.setValue("Hours"),t.set(e)};_.a.isDriveBackupAuthorized()?a():_.a.authorize(e=>{e&&a()})}}onChangeFrequency(){let e=this.refs.frequency.getValue(),t=this.refs.selectTimeframe.getValue(),a="Days"===t&&i.a.MSPerDay||"Hours"===t&&i.a.MSPerHour||"Minutes"===t&&i.a.MSPerMinute;r.default.settings.backupFrequency.set(e*a)}onClickBackupNow(){this.backupText.set("Backing up..."),_.a.backupAll().then(()=>this.backupText.set("Backup complete"))}onClickBackupList(){r.default.menus.closeModal(i.a.Modals.Settings),r.default.menus.openModal(i.a.Modals.Backups)}render(){let e=this.state,t=this.state.backupFrequency||0,a="Hours";return t>=i.a.MSPerDay?(a="Days",t/=i.a.MSPerDay):t>=i.a.MSPerHour?(a="Hours",t/=i.a.MSPerHour):t>=0&&(a="Minutes",t/=i.a.MSPerMinute),t=Math.floor(t),o.a.createElement("div",{key:"content"},o.a.createElement("div",{className:"modal-row"},o.a.createElement(u.a,{checked:t>0,onChange:this.onToggleEnable},"Enable Drive backups"),o.a.createElement("div",{className:"modal-subtext c-foreground-faded"},'Automatically backup all data into the "Moo.do Backups" folder in your Google Drive. Backups will run on the following frequency, only if there are any new changes to back up. Moo.do keeps its own encrypted revision history, but this gives you an extra level of security that your data is safe. Note that backups to Drive are not encrypted.')),o.a.createElement("div",{className:"modal-row"},o.a.createElement("div",{className:"settingsName ib bold"},"Every:"),o.a.createElement(N.a,{value:t,ref:"frequency",minValue:0,maxValue:60,interval:1,onChange:this.onChangeFrequency}),o.a.createElement(G.a,{defaultValue:a,style:{marginLeft:16,height:32},ref:"selectTimeframe",onChange:this.onChangeFrequency},o.a.createElement("option",{value:"Minutes"},"Minutes"),o.a.createElement("option",{value:"Hours"},"Hours"),o.a.createElement("option",{value:"Days"},"Days"))),o.a.createElement("div",{className:"modal-row"},"Last backup: "+e.lastBackupText),o.a.createElement("div",{className:"modal-row"},o.a.createElement(h.a,{raised:!0,onClick:this.onClickBackupNow},"BACKUP NOW"),e.backupText&&o.a.createElement("div",{className:"modal-subtext"},e.backupText)),o.a.createElement("div",{className:"modal-row"},o.a.createElement(h.a,{raised:!0,onClick:this.onClickBackupList},"SEE BACKUP HISTORY")))}},U=a(54);var V=class extends c.a{init(){this.createObservables({error:"",isChanging:!1})}getState(){let e=r.default.settings.encryptionKeys;return{encryptionKeys:e,hasUserPassword:e.get()&&!!e.get()[i.a.EncryptionKeys.UserPassword]}}onClickSave(e,t){let a=this.refs.pass1.getValue(),n=this.refs.pass2.getValue(),s=i.a.EncryptionKeys.UserPassword;if(a)if(a!==n)this.error.set("Passwords do not match");else{if(!(a.length<5))return r.default.menus.confirmEncrypt(a,e=>{e?_.a.backupAuto().then(()=>{(this.state.isChanging?r.default.crypto.updateKey:r.default.crypto.addKey)({name:s,password:a,sentinelSalt:f.a.getEncryptionUid()}).then(e=>{U.a.updateUserEncryption(e).then(()=>{this.isChanging.set(!1),t()})})}):t()}),!0;this.error.set("Password is too short. Please enter a longer password to make it secure.")}else this.error.set("No password entered")}onClickContact(){r.default.menus.openModal(i.a.Modals.ReportBug)}onClickChange(){this.isChanging.set(!0)}onClickRemove(e,t){r.default.menus.confirm("Are you sure you want to remove your encryption password?",e=>{e?U.a.updateUserEncryption(r.default.crypto.getGlobalKeyInfo()).then(()=>{t()}):t()})}render(){let e=this.state,t=!e.hasUserPassword||e.isChanging,a={marginTop:8,width:240};return l.createElement("div",{key:"content"},l.createElement("div",{className:"modal-row"},t?l.createElement(l.Fragment,null,l.createElement("div",null,l.createElement("div",{className:"settingsName ib bold"},"Encrypt data with a password"),l.createElement("div",{className:"modal-subtext c-foreground-faded"},"Your data is encrypted client-side before sending it to the database. For an extra level of security, you can enter your own password for the encryption. This makes it so that even the developers cannot read your data, and it cannot be recovered.")),l.createElement("div",{style:{marginTop:16}},l.createElement(b.a,{type:"password",placeholder:"Password",ref:"pass1",style:a,onButtonClick:this.onClickSave}),l.createElement(b.a,{type:"password",placeholder:"Confirm Password",ref:"pass2",style:a,onButtonClick:this.onClickSave})),l.createElement("div",{className:"modal-warning flexbox c-warning"},l.createElement("i",{className:"icon-warning"}),l.createElement("div",null,"If you lose this password, all your data will be lost! For your security, Moo.do cannot recover your password, so keep your password safe. This is competely optional (see above).")),e.error&&l.createElement("div",{className:"error",style:{marginTop:8}},e.error),l.createElement("div",{style:{marginTop:8}},l.createElement(h.a,{raised:!0,primary:!0,onClick:this.onClickSave},"Save"))):l.createElement(l.Fragment,null,l.createElement("div",null,l.createElement("div",{className:"settingsName ib bold"},"Your data is encrypted with your password"),l.createElement("div",{style:{marginTop:16}},l.createElement(h.a,{raised:!0,primary:!0,onClick:this.onClickChange},"Change"),l.createElement(h.a,{raised:!0,cancel:!0,marginLeft:16,onClick:this.onClickRemove},"Remove"))))))}},H=a(13);var W=class extends c.a{init(){}getState(){}onClickClearLocal(){H.a.clearLocalData()}render(){return l.createElement("div",{key:"content"},l.createElement("div",{className:"modal-row"},l.createElement("div",{style:{marginTop:8}},l.createElement(h.a,{raised:!0,onClick:this.onClickClearLocal},"Clear Local Data"))))}},K=a(184);var z=class extends c.a{init(){this.createObservables({backupDir:"",docsDir:"",error:""}),r.default.ElectronBridge.getPrefs(e=>{this.backupDir.set(e.backupDir),this.docsDir.set(e.docsDir)})}getState(){return{backupLocal:r.default.settings.backupLocal,encryptLocalFiles:r.default.settings.encryptLocalFiles}}onChangeBackups(e){r.default.settings.backupLocal.set(e)}onChangeEncryption(e){r.default.settings.encryptLocalFiles.set(e)}onChangeFilesFolder(e){this.refs.picker.click()}onPickerChange(e){let t=e.target.files;if(t){let e=t[0];if(e){let t=e.path;if(t){let e=!1,a=()=>{r.default.ElectronBridge.setDocsFolder(t,e,e=>{e||(this.docsDir.set(t),K.a.reload())})};K.a.numDocuments()>0?r.default.menus.confirm("Do you want move existing files to the new folder?",t=>{e=t,a()}):a()}}}}render(){let{backupLocal:e,backupDir:t,docsDir:a,error:n,encryptLocalFiles:i}=this.state;return o.a.createElement("div",{key:"content"},o.a.createElement("div",{className:"modal-row"},o.a.createElement(u.a,{checked:e,onChange:this.onChangeBackups},"Enable automatic backups"),o.a.createElement("div",{className:"modal-subtext c-foreground-faded"},"Backups saved in: ".concat(t))),s.a.supportLocalFiles()&&o.a.createElement(o.a.Fragment,null,o.a.createElement("div",{className:"modal-row"},o.a.createElement("div",{className:"settingsName ib bold",style:{marginBottom:8}},"Save local files in:"),o.a.createElement(b.a,{readonly:!0,value:a,buttonText:"CHANGE",onButtonClick:this.onChangeFilesFolder}),o.a.createElement("input",{type:"file",ref:"picker",className:"hidden",webkitdirectory:"",directory:"",onChange:this.onPickerChange})),o.a.createElement("div",{className:"modal-row"},o.a.createElement(u.a,{checked:i,onChange:this.onChangeEncryption},"Encrypt local files"))),o.a.createElement("div",{className:"modal-row"},o.a.createElement("div",{className:"error"},n)))}},Y=a(756),j=a(759),q=c.b.createClass({displayName:"ReactModalSettings",componentDisplay:i.a.ComponentDisplay.Desktop,init:function(){this.createObservables({sectionOpened:this.props.section||i.a.SettingsSections.General}),d.a.getPluginEnabledObservable(i.a.PluginID.GCalendar).listen(this.onToggleGCal)},getState:function(){for(var e=0,t={},a=d.a.pluginsAvailable,n=0;n<a.length;++n){if(e++>5e3&&__infLoop&&__infLoop(e))throw new RangeError;var i=a[n];t[i+"Enabled"]=d.a.getPluginEnabledObservable(i)}return t},onToggleGCal:function(e){e&&setTimeout(function(){this.openSection(i.a.SettingsSections.GoogleCalendar)}.bind(this),0)},openSection:function(e){var t=!d.a.isSaveEnabled.get();t||r.default.menus.confirm("You have unsaved changes. Are you sure you want to cancel your changes?",function(t){t&&(d.a.isSaveEnabled.set(!1),this.openSection(e))}.bind(this)),t&&this.sectionOpened.set(e)},showEarlyAndAccount:function(){return!n.default.isDemoMode()||!1},_checkLinkedAccountErrors:function(){for(var e=0,t=r.default.pluginManager.getPluginGmail().getSyncAccounts(),a=0;a<t.length;++a){if(e++>5e3&&__infLoop&&__infLoop(e))throw new RangeError;t[a]}return!1},_checkSectionError:function(e){var t=!1;switch(e){case i.a.SettingsSections.Linked:t=this._checkLinkedAccountErrors()}return t},renderListItem:function(e,t){var a=this._checkSectionError(e),n=o.a.createElement("span",null,e);return a&&(n=o.a.createElement("span",null,o.a.createElement("span",null,n),o.a.createElement("span",{className:"error icon-warning"}))),o.a.createElement(j.a,{className:t&&!a?"indented":null,selected:this.state.sectionOpened===e,onClick:this.openSection.bind(this,e)},n)},renderPluginListItem:function(e,t){var a=r.default.pluginManager.getPlugin(e),n=a&&a.hasSettingsError(),i=o.a.createElement("span",null,t);return n&&(i=o.a.createElement("span",null,i,o.a.createElement("span",{className:"error icon-warning"}))),o.a.createElement(j.a,{selected:this.state.sectionOpened===t,onClick:this.openSection.bind(this,t)},i)},isPluginEnabled:function(e){return this.state[e+"Enabled"]},render:function(){r.default.billingManager;var e,t,a=this.state.sectionOpened;switch(a){case i.a.SettingsSections.General:t=p;break;case i.a.SettingsSections.Plugins:t=g;break;case i.a.SettingsSections.Invite:t=m.a;break;case i.a.SettingsSections.EarlyAccess:t=y;break;case i.a.SettingsSections.Account:t=C;break;case i.a.SettingsSections.Linked:t=w;break;case i.a.SettingsSections.GoogleCalendar:t=D;break;case i.a.SettingsSections.Contacts:t=P;break;case i.a.SettingsSections.Gmail:t=I;break;case i.a.SettingsSections.Agenda:t=F;break;case i.a.SettingsSections.Dates:t=R;break;case i.a.SettingsSections.Backups:t=B;break;case i.a.SettingsSections.Security:t=V;break;case i.a.SettingsSections.Debug:t=W;break;case i.a.SettingsSections.DesktopApp:t=z;break;default:try{n.default.PAssert(879,!1,"Unknown settings sections requested: ",a)}catch(c){n.default.reportError(c)}}e=o.a.createElement(t,{key:"content",openSection:this.openSection});var l="Settings - "+this.sectionOpened.get();return o.a.createElement(Y.a,{id:"modalSettings",title:l,width:800,height:900,sidebarWidth:180,modalID:i.a.Modals.Settings,scrollable:!0},o.a.createElement("div",{key:"sidebar"},o.a.createElement(j.a,{header:!0},"SETTINGS"),this.renderListItem(i.a.SettingsSections.General),this.renderListItem(i.a.SettingsSections.Dates),this.renderListItem(i.a.SettingsSections.Agenda),s.a.isNativeApp()&&this.renderListItem(i.a.SettingsSections.DesktopApp),this.renderListItem(i.a.SettingsSections.Backups),this.showEarlyAndAccount()&&this.renderListItem(i.a.SettingsSections.Account),this.renderListItem(i.a.SettingsSections.Security),o.a.createElement(j.a,{header:!0},"PLUGINS"),this.renderListItem(i.a.SettingsSections.Plugins),(this.isPluginEnabled(i.a.PluginID.Gmail)||this.isPluginEnabled(i.a.PluginID.GCalendar))&&this.showEarlyAndAccount()&&this.renderListItem(i.a.SettingsSections.Linked),this.isPluginEnabled(i.a.PluginID.GCalendar)&&this.renderPluginListItem(i.a.PluginID.GCalendar,i.a.SettingsSections.GoogleCalendar),this.isPluginEnabled(i.a.PluginID.Contacts)&&this.renderPluginListItem(i.a.PluginID.Contacts,i.a.SettingsSections.Contacts),this.isPluginEnabled(i.a.PluginID.Gmail)&&this.renderPluginListItem(i.a.PluginID.Gmail,i.a.SettingsSections.Gmail),o.a.createElement(j.a,{header:!0},"SUPPORT"),this.renderListItem(i.a.SettingsSections.EarlyAccess),this.renderListItem(i.a.SettingsSections.Debug)),e)}});t.default=q},807:function(e,t,a){"use strict";a.r(t);var n=a(57),i=a.n(n),r=a(0),s=a(1),l=a(3),o=a(13),c=a(2),d=a.n(c),m=a(15),u=a(6),h=a(5),p=a(17),g=a(35),f=a(95),E=a(764);var C=class extends m.a{onFocus(){var e=this.props.component.refs[this.props.target];e&&e.focus()}render(){return d.a.createElement("input",{className:"fancyFocusGuard",onFocus:this.onFocus,tabIndex:this.props.tabIndex})}},v=a(70),y=a(51),k=a(14),b=a(50),S=a(757),x=400;t.default=class extends m.a{init(){let e=this.props.item,t=l.default.pluginManager.getPlugin(s.a.PluginID.GCalendar);this.createObservables({canSyncDate:e&&!!e.getMooDate(),addingLocal:!t.isActive()||l.default.pluginManager.getSetting(s.a.PluginID.GCalendar,s.a.PluginSettingsID.GCalendar.CreateLocalEvents),addingRemote:t.isActive()&&l.default.pluginManager.getSetting(s.a.PluginID.GCalendar,s.a.PluginSettingsID.GCalendar.SyncNewEvents),selectedDocument:e&&e.getDocumentOwner()?e.getDocumentOwner():o.a.getDefaultDocument()})}getHotkeys(){return[g.a.create(s.a.KeyCode.Escape,!0,s.a.Primary.Either,s.a.Shift.Either,this.onEscape),g.a.create(s.a.KeyCode.D,!0,s.a.Primary.Yes,s.a.Shift.Yes,this.onHotkeyDate),g.a.create(s.a.KeyCode.C,!0,s.a.Primary.Never,s.a.Shift.No,this.onHotkeyCreateEvent)]}getState(){var e=this.props.item;return{flags:e.flags,maxWidth:this.props.pane?Math.min(this.props.pane.getWidth()-20,x):x,isStarred:e.isStarred(),priority:e.getPriority()}}onMount(){this.props.item.itemChanged.listen(this.onItemChanged),p.a.listen("windowResize",this.onResize),p.a.listen("panesChanged",this.onResize)}onResize(){this.updateState(),setTimeout(()=>{this.refs.menu&&this.refs.menu.updateState()},300)}onUnmount(){this.props.item.itemChanged.unlisten(this.onItemChanged);var e=this.props;if(e.addOnSave&&this.needsSave){u.d.beginAction();var{item:t,parent:a,insertIndex:n}=this.addItem();e.beginSave&&e.beginSave();try{var i=e.options;if(i){var o=0;for(let e=0;e<i.length;e++){if(o++>5e3&&__infLoop&&__infLoop(o))throw new RangeError;var c=i[e],d=this.refs[c.text];if(d&&d.getValue())try{c.cb(t)}catch(E){r.default.reportError(E)}}}if(e.children){var m=0;for(let a=0;a<e.children.length;a++){if(m++>5e3&&__infLoop&&__infLoop(m))throw new RangeError;var h=e.children[a].clone(t,s.a.ChangeType.Local);t.insertItem(h)}}var g=l.default.pluginManager.getPluginGCalendar(),f=this.refs.checkAddCalendar;if(g&&g.isAvailable()&&f&&f.getValue()&&this.refs.selectCalendar){let e=this.refs.selectCalendar.getValue();g.createEventForItem(t,e)}isNaN(n)||a.insertItem(t,n)}catch(C){r.default.reportError(C)}u.d.endAction(),e.endSave&&e.endSave()}p.a.unlisten("windowResize",this.onResize),p.a.unlisten("panesChanged",this.onResize)}onItemChanged(){var e=this.props.item;this.canSyncDate.set(!!e.getMooDate())}onHotkeyDate(){l.default.menus.openContextMenu({componentName:"ReactContextMenuDate",element:this.refs.item.getElement(),item:this.props.item,pane:this.props.pane})}onHotkeyCreateEvent(){var e=l.default.pluginManager.getPluginGCalendar(),t=this.props.item;e&&(this.props.addOnSave?this.state.canSyncDate&&this.refs.checkAddCalendar&&this.refs.checkAddCalendar.setValue(!0):(e.createEventForItem(t),t.itemChanged.notify()))}onKeyDownItem(e){h.a.getKeyCode(e)===s.a.KeyCode.Enter?(this.save(),e.preventDefault()):this.wasAKeyPressed=!0}save(){this.props.item.hasText()?(this.needsSave=!0,l.default.menus.closeContextMenu()):l.default.toasts.pushMessage({text:"Please enter text for the item before adding it.",timeout:2e3})}addItem(){var e=this.props.item,t=!0,a=l.default.pluginManager.getPluginGCalendar();if(a&&a.isAvailable()&&this.refs.checkAddLocal&&(t=this.refs.checkAddLocal.getValue()),e.getRawText().length>0){if(t){var n=this.props.parent,i=this.refs.addTo.getItem();i&&(n=i.item),this.props.selectDocument&&!i&&(n=o.a.getDocumentById(this.refs.selectDocument.getValue()).getRootItem());var r=e.clone(n,s.a.ChangeType.AllLocal),c=this.refs.noteText.getValue();if(c){var d=r.createNote();d&&d.setText(c,s.a.ChangeType.Local)}return{item:r,parent:n,insertIndex:0}}return{item:e}}return{}}onEscape(){this.wasEscapeKeyPressed=!0,l.default.menus.closeContextMenu()}onNoteValueSet(){this.refs.menu.updateState()}onKeyDownNote(e){h.a.getKeyCode(e)===s.a.KeyCode.Enter&&(h.a.mac&&e.metaKey||!h.a.mac&&e.ctrlKey)&&this.save()}onClickStar(){var e=this.props.item;e.setStarred(!e.isStarred(),s.a.ChangeType.Local)}setPriority(e){var t=this.props.item;t.getPriority()===e&&(e=s.a.VMLIFlag.None),t.setPriority(e,s.a.ChangeType.Local)}onChangeAddToCalendar(e){!e&&this.refs.checkAddLocal&&this.refs.checkAddLocal.setValue(!0),this.addingRemote.set(e)}onChangeAddLocal(e){!e&&this.refs.checkAddCalendar&&this.refs.checkAddCalendar.setValue(!0),this.addingLocal.set(e)}onChangeCalendar(e){let t=this.props.item;l.default.pluginManager.getPluginGCalendar().setCalendarForItem(t,e)}onChangeDocument(e){this.selectedDocument.set(o.a.getDocumentById(e))}renderCalendarSelector(){let{item:e,addOnSave:t}=this.props,{addingRemote:a}=this.state,n=l.default.pluginManager.getPluginGCalendar(),{calendars:i,selected:o}=n.getWriteableCalendarsForItem(e);!o&&t&&(o=l.default.pluginManager.getSetting(s.a.PluginID.GCalendar,s.a.PluginSettingsID.GCalendar.ExportCalendar));let c=r.default.classNames("c-foreground-faded",{disabled:!a});return i?d.a.createElement("div",{className:"detailsSection flexbox"},d.a.createElement("span",{className:c},"Calendar:"),d.a.createElement(S.a,{defaultValue:o,style:{marginLeft:16,height:32},ref:"selectCalendar",onChange:this.onChangeCalendar,disabled:!a},d.a.createElement("option",{value:""},"None"),i.map(e=>d.a.createElement("option",{key:e.id,value:e.id},e.summary)))):void 0}render(){var e,t=this.props,{addingLocal:a,addingRemote:n,canSyncDate:c,priority:m,isStarred:u,selectedDocument:h}=this.state,p=t.pane,g=t.item,w=this.state.maxWidth,N=r.default.parentTextForItem(g),D=t.children||(p?p.getSubItems(g,!0):[]),M=g.allowTextEditing(),P=M&&(g.canHaveNote()||g.hasNote()),c=c,I=l.default.pluginManager.getPlugin(s.a.PluginID.GCalendar),T=I&&I.isAvailable()&&I.isEnabled(),A=T&&(c||t.showCalendarButtons),L=g.hasPluginAttachment(s.a.PluginID.GCalendar);if(D.length>0){var F=0;e=[],D[0].getPadding(p);for(var R=0;R<D.length;R++){if(F++>5e3&&__infLoop&&__infLoop(F))throw new RangeError;var _=D[R];e.push(d.a.createElement(f.a,{key:_.id,item:_,pane:t.pane,padded:!0,allowDrag:!1}))}}var G=10,O=r.default.classNames("c-foreground-faded",{disabled:!a});let B;return t.selectDocument&&(B=o.a.getDocumentsArray()),d.a.createElement(b.a,i()({},t,{key:g.id+"_Edit",id:"contextMenuItemDetails",className:"flexbox flexvert",width:x,maxWidth:w,onEscape:this.onEscape,ref:"menu"}),d.a.createElement(C,{component:this,target:"buttonSave",tabIndex:G++}),N&&d.a.createElement("div",{className:"detailsSection flexbox itemContext c-foreground-faded"},d.a.createElement("div",{className:"c-foreground-faded"},"Parents"),d.a.createElement("div",null,N)),d.a.createElement("div",{className:"detailsSection flexbox noShrink"},d.a.createElement("div",{className:"c-foreground-faded"},"Item text"),d.a.createElement(f.a,{ref:"item",className:"detailsItem c-background c-border",item:g,onKeyDown:this.onKeyDownItem,selectIndex:t.selectIndex,showPriority:!0,shouldSave:!t.addOnSave,autocompleteMode:"all",tabIndex:G,inItemDetails:!0,allowDrag:!t.addOnSave,pane:p,editable:M})),t.selectDocument&&d.a.createElement("div",{className:"detailsSection flexbox"},d.a.createElement("div",{className:O},"Document"),d.a.createElement(S.a,{className:"f1",ref:"selectDocument",style:{height:32},defaultValue:h.id,onChange:this.onChangeDocument},B.map(e=>d.a.createElement("option",{key:e.id,value:e.id},e.text.get())))),t.addOnSave&&d.a.createElement("div",{className:"detailsSection flexbox"},d.a.createElement("div",{className:O},"Add to"),d.a.createElement(y.a,{autocompleteMode:"item",autocompleteItem:h.getRootItem(),height:33,placeholder:"Select item to add to",tabIndex:G++,ref:"addTo",pane:this.props.pane,disabled:!a,onKeyDown:this.onKeyDownItem})),P&&d.a.createElement("div",{className:"detailsSection flexbox"},d.a.createElement("div",{className:"c-foreground-faded"},"Note"),d.a.createElement(E.a,{className:"c-border",ref:"noteText",item:g,heightEmpty:34,heightValue:150,onValueSet:this.onNoteValueSet,onKeyDown:this.onKeyDownNote,tabIndex:G++})),d.a.createElement("div",{className:"detailsSection flexbox"},d.a.createElement("div",{className:"c-foreground-faded"},"Options"),d.a.createElement("span",{className:"itemDetailOption c-border pointer",onClick:this.onClickStar},d.a.createElement("span",{className:"c-foreground-super-faded"},"Star:"),d.a.createElement("i",{className:r.default.classNames("starButton icon-star c-foreground-super-faded",{selected:u})})),d.a.createElement("span",{className:"itemDetailOption c-border"},d.a.createElement("span",{className:"c-foreground-super-faded"},"Priority:"),d.a.createElement("span",{className:r.default.classNames("searchPriority searchP0",{selected:m===s.a.VMLIFlag.P0}),onClick:this.setPriority.bind(this,s.a.VMLIFlag.P0)}),d.a.createElement("span",{className:r.default.classNames("searchPriority searchP1",{selected:m===s.a.VMLIFlag.P1}),onClick:this.setPriority.bind(this,s.a.VMLIFlag.P1)}),d.a.createElement("span",{className:r.default.classNames("searchPriority searchP2",{selected:m===s.a.VMLIFlag.P2}),onClick:this.setPriority.bind(this,s.a.VMLIFlag.P2)}))),t.addOnSave&&(T||t.options)&&d.a.createElement("div",{className:"detailsSection"},A&&d.a.createElement(v.a,{key:"addLocal",initialChecked:a,ref:"checkAddLocal",onChange:this.onChangeAddLocal,disabled:!A,tabIndex:A?G++:void 0},"Add to document"),A&&d.a.createElement(v.a,{key:"addToCalendar",initialChecked:n,ref:"checkAddCalendar",onChange:this.onChangeAddToCalendar,disabled:!A,tabIndex:A?G++:void 0},"Add to Google Calendar"),t.options&&t.options.map(e=>d.a.createElement(v.a,{key:e.text,initialChecked:e.value,ref:e.text,tabIndex:G++},e.text))),(A||L)&&this.renderCalendarSelector(),e&&d.a.createElement("div",{className:"detailsSection"},d.a.createElement("div",{className:"c-foreground-faded"},"Subitems"),d.a.createElement("div",{className:"children c-border"},e)),t.addOnSave&&d.a.createElement("div",{className:"bottomRow flexbox"},d.a.createElement(k.a,{onClick:this.onEscape},"CANCEL"),d.a.createElement(k.a,{primary:!0,marginLeft:8,onClick:this.save,tabIndex:G++,ref:"buttonSave"},"SAVE")),d.a.createElement(C,{component:this,target:"item",tabIndex:G++}))}}},808:function(e,t,a){"use strict";a.r(t);var n=a(0),i=a(1),r=a(3),s=a(2),l=a.n(s),o=a(88),c=a(15),d=Object.assign||function(e){for(var t=0,a=1;a<arguments.length;a++){if(t++>5e3&&__infLoop&&__infLoop(t))throw new RangeError;var n=arguments[a];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e},m={},u=i.a.Modals;m[u.Lightbox]=a(765),m[u.Prompt]=a(766),m[u.Settings]=a(806),m[u.Alert]=a(767),m[u.Billing]=a(768),m[u.Confirm]=a(769),m[u.Options]=a(770),m[u.ExportData]=a(771),m[u.ImportData]=a(772),m[u.Backups]=a(773),m[u.ReportProblem]=a(774),m[u.DeleteAccount]=a(775),m[u.Invoices]=a(776),m[u.ShareDoc]=a(777),m[u.ReportBug]=a(778),m[u.EnterCode]=a(779),m[u.ImportMoodo]=a(780),m[u.ConfirmEncrypt]=a(781);var h=m,p=c.b.createClass({displayName:"ReactModals",componentDisplay:i.a.ComponentDisplay.Everywhere,getState:function(){return{modals:r.default.menus.modalStack}},onComponentError:function(e,t){r.default.menus.modalStack.clear()},renderModal:function(e){var t=e.id,a=h[t].default;try{n.default.PAssert(245,a,"Could not find modal with id "+t)}catch(i){n.default.reportError(i)}return l.a.createElement(a,d({key:e.id},e))},render:function(){for(var e=0,t=[],a=0;a<this.state.modals.length;a++){if(e++>5e3&&__infLoop&&__infLoop(e))throw new RangeError;t.push(this.renderModal(this.state.modals[a]))}var i=n.default.classNames("modals",{none:0===t.length});return l.a.createElement(o.CSSTransitionGroup,{className:i,transitionName:"modalTransition",transitionEnterTimeout:400,transitionLeaveTimeout:300},t)}});t.default=p},809:function(e,t,a){"use strict";a.r(t);var n=a(0),i=a(3),r=a(2),s=a.n(r),l=a(88),o=a(15),c={ReactAutocomplete:a(762),ReactContextMenuOverviewOptions:a(782),ReactContextMenuGmailSort:a(783),ReactContextMenuSearch:a(784),ReactContextMenuNameBoard:a(785),ReactContextMenuSelectGmailAccount:a(786),ReactContextMenuAddItem:a(787),ReactContextMenuCalendars:a(788),ReactContextMenuInsertLink:a(789),ReactContextMenuContactDetails:a(790),ReactNotePopup:a(791),ReactItemDetailsPopup:a(807),ReactContextMenuEmailDetails:a(792),ReactContextMenuItem:a(793),ReactContextMenuOnlineStatus:a(794),ReactContextMenuPanes:a(795),ReactContextMenuAuthorize:a(796),ReactContextMenuHelp:a(797),ReactContextMenuShare:a(798),ReactContextMenuOptions:a(799),ReactContextMenuAddPane:a(800),ReactContextMenuUpsell:a(801),ReactContextMenuDropZone:a(802),ReactContextMenuDate:a(803),ReactContextMenuDocumentPassword:a(804)};t.default=class extends o.a{getState(){return{contextMenus:i.default.menus.contextMenuStack,noFade:i.default.menus.contextMenuNoFade,isDragging:i.default.DragDrop.isVisible}}onComponentError(e,t){i.default.menus.contextMenuStack.clear()}onClickBackground(e){var t=i.default.menus.getTopContextMenu();t&&i.default.menus.closeContextMenu(t),n.default.preventDefault(e),n.default.stopPropagation(e)}render(){for(var e=0,t=this.state,a=[],i=0;i<t.contextMenus.length;i++){if(e++>5e3&&__infLoop&&__infLoop(e))throw new RangeError;var r=t.contextMenus[i];if(r.noBackdrop||a.push(s.a.createElement("div",{key:"backdrop_"+i,className:"contextMenusBackdrop",onMouseDown:this.onClickBackground})),r.fn)a.push(r.fn(r));else if(r.componentName){r.key=r.key||r.componentName,r.id=r.id||r.key;var o=c[r.componentName].default;a.push(s.a.createElement(o,r))}}var d=n.default.classNames("contextMenusReact",{open:a.length>0},{takeClick:a.length>0&&!r.noBackdrop},{none:0===a.length},{hideBackground:t.noFade});return s.a.createElement(l.CSSTransitionGroup,{className:d,transitionName:"contextMenuAnim",transitionEnterTimeout:150,transitionLeaveTimeout:200},a)}}}}]);
