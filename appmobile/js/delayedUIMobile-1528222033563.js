(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{74:function(e,t,n){"use strict";n.r(t);var a=n(0),o=n(1),i=n(2),s=n.n(i),r=n(13),l=n(25),c=r.a.createClass({displayName:"ReactContact",componentDisplay:o.a.ComponentDisplay.Everywhere,onClickNumber:function(e){l.a.hide(),a.default.openUrl(this.props.contact.link,e,!0)},onClickEmail:function(e){var t=a.default.vmMain.getDefaultEmailPlugin(),n=this.props.contact;if(t.isActive()){l.a.hide();var o={to:[{text:"",email:n.address}]};a.default.menus.openComposeEmail(t,void 0,void 0,o)}else a.default.openUrl(n.link,e,!0)},render:function(){var e=this,t=this.props.contact;return s.a.createElement("div",{className:"contactPreview"},s.a.createElement("div",{className:"contactName c-border"},t.text),t.phoneNumbers&&t.phoneNumbers.map(function(t){return s.a.createElement("div",{className:"contactRow contactPhone",key:t.number},s.a.createElement("i",{className:"contactButton icon-phone c-foreground-super-faded"}),s.a.createElement("span",{className:"contactNumber link",onClick:e.onClickNumber},t.number),s.a.createElement("span",{className:"phoneType c-foreground-faded"},t.type))}),t.emails&&t.emails.map(function(t){return s.a.createElement("div",{className:"contactRow contactEmail",key:t.address},s.a.createElement("i",{className:"icon-mail_outline contactButton c-foreground-super-faded"}),s.a.createElement("span",{className:"contactEmail link",onClick:e.onClickEmail},t.address))}))}}),u=n(35),d=r.a.createClass({displayName:"ReactContextMenuContactDetails",componentDisplay:o.a.ComponentDisplay.Everywhere,onClose:function(){a.default.menus.closeContextMenu("ReactContextMenuContactDetails")},render:function(){return s.a.createElement(u.a,{key:"contextMenuContactDetails",id:"contextMenuContactDetails",element:this.props.element,position:this.props.position},s.a.createElement(c,{contact:this.props.contact,onClose:this.onClose}))}});t.default=d},75:function(e,t,n){"use strict";n.r(t);var a=n(0),o=n(1),i=n(2),s=n.n(i),r=n(13),l=n(3),c=n(4),u=(n(12),n(19)),d=n(7),m=n(64),h=r.a.createClass({displayName:"ReactNoteEditor",componentDisplay:o.a.ComponentDisplay.Everywhere,init:function(){var e=this.props,t=e.item.hasNote()&&e.item.getNote(),n=t?t.getParsedText():void 0;this.createObservables({hasValue:!!n})},onUnmount:function(){clearTimeout(this._noteUpdateTimeout),this._noteUpdateTimeout=void 0,this._saveNote(),l.a.closeKeyboard()},getValue:function(){return this.refs.noteText.getValue()},_saveNote:function(){d.a.beginAction(),a.default.vmMain.beginUpdateItems();var e=this.props.item,t=e.hasNote()&&e.getNote(),n=this.refs.noteText.getValue();!t&&n&&(t=e.createNote()),t&&(t.setText(n,!0,ChangeType.Local),n||e.setNote(void 0,ChangeType.Local)),a.default.vmMain.commitUpdateItems(),d.a.endAction()},onChange:function(){var e=this.refs.noteText.getValue().length>0;e!==this.hasValue.get()&&(this.hasValue.set(e),e&&this.props.onValueSet&&requestAnimationFrame(this.props.onValueSet,0)),clearTimeout(this._noteUpdateTimeout),this._noteUpdateTimeout=setTimeout(this._saveNote,8e3)},render:function(){var e=this.props,t=u.a.fontSize(),n=e.item.hasNote()&&e.item.getNote(),a=n?n.getParsedText():void 0,o=n?void 0:"Add note",i=this.state.hasValue?e.heightValue:e.heightEmpty,r=!e.item.canHaveNote();return s.a.createElement(m.a,{ref:"noteText",className:e.className,value:a,placeholder:o,focused:e.focused,onChange:this.onChange,onKeyDown:e.onKeyDown,onKeyPress:e.onKeyPress,selectionStart:e.selectionStart,selectionEnd:e.selectionEnd,fontSize:t,margin:0,height:i,tabIndex:e.tabIndex,richText:!!e.richText&&!!e.goFullscreen,goFullscreen:e.richText&&e.goFullscreen,onClickClose:e.onClickClose,isReadOnly:r})}}),p=n(35),f=Object.assign||function(e){for(var t=0,n=1;n<arguments.length;n++){if(t++>1500&&__infLoop&&__infLoop(t))throw new RangeError;var a=arguments[n];for(var o in a)Object.prototype.hasOwnProperty.call(a,o)&&(e[o]=a[o])}return e},g=r.a.createClass({displayName:"ReactNotePopup",componentDisplay:o.a.ComponentDisplay.Everywhere,init:function(){this.createObservables({isFullscreen:!1})},getState:function(){return{maxWidth:this.props.pane.getWidth()-20}},componentDidMount:function(){0},onResize:function(){this.updateState(),setTimeout(function(){this.refs.menu.updateState()}.bind(this),300)},onUnmount:function(){var e=this.props.item;l.a.selectIndex(this.props.index-1,e.getParsedText().length),a.default.keyboardToolbar.show(o.a.KeyboardToolbarMode.Item)},onKeyPress:function(e){c.a.getKeyCode(e)!==KeyCode.Enter||!e.shiftKey||e.altKey||e.ctrlKey||e.metaKey||(a.default.menus.closeContextMenu(),e.preventDefault(),e.stopPropagation())},onClickClose:function(){a.default.menus.closeContextMenu()},onGoFullscreen:function(e){console.log(e),this.isFullscreen.set(e)},render:function(){var e=this.props,t=this.state,n=this.state.maxWidth,a=e.bottom,o={overflow:t.isFullscreen?"visible":void 0};return s.a.createElement(p.a,f({},this.props,{key:e.note.id+"_Note",id:"contextMenuNote",width:600,maxWidth:n,bottom:a,style:o,ref:"menu"}),s.a.createElement(h,{ref:"noteText",item:e.item,focused:!0,onKeyPress:this.onKeyPress,selectionStart:e.selectionStart,selectionEnd:e.selectionEnd,richText:!0,goFullscreen:this.onGoFullscreen,onClickClose:this.onClickClose}))}});t.default=g},76:function(e,t,n){"use strict";n.r(t);var a=n(0),o=n(1),i=n(2),s=n.n(i),r=n(13),l=(n(33),n(51)),c=n(10),u=n(35),d=(n(26),Object.assign||function(e){for(var t=0,n=1;n<arguments.length;n++){if(t++>1500&&__infLoop&&__infLoop(t))throw new RangeError;var a=arguments[n];for(var o in a)Object.prototype.hasOwnProperty.call(a,o)&&(e[o]=a[o])}return e}),m=r.a.createClass({displayName:"ReactContextMenuMobileFilter",componentDisplay:o.a.ComponentDisplay.Mobile,init:function(){this.listenTo(this.props.pane.search.onChanged)},getState:function(){for(var e=0,t=this.props.pane.search,n={hasFilter:!1},a=0;a<t.filters.length;a++){if(e++>1500&&__infLoop&&__infLoop(e))throw new RangeError;var o=t.filters[a];n[o.name]=o.value,0!==o.value&&(n.hasFilter=!0)}return n},onClickClear:function(){for(var e=0,t=this.props.pane.search,n=0;n<t.filters.length;n++){if(e++>1500&&__infLoop&&__infLoop(e))throw new RangeError;var a=t.filters[n];0!==this.state[a.name]&&t.setFilter(a.name,0)}},onClickFilter:function(e,t){var n=this.props.pane.search;n.getFilterValue(e.name)===t&&(t=0),n.setFilter(e.name,t)},renderSearchButton:function(e,t){var n=a.default.classNames("searchFilterButton c-border",e.icon,{yes:t>0},{no:t<0},{selected:t===this.state[e.name]});return s.a.createElement(l.a,{className:n,onClick:this.onClickFilter.bind(this,e,t)})},renderSearchFilter:function(e){for(var t=0,n=(e.text||e.name).capitalize(),a=n.length-1;a>=1;a--){if(t++>1500&&__infLoop&&__infLoop(t))throw new RangeError;n[a]===n[a].toUpperCase()&&(n=n.substr(0,a)+" "+n.substr(a))}return s.a.createElement("div",{key:e.name,className:"searchFilter flexbox"},s.a.createElement("div",{className:"menuItemText f1"},n),this.renderSearchButton(e,1),!1!==e.canBeNegated?this.renderSearchButton(e,-1):s.a.createElement("div",{className:"searchFilterButton"}))},renderSearchPriorityButton:function(e,t){var n=a.default.classNames("searchPriorityButton c-border",{p0:t===VMLIFlag.P0},{p1:t===VMLIFlag.P1},{p2:t===VMLIFlag.P2},{selected:t===this.state[e.name]});return s.a.createElement(l.a,{className:n,onClick:this.onClickFilter.bind(this,e,t)})},renderSearchPriority:function(e){return s.a.createElement("div",{key:e.name,className:"searchPriority flexbox"},this.renderSearchPriorityButton(e,VMLIFlag.P0),this.renderSearchPriorityButton(e,VMLIFlag.P1),this.renderSearchPriorityButton(e,VMLIFlag.P2))},render:function(){for(var e,t=0,n=this.props,a=n.pane.search,o=[],i=!0,r=0;r<a.filters.length;r++){if(t++>1500&&__infLoop&&__infLoop(t))throw new RangeError;var l=a.filters[r];l.enabled.get()&&(l.isOption&&i&&(o.push(s.a.createElement("hr",{key:"hrOption"})),i=!1),l.icon?o.push(this.renderSearchFilter(l)):"priority"===l.name&&(e=this.renderSearchPriority(l)))}return s.a.createElement(u.a,d({},n,{key:"contextMenuMobileFilter",id:"contextMenuMobileFilter"}),s.a.createElement(c.a,{icon:"icon-close",display:"block",enabled:this.state.hasFilter,onClick:this.onClickClear},"Clear filters"),s.a.createElement("div",{className:"searchFilter filterTitle flexbox c-foreground-very-faded c-border"},s.a.createElement("div",{className:"menuItemText f1"},"Filter"),s.a.createElement("div",null,"Show"),s.a.createElement("div",null,"Hide")),o,e&&s.a.createElement("div",{className:"searchFilter filterTitle c-foreground-very-faded c-border"},"Minimum Priority"),e)}});t.default=m},77:function(e,t,n){"use strict";n.r(t);var a=n(0),o=n(1),i=n(2),s=n.n(i),r=n(13),l=n(37),c=n(35),u=n(10),d=Object.assign||function(e){for(var t=0,n=1;n<arguments.length;n++){if(t++>1500&&__infLoop&&__infLoop(t))throw new RangeError;var a=arguments[n];for(var o in a)Object.prototype.hasOwnProperty.call(a,o)&&(e[o]=a[o])}return e},m=r.a.createClass({displayName:"ReactContextMenuAuthorize",componentDisplay:o.a.ComponentDisplay.Everywhere,onClickEnable:function(){l.a.refresh(),l.a.toggleOfflineFeatures(!0,this.onEnable)},onEnable:function(e){e&&a.default.menus.closeContextMenu()},render:function(){return s.a.createElement(c.a,d({},this.props,{key:"contextMenuAuthorize",id:"contextMenuAuthorize"}),s.a.createElement("div",null,this.props.message),s.a.createElement("div",{className:"center"},s.a.createElement(u.a,{primary:!0,raised:!0,onClick:this.onClickEnable},"ENABLE")))}});t.default=m},78:function(e,t,n){"use strict";n.r(t);var a=n(0),o=n(1),i=(n(4),n(7),n(2)),s=n.n(i),r=n(13),l=(n(25),n(33),n(51)),c=n(14),u=n(12),d=n(3),m=n(49),h=n(10),p=n(35),f=n(26),g=Object.assign||function(e){for(var t=0,n=1;n<arguments.length;n++){if(t++>1500&&__infLoop&&__infLoop(t))throw new RangeError;var a=arguments[n];for(var o in a)Object.prototype.hasOwnProperty.call(a,o)&&(e[o]=a[o])}return e},v=r.a.createClass({displayName:"ReactContextMenuDropBucket",componentDisplay:o.a.ComponentDisplay.Everywhere,init:function(){this.createObservables({draggingItem:void 0})},componentDidMount:function(){u.a.listen("droppedItem",this.onItemDropped)},onUnmount:function(){u.a.unlisten("droppedItem",this.onItemDropped)},getState:function(){return{items:a.default.vmMain.dropBucket.getItems(),isDragging:c.default.isVisible}},createEvent:function(e,t){var n=a.default.findChild(t.target,"item")||a.default.findParent(t.target,"item",5);return{fromDropBucket:!0,startSrc:n,target:n,clientX:t.clientX,clientY:t.clientY,eventX:t.eventX||t.clientX,eventY:t.eventY||t.clientY,pageX:t.pageX,pageY:t.pageY,preventDefault:a.default.emptyFn,stopPropagation:a.default.emptyFn,stopImmediatePropagation:a.default.emptyFn,pane:e.pane}},onMouseDown:function(e,t){if(e.item){var n=this.createEvent(e,t);c.default.startDragItem=e.item,e.item.dragStart(n),e.item.dragMove(n)}},onClickItem:function(e,t){a.default.hasClass(t.target,"fancyButton")},onMouseMove:function(e,t){if(e.item){var n=this.createEvent(e,t);d.a.onMouseMoveDocument(n),e.item.onMove(n),this.draggingItem.set(e.item)}},onMouseUp:function(e,t){if(e.item){var n=this.createEvent(e,t);e.item.onEnd(n),this.draggingItem.set(void 0),0===this.state.items.length&&a.default.menus.closeContextMenu()}},onCloseButton:function(e,t){e.item&&a.default.vmMain.dropBucket.hasItemEntry(e.item)&&a.default.vmMain.dropBucket.removeItemEntry(e.item),a.default.vmMain.dropBucket.hasTextEntry(e.id)&&a.default.vmMain.dropBucket.consumeTextEntry(e.id),t.stopPropagation()},onItemDropped:function(e){a.default.vmMain.dropBucket.hasItemEntry(e)&&a.default.vmMain.dropBucket.removeItemEntry(e),a.default.vmMain.dropBucket.hasTextEntry(e.id)&&a.default.vmMain.dropBucket.removeTextEntry(e.id)},_renderBucketItem:function(e,t){return e.item?s.a.createElement(m.a,{item:e.item,index:t,allowDrag:!0,inAutocomplete:!0}):s.a.createElement(l.a,null,e.text)},render:function(){for(var e=0,t=this.props,n=this.state,o=[],i=0;i<n.items.length;i++){if(e++>1500&&__infLoop&&__infLoop(e))throw new RangeError;var r=n.items[i],c=r.item,u=r.id,d=a.default.classNames({dragging:n.draggingItem===c});0,o.push(s.a.createElement(f.a,{key:u,className:d,onClick:this.onClickItem.bind(this,r),clickCloses:!1,hasButtons:!0,hoverEffects:!0},s.a.createElement(l.a,{style:{width:"100%",overflow:"hidden"},onMouseDown:this.onMouseDown.bind(this,r),onMouseMove:this.onMouseMove.bind(this,r),onMouseUp:this.onMouseUp.bind(this,r)},this._renderBucketItem(r,i)),s.a.createElement(h.a,{icon:"icon-close",width:"48px",iconSize:20,onClick:this.onCloseButton.bind(this,r)})))}return s.a.createElement(p.a,g({},t,{key:"contextMenuDropBucket",id:"contextMenuDropBucket",supportArrows:!0}),o)}});t.default=v},79:function(e,t,n){"use strict";n.r(t);var a=n(0),o=n(1),i=n(2),s=n.n(i),r=n(13),l=(n(33),n(51),n(10)),c=n(35),u=(n(26),Object.assign||function(e){for(var t=0,n=1;n<arguments.length;n++){if(t++>1500&&__infLoop&&__infLoop(t))throw new RangeError;var a=arguments[n];for(var o in a)Object.prototype.hasOwnProperty.call(a,o)&&(e[o]=a[o])}return e}),d=r.a.createClass({displayName:"ReactContextMenuMobileOpenLink",componentDisplay:o.a.ComponentDisplay.Mobile,onClickOpen:function(){this.props.onClick(),a.default.menus.closeContextMenu()},render:function(){var e=this.props;return s.a.createElement(c.a,u({},e,{key:"contextMenuMobileOpenLink",id:"contextMenuMobileOpenLink",className:"flexbox"}),s.a.createElement("div",{className:"f1"},e.html),s.a.createElement(l.a,{primary:!0,onClick:this.onClickOpen},"OPEN"))}});t.default=d},80:function(e,t,n){"use strict";n.r(t);var a=n(0),o=n(1),i=n(2),s=n.n(i),r=n(13),l=(n(37),n(24)),c=n(44),u=n(35),d=n(10),m=Object.assign||function(e){for(var t=0,n=1;n<arguments.length;n++){if(t++>1500&&__infLoop&&__infLoop(t))throw new RangeError;var a=arguments[n];for(var o in a)Object.prototype.hasOwnProperty.call(a,o)&&(e[o]=a[o])}return e},h=r.a.createClass({displayName:"ReactContextMenuInsertLink",componentDisplay:o.a.ComponentDisplay.Everywhere,init:function(){var e=this.props.text,t=o.a.Regexp.MDLink,n=new RegExp(/\S{2,}\.[^0-9.\s]{2,}\S*$/);t.lastIndex=0;var a=t.exec(e);a?(this.text=a[2],this.link=a[3]):null===n.exec(e)?this.text=e:this.link=e},getHotkeys:function(){return[l.a.create(KeyCode.Enter,!0,o.a.Primary.Either,o.a.Shift.Either,this.onClick),l.a.create(KeyCode.Escape,!0,o.a.Primary.Either,o.a.Shift.Either,this.close)]},componentDidMount:function(){var e;(e=this.link||!this.text?this.refs.text:this.refs.link).focus(),e.selectAll()},close:function(){a.default.menus.closeContextMenu("ReactContextMenuInsertLink")},onClick:function(){var e=this.refs.text.getValue(),t=this.refs.link.getValue();e&&t&&a.default.menus.isContextMenuOpen("ReactContextMenuInsertLink")&&(this.close(),t.startsWith("http")||(t="http://"+t),this.props.onInsertLink({text:e,url:t}))},render:function(){return s.a.createElement(u.a,m({},this.props,{key:"contextMenuInsertLink",id:"contextMenuInsertLink"}),s.a.createElement("div",{className:"flexbox"},s.a.createElement("span",null,"Text"),s.a.createElement(c.a,{className:"f1",ref:"text",height:28,width:260,value:this.text||this.link,onEnter:this.onClick,onEscape:this.close})),s.a.createElement("div",{className:"flexbox"},s.a.createElement("span",null,"Link"),s.a.createElement(c.a,{className:"f1",ref:"link",height:28,width:260,value:this.link,onEnter:this.onClick,onEscape:this.close})),s.a.createElement("div",{className:"flexbox"},s.a.createElement(d.a,{primary:!0,raised:!0,onClick:this.onClick},"INSERT")))}});t.default=h},81:function(e,t,n){"use strict";n.r(t);var a=n(0),o=n(1),i=n(2),s=n.n(i),r=n(13),l=n(35),c=n(26),u=n(53),d=Object.assign||function(e){for(var t=0,n=1;n<arguments.length;n++){if(t++>1500&&__infLoop&&__infLoop(t))throw new RangeError;var a=arguments[n];for(var o in a)Object.prototype.hasOwnProperty.call(a,o)&&(e[o]=a[o])}return e},m=r.a.createClass({displayName:"ReactContextMenuSelectGmailAccount",componentDisplay:o.a.ComponentDisplay.Everywhere,addPane:function(e){this.props.onSelected(e)},render:function(){var e=this,t=this.props,n=a.default.vmMain.pluginManager.getPlugin(PluginID.Gmail),o=n.getSyncAccounts();return s.a.createElement(l.a,d({},t,{key:"contextMenuTitle",id:"contextMenuTitle",maxHeight:400}),t.showHeader&&s.a.createElement(u.a,{topHeader:!0},"Open Gmail Account"),o.map(function(t){var a=n.getDefaultDisplayItem(t);return s.a.createElement(c.a,{key:t,onClick:e.addPane.bind(e,a)},t)}))}});t.default=m},82:function(e,t,n){"use strict";n.r(t);var a=n(0),o=n(1),i=n(2),s=n.n(i),r=n(48),l=n(13),c=n(24),u=n(10),d=n(44),m=n(3),h=n(41),p=l.a.createClass({displayName:"FancyModal",componentDisplay:o.a.ComponentDisplay.Everywhere,close:function(e){m.a.closeKeyboard(),a.default.menus.closeModalNew(this.props.modalID,e)},onCloseButton:function(e){this.props.onCloseButton?this.props.onCloseButton():this.close()},onEscapeKey:function(){this.close()},render:function(){var e,t,n=this.props,o=this.getChildByKey("sidebar"),i=this.getChildByKey("content"),r=this.getChildByKey("buttons"),l={maxHeight:n.height?"85%":null},c=a.default.classNames("fancyModal c-bg-app popup c-shadow-popup",n.className,{"flexbox flexvert":!1},{small:n.small},{hasSidebar:!!o},{hasTitle:!!n.title},{hasButtons:!!r}),d=a.default.classNames("fancyModalWrapper",{"small flexbox":n.small}),m=a.default.classNames("fancyModalContent c-border c-background",{flex1:!1},i.props.className),p=a.default.topBarHeight,f=s.a.createElement(h.a,{className:m,scrollable:n.scrollable},i.props.children||i);return n.confirmIcon?e=s.a.createElement(u.a,{className:"fancyModalMobileConfirm",icon:n.confirmIcon,iconSize:20,width:p,height:p,onClick:n.onConfirm}):n.confirmText&&(e=s.a.createElement(u.a,{className:"fancyModalMobileConfirm",width:n.topButtonWidth,fontSize:14,height:p,onClick:n.onConfirm},n.confirmText)),!1!==n.closeButton&&(t=a.default.isString(n.closeButton)?s.a.createElement(u.a,{className:"fancyModalClose",width:n.topButtonWidth,fontSize:14,height:p,onClick:this.onCloseButton},n.closeButton):s.a.createElement(u.a,{className:"fancyModalClose",icon:"icon-close",iconSize:20,width:p,height:p,onClick:this.onCloseButton})),s.a.createElement("span",{className:d},s.a.createElement("div",{className:c,style:l,id:n.id},s.a.createElement("div",{className:"flexbox"},t,s.a.createElement("div",{className:"fancyModalTitle f1"},n.title),e),f,r&&s.a.createElement("div",{className:a.default.classNames("fancyModalButtons",{border:n.buttonsBorder})},r)))}}),f=Object.assign||function(e){for(var t=0,n=1;n<arguments.length;n++){if(t++>1500&&__infLoop&&__infLoop(t))throw new RangeError;var a=arguments[n];for(var o in a)Object.prototype.hasOwnProperty.call(a,o)&&(e[o]=a[o])}return e},g=l.a.createClass({displayName:"ReactModalPrompt",componentDisplay:o.a.ComponentDisplay.Everywhere,getHotkeys:function(){return[c.a.create(KeyCode.Enter,!0,o.a.Primary.Either,o.a.Shift.Either,this.onClickYes)]},onClickYes:function(){this.refs.modal.close(this.refs.input.getValue())},onClickNo:function(){this.refs.modal.close(!1)},render:function(){return s.a.createElement(p,f({},this.props,{id:"modalPrompt",title:this.props.text,small:!0,scrollable:!1,modalID:Modals.Prompt,ref:"modal"}),s.a.createElement("div",{key:"content"},s.a.createElement(d.a,{focused:!0,ref:"input"})),s.a.createElement("div",{key:"buttons"},s.a.createElement(u.a,{primary:!0,width:100,onClick:this.onClickYes},"OK"),s.a.createElement(u.a,{width:100,onClick:this.onClickNo},"NO")))}}),v=n(21),C=n(56),E=Object.assign||function(e){for(var t=0,n=1;n<arguments.length;n++){if(t++>1500&&__infLoop&&__infLoop(t))throw new RangeError;var a=arguments[n];for(var o in a)Object.prototype.hasOwnProperty.call(a,o)&&(e[o]=a[o])}return e},y=l.a.createClass({displayName:"ReactModalEmailReply",componentDisplay:o.a.ComponentDisplay.Everywhere,componentDidMount:function(){var e=this.props,t=this.refs.compose;setTimeout(function(){e.responseMode===o.a.EmailResponseMode.Forward?t.focusTo():t.focusBody()},250)},onUnmount:function(){v.a.setMessageResponseMode(this.props.inReplyToMessage.id,o.a.EmailResponseMode.None)},onClickSend:function(){this.refs.compose.send(),this.refs.modal.close()},onComposeClose:function(){var e=this.refs.modal;e&&e.close()},onCloseButton:function(){this.refs.compose.discard()},_getModalTitle:function(e){var t;return e===o.a.EmailResponseMode.Reply?t="Reply":e===o.a.EmailResponseMode.ReplyAll?t="Reply All":e===o.a.EmailResponseMode.Forward?t="Forward":e===o.a.EmailResponseMode.Other&&(t="Compose"),t},render:function(){var e=this.props,t=e.responseMode,n=this._getModalTitle(t);return s.a.createElement(p,E({},e,{id:"modalEmailReply",title:n,modalID:Modals.EmailReply,ref:"modal",confirmIcon:"icon-send",onConfirm:this.onClickSend,onCloseButton:this.onCloseButton}),s.a.createElement(C.a,{key:"content",threadAttach:e.threadAttach,message:e.message,ref:"compose",onClose:this.onComposeClose,responseMode:this.state.responseMode}))}}),k=l.a.createClass({displayName:"ReactModalAlert",componentDisplay:o.a.ComponentDisplay.Everywhere,getHotkeys:function(){return[c.a.create(KeyCode.Enter,!0,o.a.Primary.Either,o.a.Shift.Either,this.onClickButton)]},onClickButton:function(){this.refs.modal.close()},render:function(){var e=this.props.actionText||"OKAY";return s.a.createElement(p,{id:"modalAlert",closeButton:!1,small:!0,backdropClose:!1,scrollable:!1,modalID:Modals.Alert,ref:"modal"},s.a.createElement("div",{key:"content",dangerouslySetInnerHTML:{__html:this.props.text}}),s.a.createElement("div",{key:"buttons"},s.a.createElement(u.a,{primary:!0,onClick:this.onClickButton},e)))}}),b=Object.assign||function(e){for(var t=0,n=1;n<arguments.length;n++){if(t++>1500&&__infLoop&&__infLoop(t))throw new RangeError;var a=arguments[n];for(var o in a)Object.prototype.hasOwnProperty.call(a,o)&&(e[o]=a[o])}return e},M=l.a.createClass({displayName:"ReactModalConfirm",componentDisplay:o.a.ComponentDisplay.Everywhere,getHotkeys:function(){return[c.a.create(KeyCode.Escape,!0,o.a.Primary.Either,o.a.Shift.Either,this.onClickNo),c.a.create(KeyCode.N,!0,o.a.Primary.Either,o.a.Shift.Either,this.onClickNo),c.a.create(KeyCode.Enter,!0,o.a.Primary.Either,o.a.Shift.Either,this.onClickYes),c.a.create(KeyCode.Y,!0,o.a.Primary.Either,o.a.Shift.Either,this.onClickYes)]},onClickYes:function(){this.refs.modal.close(!0)},onClickNo:function(){this.refs.modal.close(!1)},render:function(){return s.a.createElement(p,b({},this.props,{id:"modalConfirm",small:!0,backdropClose:!1,scrollable:!1,closeButton:!1,modalID:Modals.Confirm,ref:"modal"}),s.a.createElement("div",{key:"content"},this.props.text),s.a.createElement("div",{key:"buttons"},s.a.createElement(u.a,{primary:!0,width:100,onClick:this.onClickYes},"YES"),s.a.createElement(u.a,{width:100,onClick:this.onClickNo},"NO")))}}),N=n(16),w=l.a.createClass({displayName:"ReactModalSharing",componentDisplay:o.a.ComponentDisplay.Everywhere,init:function(){var e=this.props.doc;this.helpID="NewFile",this.createObservables({isLoading:e.hasDriveBacking(),permissions:[],errorName:!1,errorInvite:!1}),this.isCreating=!e.hasDriveBacking(),this.isSaving=!1,this.permissionsRemove=[],this.listenToSetting(Settings.closedHelps),e.hasDriveBacking()&&e.listPermissions(this.onListPermissions)},getState:function(){return{shouldShowHelp:a.default.vmMain.shouldShowHelp(this.helpID)}},onClosing:function(e){this.closeCallback&&(this.closeCallback(e),this.closeCallback=void 0)},onListPermissions:function(e){if(e){for(var t=0,n=[],o=0;o<e.length;++o){if(t++>1500&&__infLoop&&__infLoop(t))throw new RangeError;var i=e[o];i.emailAddress!==a.default.getUserIdentifier()&&(i.onRemove=this.onClickRemovePermission.bind(this,i),"anyone"!==i.id&&(i.emailAddress||("owner"===i.role?i.emailAddress="Owner":i.emailAddress=""),"owner"===i.role?n.splice(0,0,i):n.push(i)),i.emailDisplay="("+i.emailAddress+")")}this.permissions.set(n,!1),this.isLoading.set(!1)}},onClickRemovePermission:function(e){this.permissionsRemove.push(e),this.permissions.remove(e),a.default.sendEvent("Menu","SharingRemoveUser")},onClickGotIt:function(){a.default.vmMain.closeHelp(this.helpID)},onClickDelete:function(){a.default.sendEvent("Menu","SharingDelete");var e=this.props.doc;a.default.menus.confirm("Are you sure you want to delete the file?",function(t){a.default.vmMain.docManager.deleteDoc(e.id,function(e){log("File Delete Response: ",e),e||a.default.toasts.pushMessage({text:"Unable to delete file on the remote server."})}),a.default.menus.closeModalNew(Modals.ShareDoc,!1)})},onClickCancel:function(){a.default.menus.closeModalNew(Modals.ShareDoc,!1),a.default.sendEvent("Menu","SharingCancel")},create:function(e){var t=this.props.doc;this.justCreated=!0,this.isSaving=!0;var n=this.refs.name.getValue().trim();t.rename(n,function(e){try{a.default.PAssert(1250,e,"Rename during create must be successful")}catch(e){a.default.reportError(e)}}),N.default.createAndSetupDocument(t,!1,function(e){e&&!e.error?(this.isSaving=!1,this.isCreating=!1,this.onClickSave()):this.errorName.set("Error: Unable to create new file.")}.bind(this))},onClickSave:function(){if(!this.isSaving){var e=0,t=0;a.default.sendEvent("Menu","SharingSave");this.state;var n=this.props.doc;if(this.isSaving&&!this.justCreated)return;if(!this.checkName())return;if(this.isCreating)return this.create(),!0;this.rename();for(var o=n.isShared(),i=0,s=function(e){e?--i<=0&&(a.default.menus.closeModalNew(Modals.ShareDoc,!1),n.isOwned()&&n.isOpen()&&a.default.vmMain.pluginManager.onDocumentShared(o)):(this.errorInvite.set("Some people could not be invited."),this.isSaving=!1)}.bind(this),r=this.refs.invite.getTokens(),l=0;l<r.length;l++){if(e++>1500&&__infLoop&&__infLoop(e))throw new RangeError;var c=r[l];i++,n.insertPermission(c.email,s.bind(this))}for(l=0;l<this.permissionsRemove.length;l++){if(t++>1500&&__infLoop&&__infLoop(t))throw new RangeError;var u=this.permissionsRemove[l];i++,n.deletePermission(u.id,s.bind(this))}if(this.errorInvite.get()||this.errorName.get())return;if(0!==i)return this.isSaving=!0,!0;a.default.menus.closeModalNew(Modals.ShareDoc,!0)}},checkName:function(){var e=this.refs.name.getValue().trim();return e.length>0&&e.length<255?(this.errorName.set(!1),!0):(this.errorName.set("Error: File name must be >0 and <255 characters."),!1)},rename:function(){var e=this.refs.name.getValue().trim(),t=this.props.doc;e!==t.getTitle()&&t.rename(e,function(e){e||this.errorName("Error: Unable to update name on remote server.")}.bind(this))},render:function(){var e=this.props,t=this.state,n=e.doc,o="https://www.moo.do/web/#file="+e.doc.id+"&sinfo="+e.doc.generateShareInfo();return s.a.createElement(p,{id:"shareDoc",modalID:Modals.ShareDoc,ref:"modal",title:"Share File",width:550,height:600},s.a.createElement("div",{key:"content"},this.isCreating&&t.shouldShowHelp&&s.a.createElement("div",{className:"inlineHelp c-bg-faded c-border-heavy"},s.a.createElement("div",null,s.a.createElement("div",{className:"inlineHelpTitle"},"HELP"),s.a.createElement("div",null,"A File contains all of your projects and tasks. Each File can be shared with a different set of people to collaborate with your friends or your team. If you are not collaborating with anyone, you likely don't want to use this feature.")),s.a.createElement("div",{className:"inlineHelpGotIt flexbox flexvert"},s.a.createElement(u.a,{primary:!0,onClick:this.onClickGotIt},"GOT IT"))),s.a.createElement("div",{className:"detailsSection flexbox itemContext c-foreground-faded"},s.a.createElement("div",{className:"c-foreground-faded"},"Name"),s.a.createElement(d.a,{value:e.doc.getTitle(),ref:"name",focused:this.isCreating})),t.errorName&&s.a.createElement("span",{className:"error"},t.errorName),!this.isCreating&&s.a.createElement("div",{className:"detailsSection flexbox itemContext c-foreground-faded"},s.a.createElement("div",{className:"c-foreground-faded"},"Share Link"),s.a.createElement(d.a,{value:o})),!this.isCreating&&(t.isLoading||t.permissions.length>0)&&s.a.createElement("div",{className:"modal-group"},s.a.createElement("div",{className:"mat-subheader"},s.a.createElement("i",{className:"icon-user"})," Who has access"),s.a.createElement("ul",{className:a.default.classNames("shareAccess c-border",{loading:t.isLoading})},t.permissions.map(function(e){return s.a.createElement("li",{key:e.emailAddress,className:"sharePerson flexbox"},s.a.createElement("span",{className:"shareDetails f1"},"owner"===e.role&&s.a.createElement("i",{className:"icon-star",tooltip:"Owner"}),s.a.createElement("span",null,e.name),s.a.createElement("span",{className:"c-foreground-faded",style:{marginLeft:16}},e.emailAddress)),n.isOwned()&&s.a.createElement(u.a,{icon:"icon-close",onClick:e.onRemove}))}))),n.isOwned()&&s.a.createElement("div",{className:"modal-group"},s.a.createElement("div",{className:"mat-subheader"},"Invite to share"),t.errorInvite&&s.a.createElement("div",{className:"error"},t.errorInvite),s.a.createElement(d.a,{id:"inputShareInvite",placeholder:"Email address",autocompleteMode:"email",ref:"invite"})),!n.isOwned()&&s.a.createElement("div",{className:"modal-group"},s.a.createElement("div",{className:"shareNotOwned gd"},"Only the creator of this file can share it with others. Please contact the creator to share it with others.")),s.a.createElement("div",{className:"scrollPad"})),s.a.createElement("div",{key:"buttons"},n.isOwned()&&s.a.createElement("div",{className:"flexbox",style:{padding:"0 16px"}},!this.isCreating&&s.a.createElement(u.a,{raised:!0,cancel:!0,id:"shareDelete",onClick:this.onClickDelete},"DELETE"),s.a.createElement("div",{className:"f1"}),s.a.createElement(u.a,{id:"shareCancel",raised:!0,onClick:this.onClickCancel},"CANCEL"),s.a.createElement(u.a,{id:"shareSave",raised:!0,primary:!0,marginLeft:16,onClick:this.onClickSave},"SAVE")),!n.isOwned()&&s.a.createElement(u.a,{id:"shareOkay",raised:!0,onClick:this.onClickCancel},"OKAY")))}}),x=n(17),S=(n(4),n(8)),D=l.a.createClass({displayName:"FancyCheckbox",componentDisplay:o.a.ComponentDisplay.Everywhere,init:function(){var e={animCheck:!1};this.props.checked instanceof S.a?(this.checked=this.props.checked,this.trackObservable=!0):e.checked=this.props.checked||this.props.initialChecked,this.createObservables(e)},getState:function(){return this.trackObservable?{checked:this.checked}:{}},onClick:function(){var e=this.props;if(!e.disabled){this.animCheck.set(!0),setTimeout(function(){this.animCheck.set(!1)}.bind(this),300);var t=!this.checked.get();this.trackObservable&&!e.setObs||this.checked.set(t),e.onChange&&e.onChange(t)}e.onClick&&e.onClick(t)},getValue:function(){return this.checked.get()},setValue:function(e){return this.checked.set(e)},resetValue:function(){void 0!==this.props.initialChecked&&this.checked.set(this.props.initialChecked)},onKeyDown:function(e){e.keyCode===KeyCode.Enter&&this.onClick(e)},onChangeInput:function(){},componentWillReceiveProps:function(e){this.trackObservable||void 0===e.checked||e.checked===this.state.checked||this.checked.set(e.checked)},getElement:function(){return this.refs.element},getChildren:function(){return this.props.children},render:function(){var e=this.props,t=this.state.checked,n={background:t&&e.checkedColor,width:e.size,height:e.size,lineHeight:e.size&&e.size-1+"px",fontSize:e.size&&e.size-4+"px"};this.isTrackingObservable&&(t=t.get());var o=a.default.classNames("fancyCheckbox",{flexbox:!0},{checked:t},{disabled:e.disabled},{animate:this.state.animCheck},{radio:e.radio},{error:e.error},{noBG:e.noBG},e.className),i=a.default.classNames("fancyCheckboxText",{f1:!0}),r=a.default.classNames("fancyCheckboxCheck",{"c-button-raised-primary":t&&!e.disabled}),l=s.a.createElement("span",{className:r,style:n});return s.a.createElement("span",{className:o,onClick:!1!==e.canChange?this.onClick:void 0,id:e.id,style:e.style,tabIndex:e.tabIndex,onKeyDown:this.onKeyDown,ref:"element"},s.a.createElement("input",{className:"fancyCheckboxInput",type:"checkbox",checked:t,onChange:this.onChangeInput}),!1,this.props.children&&s.a.createElement("span",{className:i},this.props.children),l)}}),_=l.a.createClass({displayName:"FancyTextArea",componentDisplay:o.a.ComponentDisplay.Everywhere,init:function(){this.createObservables({isFocused:this.props.focused||!1})},componentDidMount:function(){var e=this.refs.input;this.props.value&&(e.value=this.props.value),this.props.focused&&requestAnimationFrame(function(){e.focus(),void 0!==this.props.selectionStart&&(e.selectionStart=this.props.selectionStart),void 0!==this.props.selectionEnd&&(e.selectionEnd=this.props.selectionEnd),e.scrollTop=0}.bind(this))},onUnmount:function(){this.isFocused.get()&&this.onBlur()},focus:function(){this.refs.input.focus()},blur:function(){this.refs.input.blur()},getValue:function(){return this.refs.input.value},setValue:function(e){this.refs.input.value=e},getSelectionStart:function(){return this.refs.input.selectionStart},getSelectionEnd:function(){return this.refs.input.selectionEnd},onFocus:function(e){a.default.vmMain.activeInput.set(this),this.isFocused.set(!0),this.props.onEscape&&(this.__hotkeyEscape=c.a.pushStackEscape(this.handleEscapeKey)),this.props.onFocus&&this.props.onFocus(e)},onBlur:function(e){a.default.vmMain.activeInput.set(null),this.isFocused.set(!1),this.__hotkeyEscape&&(c.a.popStack(this.__hotkeyEscape),this.__hotkeyEscape=void 0),this.props.onBlur&&this.props.onBlur(e)},onKeyPress:function(e){this.props.onKeyPress&&this.props.onKeyPress(e)},handleEscapeKey:function(){this.props.onEscape&&this.props.onEscape()},render:function(){var e=this.props,t=a.default.classNames("fancyTextarea c-background c-foreground",e.className),n=e.spellCheck?"true":null,o={fontSize:e.fontSize,height:e.height||150,margin:void 0!==e.margin?e.margin:"16px 0",overflow:e.height<=34&&"hidden"};return s.a.createElement("textarea",{className:t,style:o,ref:"input",readOnly:!!e.isReadOnly,spellCheck:n,onClick:e.onClick,onChange:e.onChange,onFocus:this.onFocus,onBlur:this.onBlur,onKeyDown:e.onKeyDown,onKeyPress:e.onKeyPress,placeholder:e.placeholder,tabIndex:e.tabIndex})}}),O=l.a.createClass({displayName:"ReactModalFeedback",componentDisplay:o.a.ComponentDisplay.Everywhere,onClickUV:function(e){a.default.openUrl("https://feedback.moo.do/",e),a.default.sendEvent("Menu","FeedbackUserVoice")},onClickTwitter:function(e){a.default.openUrl("https://www.twitter.com/MooDoApp",e),a.default.sendEvent("Menu","FeedbackTwitter")},onClickFacebook:function(e){a.default.openUrl("https://www.facebook.com/MooDoApp",e),a.default.sendEvent("Menu","FeedbackFacebook")},onClickGooglePlus:function(e){a.default.openUrl("https://www.google.com/+MooDoApp",e),a.default.sendEvent("Menu","FeedbackGoogle")},onClickCancel:function(e){a.default.menus.closeModalNew(Modals.ReportBug)},onClickSend:function(e){var t=this.refs.description.getValue();if(t&&t.length>2){var n="Moo.do Feedback";if(this.refs.share.getValue()){var o=a.default.vmMain.docManager.getOpenDoc();if(o){n+=" [DocShared]",t+="\r\n\r\nShared Document - "+o.id;a.default.vmMain.remoteAPI().drivePermissionsInsert(o.id,"debug@moo.do",!1,a.default.emptyFn,function(){a.default.reportError(new Error("Unable to share doc with debug account"))})}}a.default.sendFeedback(n,t),a.default.menus.closeModalNew(Modals.ReportBug),a.default.toasts.pushMessage({text:"Thanks for taking the time to send us feedback!"}),a.default.sendEvent("Menu","SendFeedback"),x.a.reset()}},render:function(){return s.a.createElement(p,{id:"reportBug",modalID:Modals.ReportBug,ref:"modal",title:"Contact Support",width:650,height:650},s.a.createElement("div",{key:"content"},s.a.createElement("div",{className:"c-foreground-light"},"If you're requesting a feature, it's often easier to vote it up (or add it) on our UserVoice page."),s.a.createElement("div",{className:"center"},s.a.createElement(u.a,{className:"mc",primary:!0,onClick:this.onClickUV},"Open UserVoice")),s.a.createElement("br",null),s.a.createElement("div",{className:"c-foreground-light"},"Or talk to us on your favorite social network."),s.a.createElement("div",{className:"flexbox flex-center"},s.a.createElement(u.a,{width:50,height:50,icon:"icon-twitter",tooltip:"@MooDoApp",onClick:this.onClickTwitter}),s.a.createElement(u.a,{width:50,height:50,marginLeft:16,icon:"icon-facebook",tooltip:"MooDoApp",onClick:this.onClickFacebook}),s.a.createElement(u.a,{width:50,height:50,marginLeft:16,icon:"icon-google-plus",tooltip:"+MooDoApp",onClick:this.onClickGooglePlus})),s.a.createElement("div",{className:"mat-subheader c-foreground-light"},"Or send us a message directly."),s.a.createElement(_,{focused:!0,id:"bugDescription",height:200,ref:"description",margin:0}),s.a.createElement("div",{className:"mt8 c-foreground-light"},"Some error reports may be helped by sharing your file with us. We can diagnose issues in your particular file. Please only share your file with us if we have asked."),s.a.createElement("br",null),s.a.createElement(D,{ref:"share"},"Share file with developers")),s.a.createElement("div",{key:"buttons"},s.a.createElement(u.a,{raised:!0,onClick:this.onClickCancel},"CANCEL"),s.a.createElement(u.a,{raised:!0,primary:!0,marginLeft:16,onClick:this.onClickSend},"SEND")))}}),P=Object.assign||function(e){for(var t=0,n=1;n<arguments.length;n++){if(t++>1500&&__infLoop&&__infLoop(t))throw new RangeError;var a=arguments[n];for(var o in a)Object.prototype.hasOwnProperty.call(a,o)&&(e[o]=a[o])}return e},L=l.a.createClass({displayName:"ReactModalOptions",componentDisplay:o.a.ComponentDisplay.Everywhere,onClickOption:function(e){this.refs.modal.close(e)},render:function(){return s.a.createElement(p,P({},this.props,{id:"modalOptions",title:"Please Choose",small:!0,backdropClose:!1,scrollable:!1,modalID:Modals.Options,ref:"modal"}),s.a.createElement("div",{key:"content"},this.props.text),s.a.createElement("div",{key:"buttons"},this.props.options.map(function(e,t){return s.a.createElement(u.a,{key:t,raised:!0,width:120,margin:"0 8px",onClick:this.onClickOption.bind(this,e)},e)}.bind(this)),s.a.createElement(u.a,{cancel:!0,raised:!0,width:100,margin:"0 8px",onClick:this.onClickOption},"Cancel")))}}),R=n(37),I=n(11),A=n(20),T=Object.assign||function(e){for(var t=0,n=1;n<arguments.length;n++){if(t++>1500&&__infLoop&&__infLoop(t))throw new RangeError;var a=arguments[n];for(var o in a)Object.prototype.hasOwnProperty.call(a,o)&&(e[o]=a[o])}return e},B=l.a.createClass({displayName:"ReactModalMobileSettings",componentDisplay:o.a.ComponentDisplay.Mobile,init:function(){var e=0;R.a.refresh();for(var t={enableOfflineAuth:R.a.enableOfflineAuth.get(),enableNotifications:!a.default.settings.get(Settings.disableNotifications)},n=R.a.pluginsAvailable,o=0;o<n.length;++o){if(e++>1500&&__infLoop&&__infLoop(e))throw new RangeError;var i=n[o];t[i+"Enabled"]=R.a.isPluginEnabled(i)}this.createObservables(t),this.listenTo(I.a.onAccountsUpdated)},getState:function(){return{isLoggedIn:!0,driveStatus:a.default.vmMain.gdriveStatusObs,hasPremiumFeatures:a.default.billingManager.hasPremiumFeaturesObservable,gmailSyncAccounts:R.a.GmailSyncAccounts,linkedAccounts:I.a.getLinkedAccounts()}},onSaveButton:function(){var e=0,t=R.a.pluginsAvailable,n=this.state;n.enableNotifications!==!a.default.settings.get(Settings.disableNotifications)&&R.a.toggleNotifications();var o=[PluginID.Contacts,PluginID.Gmail].filter(function(e){var t=e+"Enabled";return n[t]&&n[t]!==R.a.isPluginEnabled(e)}.bind(this)).map(function(e){return{id:e}}.bind(this));if(o.length>0){var i=n.enableOfflineAuth||!0;R.a.enablePlugins(o,i,function(e){}.bind(this))}n.enableOfflineAuth||n.enableOfflineAuth===R.a.enableOfflineAuth.get()||R.a.toggleOfflineFeatures(!1);for(var s=0;s<t.length;++s){if(e++>1500&&__infLoop&&__infLoop(e))throw new RangeError;var r=t[s],l=r+"Enabled";n[l]||n[l]===R.a.isPluginEnabled(r)||R.a.togglePlugin(r)}this.refs.modal.close()},onClickSendFeedback:function(){a.default.menus.openModalNew(Modals.ReportBug),a.default.sendEvent("Menu","GiveFeedback")},onClickReauthorize:function(){R.a.toggleOfflineFeatures(!0)},onClickReconnect:function(){a.default.reload()},onClickLogout:function(){a.default.vmSetup.logoutClicked()},renderPluginOptionCheckbox:function(e,t,n){return s.a.createElement(D,{checked:this[e+"_"+t],setObs:!0},n)},renderPluginCheckbox:function(e,t,n){var a=e+"Enabled";return s.a.createElement(D,{checked:this[a],setObs:!0},n,t)},linkAccount:function(e,t,n){var a=[GScope.UserInfoEmail];return a.pushArray(t),N.default.linkAccount(e,a,n)},removeAccount:function(e){var t=a.default.vmMain.pluginManager.getPlugin(PluginID.Gmail);I.a.removeLinkedAccount(e,function(t){t||a.default.toasts.pushMessage({text:"There was an error unlinking your account.",actionText:"RETRY",action:this.removeAccount.bind(this,e)})}.bind(this)),t.hasSyncAccount(e)&&t.removeSyncAccount(e,function(){R.a.refresh()})},enableGmailSync:function(e,t){var n=a.default.vmMain.pluginManager.getPlugin(PluginID.Gmail),o=function(){R.a.refresh()}.bind(this);t?this.linkAccount(e,[GScope.GmailCompose,GScope.GmailModify],function(e,t){e?n.addSyncAccount(t,function(e){e||o(),R.a.refresh()}):o()}):n.removeSyncAccount(e,function(e){e||o(),R.a.refresh()})},renderAccount:function(e){var t=a.default.vmMain.pluginManager.getPlugin(PluginID.Gmail).isEnabled(),n=this.state.gmailSyncAccounts.indexOf(e)>=0,o=n&&I.a.isConnected()&&(!I.a.isAuthorized(e,GScope.GmailCompose)||!I.a.isCurrentlyAuthorized(e)),i=a.default.classNames("accountRow");return s.a.createElement("div",{key:"row"+e,className:i},s.a.createElement(D,{disabled:!t,checked:n&&!o,error:o,onChange:this.enableGmailSync.bind(this,e)},s.a.createElement(u.a,{icon:"icon-close",iconSize:20,display:"inline",width:50,height:50,onClick:this.removeAccount.bind(this,e)}),s.a.createElement("span",null,e)))},renderAccounts:function(){return this.getAccountList().map(this.renderAccount)},getAccountList:function(){var e=[];e.pushOnlyUniques(this.state.linkedAccounts),e.pushOnlyUniques(this.state.gmailSyncAccounts);var t=I.a.getDefaultEmail();return e.filter(function(e){return e!==t})},render:function(){var e=this.props,t=this.state,n=a.default.billingManager;n.isTrialState();var o=[];return s.a.createElement(p,T({},e,{id:"modalMobileSettings",title:"Settings",modalID:Modals.MobileSettings,ref:"modal",topButtonWidth:80,closeButton:"CANCEL",confirmText:"SAVE",onConfirm:this.onSaveButton}),s.a.createElement("div",{key:"content"},s.a.createElement("div",{className:"modalSection"},s.a.createElement("div",{className:"modalSectionTitle"},"OPTIONS"),s.a.createElement("div",{className:"modalSectionList"},s.a.createElement(D,{checked:this.enableNotifications,setObs:!0},"Notifications"))),s.a.createElement("div",{className:"modalSection"},s.a.createElement("div",{className:"modalSectionTitle"},"PLUGINS"),s.a.createElement("div",{className:"modalSectionList featureCheckboxes"},this.renderPluginCheckbox(PluginID.Contacts,"Google Contacts",s.a.createElement("i",{className:"icon-group"})),t[PluginID.Contacts+"Enabled"]&&s.a.createElement(u.a,{height:44,primary:!0},"Refresh Contacts"),this.renderPluginCheckbox(PluginID.Gmail,"Gmail",s.a.createElement("img",{src:"/img/plugin-gmail.png"})))),o.length>0&&s.a.createElement("div",{className:"modalSection"},s.a.createElement("div",{className:"modalSectionTitle"},"LINKED ACCOUNTS"),s.a.createElement("div",{className:"modalSectionList featureCheckboxes"},o)),s.a.createElement("div",{className:"modalSection"},s.a.createElement("div",{className:"modalSectionTitle"},"ACTIONS"),s.a.createElement("div",{className:"modalSectionList"},s.a.createElement(u.a,{height:44,primary:!0,onClick:this.onClickReauthorize},"Reauthorize"),s.a.createElement(u.a,{height:44,primary:!0,onClick:this.onClickSendFeedback},"Contact Support"),t.isLoggedIn&&s.a.createElement(u.a,{height:44,primary:!0,onClick:this.onClickReconnect},"Force Reconnect"),s.a.createElement(u.a,{height:44,primary:!0,enabled:a.default.vmMain.isOnline(),onClick:this.onClickLogout},"Logout"))),s.a.createElement("div",{className:"modalSection"},s.a.createElement("div",{className:"modalSectionTitle"},"ACCOUNT STATUS"),s.a.createElement("div",{className:"modalSectionList modalSectionText g"},n.hasPremium()&&s.a.createElement("div",{className:"text"},"Premium since ",n.getPremiumStartDate().toString(A.a.getFormat(DFormat.LongStrDate))),s.a.createElement("div",{className:"text"},"Logged in as ",a.default.billingManager.getBillingIdentifier()),s.a.createElement("div",{className:"text"},"Please open Moo.do on your computer to modify your account."))),void 0))}}),F=Object.assign||function(e){for(var t=0,n=1;n<arguments.length;n++){if(t++>1500&&__infLoop&&__infLoop(t))throw new RangeError;var a=arguments[n];for(var o in a)Object.prototype.hasOwnProperty.call(a,o)&&(e[o]=a[o])}return e},K=l.a.createClass({displayName:"ReactModalEmailCompose",componentDisplay:o.a.ComponentDisplay.Everywhere,onClickSend:function(){this.refs.compose.send(),this.refs.modal.close()},onComposeClose:function(){a.default.menus.closeContextMenu(),this.refs.modal&&this.refs.modal.close()},onCloseButton:function(){this.refs.compose.discard()},render:function(){var e=this.props;return s.a.createElement(p,F({},e,{id:"modalEmailCompose",title:"New Message",modalID:Modals.EmailCompose,ref:"modal",confirmIcon:"icon-send",onConfirm:this.onClickSend,onCloseButton:this.onCloseButton}),s.a.createElement(C.a,{key:"content",threadAttach:e.threadAttach,message:e.message,ref:"compose",onClose:this.onComposeClose,showSubject:!0,focus:"to"}))}}),U=Object.assign||function(e){for(var t=0,n=1;n<arguments.length;n++){if(t++>1500&&__infLoop&&__infLoop(t))throw new RangeError;var a=arguments[n];for(var o in a)Object.prototype.hasOwnProperty.call(a,o)&&(e[o]=a[o])}return e},V=l.a.createClass({displayName:"ReactModalsMobile",componentDisplay:o.a.ComponentDisplay.Everywhere,getState:function(){return{modals:a.default.menus.modalStack}},renderModal:function(e){var t=e.id,n=t===Modals.Alert&&k||t===Modals.Confirm&&M||t===Modals.Prompt&&g||t===Modals.Options&&L||t===Modals.EmailReply&&y||t===Modals.EmailCompose&&K||t===Modals.MobileSettings&&B||t===Modals.ReportBug&&O||t===Modals.ShareDoc&&w;try{a.default.PAssert(447,n,"Could not find modal with id "+t)}catch(e){a.default.reportError(e)}return s.a.createElement(n,U({key:e.id},e))},render:function(){for(var e=0,t=[],n=0;n<this.state.modals.length;n++){if(e++>1500&&__infLoop&&__infLoop(e))throw new RangeError;t.push(this.renderModal(this.state.modals[n]))}var o=a.default.classNames("modals",{none:0===t.length});return s.a.createElement(r.CSSTransitionGroup,{className:o,transitionName:"modalTransition",transitionEnterTimeout:400,transitionLeaveTimeout:300},t)}});t.default=V},83:function(e,t,n){"use strict";n.r(t);var a=n(0),o=n(1),i=n(2),s=n.n(i),r=n(48),l=n(13),c=n(14),u={ReactContextMenuSelectGmailAccount:n(81),ReactContextMenuInsertLink:n(80),ReactContextMenuContactDetails:n(74),ReactContextMenuMobileOpenLink:n(79),ReactContextMenuDocuments:n(63),ReactNotePopup:n(75),ReactContextMenuDropBucket:n(78),ReactContextMenuAuthorize:n(77),ReactContextMenuMobileFilter:n(76)},d=l.a.createClass({displayName:"ReactContextMenusMobile",componentDisplay:o.a.ComponentDisplay.Everywhere,getState:function(){return{contextMenus:a.default.menus.contextMenuStack,noFade:a.default.menus.contextMenuNoFade,isDragging:c.default.isVisible}},close:function(e,t){a.default.menus.isContextMenuOpen(e.fn)&&a.default.menus.closeContextMenu(e.fn),t.preventDefault(),t.stopPropagation()},render:function(){for(var e=0,t=this.state,n=[],o=0;o<t.contextMenus.length;o++){if(e++>1500&&__infLoop&&__infLoop(e))throw new RangeError;var i=t.contextMenus[o];if(i.noBackdrop||n.push(s.a.createElement("div",{key:"backdrop_"+o,className:"contextMenusBackdrop",onTouchStart:this.close.bind(this,i)})),i.fn)n.push(i.fn(i));else if(i.componentName){i.key=i.key||i.componentName,i.id=i.id||i.key;var l=u[i.componentName].default;n.push(s.a.createElement(l,i))}}var c=a.default.classNames("contextMenusReact",{open:n.length>0},{takeClick:n.length>0&&!i.noBackdrop},{none:0===n.length},{hideBackground:t.noFade||t.isDragging});return s.a.createElement(r.CSSTransitionGroup,{className:c,transitionName:"contextMenuAnim",transitionEnterTimeout:150,transitionLeaveTimeout:200},n)}});t.default=d}}]);
//# sourceMappingURL=delayedUIMobile-1528222033563.js.map