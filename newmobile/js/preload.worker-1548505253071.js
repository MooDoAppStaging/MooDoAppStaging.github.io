!function(n){var e={};function t(r){if(e[r])return e[r].exports;var o=e[r]={i:r,l:!1,exports:{}};return n[r].call(o.exports,o,o.exports,t),o.l=!0,o.exports}t.m=n,t.c=e,t.d=function(n,e,r){t.o(n,e)||Object.defineProperty(n,e,{enumerable:!0,get:r})},t.r=function(n){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(n,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(n,"__esModule",{value:!0})},t.t=function(n,e){if(1&e&&(n=t(n)),8&e)return n;if(4&e&&"object"===typeof n&&n&&n.__esModule)return n;var r=Object.create(null);if(t.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:n}),2&e&&"string"!=typeof n)for(var o in n)t.d(r,o,function(e){return n[e]}.bind(null,o));return r},t.n=function(n){var e=n&&n.__esModule?function(){return n.default}:function(){return n};return t.d(e,"a",e),e},t.o=function(n,e){return Object.prototype.hasOwnProperty.call(n,e)},t.p="js/",t(t.s=1)}([function(n,e){n.exports=function(n,e){if(!(n instanceof e))throw new TypeError("Cannot call a class as a function")}},function(n,e,t){"use strict";t.r(e);var r=function(n){var e={};return Object.keys(n).forEach(function(t){e[n[t]]=t}),e},o=function(n){return"string"===typeof n},i={billingID:"b",displayName:"n",gid:"g",earlyAdopter:"x",email:"e",fname:"f",lname:"l",inviteCode:"i",invoiceAddress:"a",invoiceCompany:"c",invoiceEmail:"d",joinDate:"j",monthlyInvoice:"m",nextBillingDate:"o",planID:"h",picture:"p",premiumCode:"k",premiumSignupDate:"q",premiumEndDate:"r",premiumStatus:"s",subscriptionID:"v",trialDuration:"u",trialExtended:"w",trialStart:"t",isUnsubscribed:"y"},f=r(i),u={items:!0},c={dateCreated:"c",dateCompleted:"e",dateModified:"d",date:"b",flags:"f",id:"id",index:"i",isArchived:"r",isDeleted:"x",note:"n",parent:"p",pendingSync:"m",text:"t",docId:"o",isRoot:"q"},d=r(c),p={validateInFields:function(n,e){return!(e&&(!n.id||"undefined"===n.id))&&(Object.keys(n).forEach(function(n){if(n.length<2||"undefined"===n)return!1}),!0)},validateOutFields:function(n,e){return!(e&&(!n.id||"undefined"===n.id))&&(Object.keys(n).forEach(function(n){if(n.length>2||"undefined"===n)return!1}),!0)},itemFieldMapIn:d,itemFieldMapOut:c,documentIn:function(n){return{id:n.id,acl:n.a,dateModified:n.p.d,text:n.p.t,encryptionSentinel:n.p.s,root:n.r,version:n.v,pendingSync:n.m,backups:n.c}},documentOut:function(n,e){var t={id:n.id,p:{d:n.dateModified,t:n.text}};return n.encryptionSentinel&&(t.p.s=n.encryptionSentinel),e||(t.a=n.acl,t.r=n.root,t.v=n.version),n.pendingSync&&(t.m=n.pendingSync),t},documentInFlat:function(n,e){return{id:n.id,acl:n.a,dateModified:n.d,text:n.t,encryptionSentinel:n.s,root:n.r,version:n.v,pendingSync:n.m,backups:n.c}},documentOutFlat:function(n,e){var t={id:n.id,d:n.dateModified,t:n.text};return n.encryptionSentinel&&(t.s=n.encryptionSentinel),e||(t.a=n.acl,t.r=n.root,t.v=n.version),n.pendingSync&&(t.m=n.pendingSync),t},userIn:function(n){var e={};return Object.keys(n).forEach(function(t){f[t]&&"undefined"!==f[t]&&(e[f[t]]=n[t])}),e},userOut:function(n){var e={};return Object.keys(n).forEach(function(t){i[t]&&void 0!==i[t]&&"undefined"!==i[t]&&(e[i[t]]=n[t])}),e},itemIn:function(n){var e={};return Object.keys(n).forEach(function(t){d[t]&&"undefined"!==d[t]&&(e[d[t]]=n[t])}),e},itemOut:function(n){var e={};return Object.keys(n).forEach(function(t){void 0!==n[t]&&!u[t]&&c[t]&&"undefined"!==c[t]&&(e[c[t]]=n[t])}),e},decryptItem:function(n,e,t){return n.text?e.decryptText(t,n.text,n.id).then(function(e){return n.text=e,n}):Promise.resolve(n)},encryptItem:function(n,e,t){return n.text?e.encryptText(t,n.text,n.id).then(function(e){return n.text=e,n}):Promise.resolve(n)},encryptItemOut:function(n,e,t){return p.encryptItem(n,e,t).then(function(n){return p.itemOut(n)})},decryptItemIn:function(n,e,t){return n=p.itemIn(n),p.decryptItem(n,e,t)},boardIn:function(n){var e=Object.assign({},n);return o(n.panes)&&(e.panes=JSON.parse(n.panes)),o(n.defaultPanes)&&(e.defaultPanes=JSON.parse(n.defaultPanes)),e},boardOut:function(n){var e=Object.assign({},n);return n.panes&&(e.panes=JSON.stringify(n.panes)),n.defaultPanes&&(e.defaultPanes=JSON.stringify(n.defaultPanes)),e},compareItemIndex:function(n,e){var t=0,r=n.index,o=e.index;if(void 0===r||void 0===o)return 0;"number"===typeof r&&(r=""+r),"number"===typeof o&&(o=""+o);for(var i=r.split(","),f=o.split(","),u=0;u<i.length;u++){if(t++>5e3&&__infLoop&&__infLoop(t))throw new RangeError;if(void 0===f[u])return 1;var c=+i[u],d=+f[u];if(c!==d)return c-d}return-1}},a=p,v=t(0),y=t.n(v),x=function n(){y()(this,n)},g=function(n,e,t){var r=function(n,e,t){for(var r=0,o=0,i=n.length-1;o<=i;){if(r++>5e3&&__infLoop&&__infLoop(r))throw new RangeError;var f=o+i>>1,u=t(n[f],e);if(u<0)o=f+1;else{if(!(u>0))return f;i=f-1}}return o}(n,e,t);return n.splice.apply(n,[r,0,e]),r},S=function(n){for(var e=0,t=0,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},o={},i={},f=0;f<n.length;f++){if(e++>5e3&&__infLoop&&__infLoop(e))throw new RangeError;var u=n[f];o[u.id]=u,u.isRoot&&(i[u.docId]=u)}for(var c=0;c<n.length;c++){if(t++>5e3&&__infLoop&&__infLoop(t))throw new RangeError;var d=n[c],p=d.parent,v=o[p]||r[p];if(!d.isDeleted){if(!v&&!d.isRoot){console.log("Item without a parent",d.text,d.parent,d.docId);var y=i[d.docId];if(!y){console.log("Uh oh, can't find root",d.text),n.splice(c,1),c--;continue}d.parent=y.id,v=y}0,v&&(32===(32&d.flags)?v.note=d.id:d.isArchived&&v.isRoot?(v.archivedItems||(v.archivedItems=[]),v.archivedItems.push(d)):void 0!==d.text&&(v.items||(v.items=[]),void 0===d.index&&(d.index=""+v.items.length),g(v.items,d,a.compareItemIndex)))}}return o},s=function(n){for(var e=0,t=0;t<n.length;t++){if(e++>5e3&&__infLoop&&__infLoop(e))throw new RangeError;n[t]=a.itemIn(n[t])}return S(n)},E=function(){return new x},O=function(n,e){n||(n=E());var t={},r=n.tableNames.length;n.tableNames.forEach(function(n){return t[n]=void 0});var o=function(n,o){if(t[n]=o,"documents"===n){for(var i=0,f=o,u={},c={},d=0;d<f.length;d++){if(i++>5e3&&__infLoop&&__infLoop(i))throw new RangeError;var p=a.documentIn(f[d]);u[f[d].id]=p,p.pendingSync&&(c[p.id]=!0)}t.documentsPending=c,t.documents=u}else if("items"===n){var v=function(n){var e={};return n=s(n),Object.keys(n).forEach(function(t){var r=n[t],o=r.items;if(r.pendingSync&&(e[r.id]=r.pendingSync),o&&(Number.NEGATIVE_INFINITY,o.find(function(n){32!==(32&n.flags)&&n.index})))for(var i=0,f=0;f<o.length;f++){if(i++>5e3&&__infLoop&&__infLoop(i))throw new RangeError;var u=o[f];u.pendingSync={index:u.index},u.index=f,e[u.id]=!0}}),{items:n,itemsPending:e}}(o),y=v.items,x=v.itemsPending;t.items=y,t.itemsPending=x}else if("settings"===n||"boards"===n){var g=function(n){var e={},t={};return n.forEach(function(n){e[n.id]=n,n.pendingSync&&(t[n.id]=n.pendingSync)}),{values:e,pending:t}}(o),S=g.values,E=g.pending;t[n]=S,t[n+"Pending"]=E,"boards"===n&&Object.keys(S).forEach(function(n){S[n]=a.boardIn(S[n])})}else if("plugins"===n){var O={};o.forEach(function(n){O[n.plugin]||(O[n.plugin]={}),O[n.plugin][n.id]=n}),t[n]=O}else if("localStorage"===n){var j={};o.forEach(function(n){return j[n.id]=n.value}),t[n]=j}0===--r&&e(t)},i=!1;for(var f in t)n[f]&&n[f].toArray().then(o.bind(n[f],f)).catch(function(n){i||(i=!0,console.log(n),e({error:{name:n.name,message:n.message}}))})};self.__infLoop=function(){},O(void 0,function(n){postMessage(n)})}]);
//# sourceMappingURL=preload.worker-1548505253071.js.map