/*! For license information please see dimport-1521699980649.js.LICENSE */
webpackJsonp([2],{237:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a=r(0),i=r(1),s=r(2),n=r(7),o=r(11),l=r(57),d=r(12),c=r(14),u=r(16),h=r(238),f=r.n(h);function p(){this.workflowy={login:this.workflowyLogin.bind(this),import:this.workflowyImport.bind(this),save:this.workflowySave.bind(this)},this.wunderlist={login:this.wunderlistLogin.bind(this),import:this.wunderlistImport.bind(this),save:this.wunderlistSave.bind(this)},this.iqtell={login:this.iqtellLogin.bind(this),import:this.iqtellImport.bind(this),save:this.iqtellSave.bind(this)},this.opml={login:this.opmlLogin.bind(this),import:this.opmlImport.bind(this),save:this.opmlSave.bind(this)},this.json={login:this.jsonLogin.bind(this),import:this.jsonImport.bind(this),save:this.jsonSave.bind(this)},this.gtasks={login:this.gtasksLogin.bind(this),import:this.gtasksImport.bind(this),save:this.gtasksSave.bind(this)},this.trello={preload:this.trelloPreload.bind(this),login:this.trelloLogin.bind(this),import:this.trelloImport.bind(this),save:this.trelloSave.bind(this)},this.todoist={login:this.todoistLogin.bind(this),import:this.todoistImport.bind(this),save:this.todoistSave.bind(this)}}function m(e){return e.toString(c.a.getFormat(DFormat.MonthDay))}p.prototype={workflowyLogin:function(e,t,r,i){try{a.default.PAssert(2495,r,"Workflowy requires a success callback")}catch(e){a.default.reportError(e)}try{a.default.PAssert(2496,i,"Workflowy requires an error callback")}catch(e){a.default.reportError(e)}return e?t?void a.default.XHR_PrivateAPI({type:"POST",path:"/oauth/workflowy",data:{username:e,password:t},cb:function(e){if(200===e.status){try{var t=JSON.parse(e.response);this.workflowy.data=JSON.parse(t.data)}catch(e){return a.default.reportError(e),i("Error parsing successful response from server. The developers have been notified with details of the error.")}return!this.workflowy.data||this.workflowy.data.error?i("Invalid username or password."):r()}var s;try{var n=JSON.parse(e.response);switch(n.code){case PrivateAPIErrorCodes.InvalidParameter:s="Must specify a username and password.";break;case PrivateAPIErrorCodes.UnauthorizedUser:s="Invalid username or password.";break;case PrivateAPIErrorCodes.ErrorContactingRemote:s=n.data;break;default:s="Error contacting server. The developers have been notified with details of the error."}}catch(e){s="Error parsing error response from server. The developers have been notified with details of the error.",a.default.reportError(e)}return i(s)}.bind(this)}):i("Must provide a password."):i("Must provide a valid username.")},workflowyImport:function(e,t){try{a.default.PAssert(2497,e,"Workflowy requires a success callback")}catch(e){a.default.reportError(e)}try{a.default.PAssert(2498,t,"Workflowy requires an error callback")}catch(e){a.default.reportError(e)}return e(this.workflowy.data)},workflowyIterateItem:function(e,t){try{a.default.PAssert(2499,e&&void 0!==e.nm,"All items must exist and have stars and text, children and notes are optional",e)}catch(e){a.default.reportError(e)}try{a.default.PAssert(2501,t,"A valid parent must always be defined")}catch(e){a.default.reportError(e)}if(e&&t)try{var r=!!e.cp;if(!r){var i=a.default.stripFormattingTags(e.nm),s=n.a.createVMLI({text:i,isComplete:r},{parent:t,changeType:ChangeType.AllLocal});if(t.insertItem(s),e.no){var o=a.default.stripFormattingTags(e.no),l=n.a.createVMLI({text:o,isNote:!0},{parent:s,changeType:ChangeType.AllLocal});s.setNote(l,ChangeType.Local)}if(e.ch)for(var d=0;d<e.ch.length;++d){var c=e.ch[d];this.workflowyIterateItem(c,s)}}}catch(e){throw a.default.reportError(e),e}},workflowySave:function(e,t,r){try{a.default.PAssert(2502,e,"Workflowy requires having valid data")}catch(e){a.default.reportError(e)}try{a.default.PAssert(2503,t,"Workflowy requires a success callback")}catch(e){a.default.reportError(e)}try{a.default.PAssert(2504,r,"Workflowy requires an error callback")}catch(e){a.default.reportError(e)}try{try{a.default.PAssert(2505,e.projectTreeData,"Missing Workflowy projectTreeData")}catch(e){a.default.reportError(e)}try{a.default.PAssert(2506,e.projectTreeData.mainProjectTreeInfo,"Missing Workflowy mainProjectTreeInfo")}catch(e){a.default.reportError(e)}var i=e.projectTreeData.mainProjectTreeInfo;try{a.default.PAssert(2507,i.rootProjectChildren,"Missing Workflowy rootProjectChildren")}catch(e){a.default.reportError(e)}o.a.beginAction(),a.default.vmMain.beginUpdateItems();var s=n.a.getRootModel();try{a.default.PAssert(2508,s,"Root item must exist in order to import")}catch(e){a.default.reportError(e)}var l=n.a.createVMLI({text:"Workflowy Import"},{parent:s,changeType:ChangeType.AllLocal});s.insertItem(l);try{for(var d=0;d<i.rootProjectChildren.length;++d){var c=i.rootProjectChildren[d];this.workflowyIterateItem(c,l)}a.default.vmMain.parseSubtree(l,ChangeType.Local|ChangeType.All)}catch(e){return a.default.reportError(e),r("There was an error iterating your Workflowy items. The developers have been notified with daetails of the error.",e)}return a.default.vmMain.commitUpdateItems(),o.a.endAction(),t()}catch(e){return a.default.reportError(e),r("There was an error parsing your Workflowy data. The developers have been notified with details of the error.",e)}},wunderlistLogin:function(e,t,r,i){try{a.default.PAssert(2509,r,"Wunderlist requires a success callback")}catch(e){a.default.reportError(e)}try{a.default.PAssert(2510,i,"Wunderlist requires an error callback")}catch(e){a.default.reportError(e)}var s="localhost"===window.location.hostname?"f06a1334e250a9bb0b03":"ad988eeb954e9aabc288",n=window.location.protocol+"//"+window.location.host+"/oauthRelay.html";this.wunderlist.clientId=s;var o="Dchs"+(new Date).getTime(),l="https://www.wunderlist.com/oauth/authorize?client_id="+s+"&redirect_uri="+n+"&state="+o;window.open(l,"wunderlist","height=600,width=550");var d=function(e){var t=a.default.getLocationOrigin(),s=!1;try{s=e.data.state===o}catch(e){a.default.reportError(e)}if(t&&s)if(window.removeEventListener("message",d),e.data.error)i("Error authenticating with Wunderlist");else{var n=e.data.code;n&&a.default.XHR_PrivateAPI({type:"POST",path:"/oauth/wunderlist",data:{code:n},requireAuth:!0,cb:function(e){if(200===e.status){try{var t=JSON.parse(e.response).data;this.wunderlist.token=t.access_token}catch(e){i("Error parsing response from remote server.",e)}this.wunderlist.token?r():i("Invalid username or password.")}else i("Error contacting remote server.")}.bind(this)})}}.bind(this);window.addEventListener("message",d)},wunderlistImport:function(e,t){try{a.default.PAssert(2511,e,"Wunderlist requires a success callback")}catch(e){a.default.reportError(e)}try{a.default.PAssert(2512,t,"Wunderlist requires an error callback")}catch(e){a.default.reportError(e)}var r={inbox:{title:"inbox",items:{},p:0}},i=0;this.wunderlistGetLists(function(a){for(var s=0;s<a.length;++s){var n=a[s];r[n.id]={title:n.title,items:{},p:n.position},this.wunderlistGetTasks(n.id,function(s){for(var o=0;o<s.length;++o){var l=s[o];if(l.parent_id){var d=r[l.list_id].items[l.parent_id];d?(d.items||(d.items=[]),d.items.push(l)):r[l.list_id].items[l.parent_id]={items:[l]}}else{var c=r[l.list_id].items[l.id];r[l.list_id].items[l.id]=l,c&&(r[l.list_id].items[l.id].items=c.items)}}this.wunderlistGetSubtasks(n.id,function(t){for(var s=0;s<t.length;++s){var n=t[s],o=r[n.list_id];if(o)if(n.parent_id){var l=o.items[n.parent_id];l?(l.items||(l.items=[]),l.items.push(n)):o.items[n.parent_id]={items:[n]}}else{var d=o.items[n.id];o.items[n.id]=n,d&&(o.items[n.id].items=d.items)}}++i===a.length&&e(r)}.bind(this),t)}.bind(this),t)}}.bind(this),t)},wunderlistGetLists:function(e,t){try{a.default.PAssert(2513,e,"Wunderlist requires a success callback")}catch(e){a.default.reportError(e)}try{a.default.PAssert(2514,t,"Wunderlist requires an error callback")}catch(e){a.default.reportError(e)}a.default.XHR({type:"GET",url:"https://a.wunderlist.com/api/v1/lists",headers:{"X-Access-Token":this.wunderlist.token,"X-Client-ID":this.wunderlist.clientId},cb:function(r){if(200===r.status){var a;try{a=JSON.parse(r.response)}catch(e){t("There was an error parsing your Wunderlist data. The developers have been notified with details of the error.",e)}e(a)}else t("Error contacting remote server.")}.bind(this)})},wunderlistGetTasks:function(e,t,r){try{a.default.PAssert(2515,t,"Wunderlist requires a success callback")}catch(e){a.default.reportError(e)}try{a.default.PAssert(2516,r,"Wunderlist requires an error callback")}catch(e){a.default.reportError(e)}a.default.XHR({type:"GET",url:"https://a.wunderlist.com/api/v1/tasks?list_id="+e,headers:{"X-Access-Token":this.wunderlist.token,"X-Client-ID":this.wunderlist.clientId},cb:function(e){if(200===e.status){var a=JSON.parse(e.response);t(a)}else r("Error contacting remote server.")}.bind(this)})},wunderlistGetSubtasks:function(e,t,r){try{a.default.PAssert(2517,t,"Wunderlist requires a success callback")}catch(e){a.default.reportError(e)}try{a.default.PAssert(2518,r,"Wunderlist requires an error callback")}catch(e){a.default.reportError(e)}a.default.XHR({type:"GET",url:"https://a.wunderlist.com/api/v1/subtasks?list_id="+e,headers:{"X-Access-Token":this.wunderlist.token,"X-Client-ID":this.wunderlist.clientId},cb:function(e){if(200===e.status){var a=JSON.parse(e.response);t(a)}else r("Error contacting remote server.")}.bind(this)})},wunderlistSave:function(e,t,r){try{a.default.PAssert(2519,t,"Wunderlist requires a success callback")}catch(e){a.default.reportError(e)}try{a.default.PAssert(2520,r,"Wunderlist requires an error callback")}catch(e){a.default.reportError(e)}try{o.a.beginAction(),a.default.vmMain.beginUpdateItems();var i=n.a.getRootModel();try{a.default.PAssert(2521,i,"Root item must exist in order to import")}catch(e){a.default.reportError(e)}var s=n.a.createVMLI({text:"Wunderlist Import"},{parent:i,changeType:ChangeType.AllLocal});for(var l in i.insertItem(s),e){var d=e[l];0;var c=d.title,u=n.a.createVMLI({text:c},{parent:s,changeType:ChangeType.AllLocal});for(var h in s.insertItem(u),d.items){var f=d.items[h];0;var p=n.a.createVMLI({text:f.title,isComplete:!!f.completed_at,dateCompleted:f.completed_at,isStarred:f.starred},{parent:u,changeType:ChangeType.AllLocal});if(u.insertItem(p),f.note){var m=n.a.createVMLI({text:f.note},{parent:p,changeType:ChangeType.AllLocal});p.insertItem(m)}if(f.items)for(var g=0;g<f.items.length;++g){var v=f.items[g];0;var y=n.a.createVMLI({text:v.title,isComplete:!!v.completed_at,dateCompleted:v.completed_at,isStarred:v.starred},{parent:p,changeType:ChangeType.AllLocal});p.insertItem(y)}}}a.default.vmMain.parseSubtree(s,ChangeType.Local|ChangeType.All),a.default.vmMain.commitUpdateItems(),o.a.endAction(),t()}catch(e){r(void 0,e)}},iqtellLogin:function(e,t,r,i){try{a.default.PAssert(2522,r,"IQTell requires a success callback")}catch(e){a.default.reportError(e)}try{a.default.PAssert(2523,i,"IQTell requires an error callback")}catch(e){a.default.reportError(e)}var s=document.getElementById("importFileUploadButton");s.onchange=r,s.click()},_readMultipleFiles:function(e,t,r){var i=0,s=0,n=!1,o={},d={},c={};function u(){n&&i+s===e.length&&(s>0?r(function(){var e="";for(var t in c)e+=l.a._parseIQTellFilename(t)+": "+c[t]+"\r\n";return e}()):t(o,d))}function h(e,t,r){o[t]=e,d[t]=r,i++,u()}function f(e,t){c[t]=e,s++,u()}for(var p=0;p<e.length;++p){var m=new FileReader;m.onload=function(e,t){var r=t.target.result;if(r){var i=this.parseCSV(r);i&&!a.default.isString(i)?h(i,e,r):f(i||"Error parsing IQTell import. Please validate your data.",e)}else f("Unable to load IQTell data. Please contact support.",e)}.bind(this,e[p].name),m.onerror=function(e,t){f(t,e)}.bind(this,e[p].name),m.readAsText(e[p])}n=!0,u()},iqtellImport:function(e,t){try{a.default.PAssert(2524,e,"IQTell requires a success callback")}catch(e){a.default.reportError(e)}try{a.default.PAssert(2525,t,"IQTell requires an error callback")}catch(e){a.default.reportError(e)}try{var r=document.forms.importFileUpload.importFile.files;if(r&&0!==r.length){this._readMultipleFiles(r,function(r,i){var s;o.a.beginAction(),a.default.vmMain.beginUpdateItems();try{s=l.a.iqtellProcess(r,i)}catch(e){a.default.reportError(e,i)}log("IQTell output: ",s),a.default.vmMain.commitUpdateItems(),o.a.endAction(),s?e():t("Error parsing IQTell import. Please contact support")},t)}else t("You must select a file before importing.")}catch(e){t(void 0,e)}},iqtellSave:function(e,t,r){try{a.default.PAssert(2526,t,"IQTell requires a success callback")}catch(e){a.default.reportError(e)}try{a.default.PAssert(2527,r,"IQTell requires an error callback")}catch(e){a.default.reportError(e)}t()},opmlLogin:function(e,t,r,i){try{a.default.PAssert(2528,r,"OPML requires a success callback")}catch(e){a.default.reportError(e)}try{a.default.PAssert(2529,i,"OPML requires an error callback")}catch(e){a.default.reportError(e)}var s=document.getElementById("importFileUploadButton");s.onchange=r,s.click()},opmlImport:function(e,t){try{a.default.PAssert(2530,e,"OPML requires a success callback")}catch(e){a.default.reportError(e)}try{a.default.PAssert(2531,t,"OPML requires an error callback")}catch(e){a.default.reportError(e)}try{var r=new FileReader,i=document.forms.importFileUpload.importFile.files[0];i?(r.onload=function(r){var s,n=r.target.result;if((n.startsWith("<?xml ")||n.startsWith("<?opml ")||n.startsWith("<opml "))&&(s=a.default.loadXML(n)),s){o.a.beginAction(),a.default.vmMain.beginUpdateItems();var d=l.a.parseOPML(s,i.name);a.default.vmMain.commitUpdateItems(),o.a.endAction(),d?e():t("Error parsing OPML. Please validate your data.")}else t("Unable to load XML lib. Please update or try another browser.")},r.onerror=t,r.readAsText(i)):t("You must select a file before importing.")}catch(e){t(void 0,e)}},opmlSave:function(e,t,r){try{a.default.PAssert(2532,t,"OPML requires a success callback")}catch(e){a.default.reportError(e)}try{a.default.PAssert(2533,r,"OPML requires an error callback")}catch(e){a.default.reportError(e)}t()},jsonLogin:function(e,t,r,i){try{a.default.PAssert(2534,r,"JSON requires a success callback")}catch(e){a.default.reportError(e)}try{a.default.PAssert(2535,i,"JSON requires an error callback")}catch(e){a.default.reportError(e)}var s=document.getElementById("importFileUploadButton"),n=!1;s.onchange=function(e){n=!0,r(e)},s.click();document.body.onfocus=function(){n||i(!1),document.body.onfocus=void 0}},jsonImport:function(e,t){try{var r=new FileReader,i=document.forms.importFileUpload.importFile.files[0];i?(r.onload=function(r){var i=r.target.result;if(!i)return t("Unable to import your requested file. Please try a different file.");try{var s=JSON.parse(i)}catch(e){return t("The JSON is not properly formatted. Please re-validate or send the file to support@moo.do.")}try{o.a.beginAction(),a.default.vmMain.beginUpdateItems();var n=l.a.parseJSON(s);return a.default.vmMain.commitUpdateItems(),o.a.endAction(),n?e():t("Invalid JSON format. The developers have been notified with details of the error.")}catch(e){return t("The JSON file has errors. The developers have been notified with details of the error.",e)}},r.onerror=t,r.readAsText(i)):t("You must select a file before importing.")}catch(e){t(void 0,e)}},jsonSave:function(e,t,r){try{a.default.PAssert(2536,t,"JSON requires a success callback")}catch(e){a.default.reportError(e)}try{a.default.PAssert(2537,r,"JSON requires an error callback")}catch(e){a.default.reportError(e)}t()},gtasksLogin:function(e,t,r,i){try{a.default.PAssert(2542,r,"GTasks requires a success callback")}catch(e){a.default.reportError(e)}try{a.default.PAssert(2543,i,"GTasks requires an error callback")}catch(e){a.default.reportError(e)}d.default.runAuthenticate([GScope.TasksRO],!1,!1,function(e){e&&!e.error?(this.gtasks.token=e,r(e)):i("Unable to authenticate with Google. Please try again.",e)}.bind(this))},gtasksImport:function(e,t){try{a.default.PAssert(2544,e,"GTasks requires a success callback")}catch(e){a.default.reportError(e)}try{a.default.PAssert(2545,t,"GTasks requires an error callback")}catch(e){a.default.reportError(e)}var r={roots:[],remoteItems:{},unassigned:[]};this.gtasksGetLists(function(i){try{a.default.PAssert(2546,a.default.isArray(i),"List data must be an array")}catch(e){a.default.reportError(e)}for(var s=i.length,n=0,o=0;o<i.length;++o){var l=i[o];r.remoteItems[l.id]={id:l.id,text:l.title,isComplete:!1,dateCompleted:void 0,isArchived:!1,due:void 0,notes:void 0,parent:void 0,items:[]},r.roots.push(l.id),this.gtasksGetTasks(l,function(i,o){if(i){try{a.default.PAssert(2547,a.default.isArray(i),"List data must be an array")}catch(e){a.default.reportError(e)}if(a.default.isArray(i)){for(var l=0;l<i.length;++l){var d=i[l];if(d&&"completed"!==d.status){r.remoteItems[d.id]={id:d.id,text:d.title,isComplete:"completed"===d.status,dateCompleted:d.completed?new Date(d.completed):void 0,isArchived:d.hidden,due:d.due?new Date(d.due):void 0,notes:d.notes,parent:d.parent||o.id,items:[]};var c=r.remoteItems[d.parent||o.id];c?c.items.push(d.id):r.unassigned.push(d.id)}}++n===s&&e(r)}else t("Invalid task list returned.")}else n++}.bind(this),t)}}.bind(this),t)},gtasksGetLists:function(e,t){try{a.default.PAssert(2548,e,"GTasks requires a success callback")}catch(e){a.default.reportError(e)}try{a.default.PAssert(2549,t,"GTasks requires an error callback")}catch(e){a.default.reportError(e)}a.default.XHR({type:"GET",url:"https://www.googleapis.com/tasks/v1/users/@me/lists?maxResults=2000&key="+window.gapiKey+"&access_token="+u.a.getDefaultAccessToken(),cb:function(r){if(200===r.status)try{var i=JSON.parse(r.response);try{a.default.PAssert(2550,i&&i.items,"Must have a valid set of data to get tasks from")}catch(e){a.default.reportError(e)}i&&i.items?e(i.items):t("Error getting data from remote server.")}catch(e){t(e)}else t("Error contacting remote server.")}.bind(this)})},gtasksGetTasks:function(e,t,r){try{a.default.PAssert(2551,e,"GTasks requires a valid list to get tasks from")}catch(e){a.default.reportError(e)}try{a.default.PAssert(2552,t,"GTasks requires a success callback")}catch(e){a.default.reportError(e)}try{a.default.PAssert(2553,r,"GTasks requires an error callback")}catch(e){a.default.reportError(e)}a.default.XHR({type:"GET",url:"https://www.googleapis.com/tasks/v1/lists/"+e.id+"/tasks?maxResults=2500&key="+window.gapiKey+"&access_token="+u.a.getDefaultAccessToken(),cb:function(i){if(200===i.status)try{var s=JSON.parse(i.response);try{a.default.PAssert(2554,s,"Must have a valid array of tasks")}catch(e){a.default.reportError(e)}s&&s.items?t(s.items,e):t([],e)}catch(e){r(e)}else r("Error contacting remote server.")}.bind(this)})},gtasksSave:function(e,t,r){try{a.default.PAssert(2555,t,"GTasks requires a success callback")}catch(e){a.default.reportError(e)}try{a.default.PAssert(2556,r,"GTasks requires an error callback")}catch(e){a.default.reportError(e)}try{var i=function t(r,a){var i=r.text;r.due&&(i+=" @"+m(r.due));var s=n.a.createVMLI({text:i,isComplete:r.isComplete,dateCompleted:r.dateCompleted?r.dateCompleted.getTime():r.dateCompleted,isArchived:r.isArchived},{parent:a,changeType:ChangeType.AllLocal});if(a.insertItem(s),r.notes){var o=n.a.createVMLI({text:r.notes,isNote:!0},{parent:s,changeType:ChangeType.AllLocal});s.setNote(o,ChangeType.Local)}for(var l=0;l<r.items.length;++l)t(e.remoteItems[r.items[l]],s)};try{a.default.PAssert(2557,0===e.unassigned.length,"We should never have unassigned tasks")}catch(e){a.default.reportError(e)}o.a.beginAction(),a.default.vmMain.beginUpdateItems();var s=n.a.getRootModel();try{a.default.PAssert(2558,s,"Root item must exist in order to import")}catch(e){a.default.reportError(e)}var l=n.a.createVMLI({text:"Google Tasks Import"},{parent:s,changeType:ChangeType.AllLocal});s.insertItem(l);for(var d=0;d<e.roots.length;++d)i(e.remoteItems[e.roots[d]],l);a.default.vmMain.parseSubtree(l,ChangeType.Local|ChangeType.All),a.default.vmMain.commitUpdateItems(),o.a.endAction(),t()}catch(e){r(void 0,e)}},trelloPreload:function(e,t){window.Trello||this.trello.isLoading?e():(this.trello.isLoading=!0,a.default.addScript("https://code.jquery.com/jquery-1.7.1.min.js","jqueryScript",function(){a.default.addScript("https://api.trello.com/1/client.js?key=667ecf0c3d3e029c51d205b7173f6c38","trelloScript",function(){this.trello.isLoading=!1;try{a.default.PAssert(2559,window.Trello,"The Trello client lib must have been loaded correctly")}catch(e){a.default.reportError(e)}window.Trello?e():t("Error loading Trello. Please try again.")}.bind(this),function(e){this.trello.isLoading=!1,t(e)})}.bind(this),function(e){this.trello.isLoading=!1,t(e)}))},trelloLogin:function(e,t,r,i){try{a.default.PAssert(2560,window.Trello,"The Trello client lib was not properly loaded")}catch(e){a.default.reportError(e)}if(window.Trello){if(s.a.appPlatform===AppPlatform.Chrome){window.addEventListener("message",function e(t){a.default.getLocationOrigin()&&(window.removeEventListener("message",e),t.data.error?i("Error authenticating with Trello."):(Trello.setToken(t.data.token),r()))})}Trello.authorize({type:s.a.appPlatform===AppPlatform.Chrome?"redirect":"popup",name:"Moo.do",persist:!1,expiration:"1hour",success:r,error:i})}else i("Error loading Trello. Please try again.")},trelloImport:function(e,t){var r=[];Trello.get("members/me/boards",a.default.protectFn(function(a){var i=(a=a||[]).length,s=0;function n(){i===s&&e(r)}function o(e){s++,n()}for(var l=0;l<a.length;++l){var d=a[l];if(d.closed)i--;else{var c={text:d.name,items:[]};r.push(c),this._handleBoard(c,d.id,t,o)}}n()}.bind(this),t),t)},_handleBoard:function(e,t,r,i){Trello.get("boards/"+t+"/lists",a.default.protectFn(function(t){var a=0,s=t.length;function n(){a===s&&i()}function o(){a++,n()}for(var l=0;l<t.length;++l){var d=t[l];if(d.closed)s--;else{var c={text:d.name,items:[]};e.items.push(c),this._handleList(c,d.id,r,o)}}n()}.bind(this),r),r)},_handleList:function(e,t,r,s){Trello.get("lists/"+t+"/cards",a.default.protectFn(function(t){var a=0,n=t.length;function o(){a===n&&s()}function l(){a++,o()}for(var d=0;d<t.length;++d){var c=t[d];if(c.closed)n--;else{var u={text:c.name};if(c.labels&&c.labels.length>0){for(var h="",f=0;f<c.labels.length;++f){var p=c.labels[f];h+=i.a.TagPrefix+(p.name.length>0?p.name:p.color)+" "}u.text=h+u.text}if(c.due&&(u.text+=" "+i.a.DatePrefix+m(new Date(c.due))),c.desc&&c.desc.length>0){u.items=[];var g=c.desc.split("\n");for(f=0;f<g.length;++f){var v=g[f];v&&v.length>0&&u.items.push({text:v})}}if(c.idChecklists&&c.idChecklists.length>0){u.items||(u.items=[]);for(f=0;f<c.idChecklists.length;++f)this._handleChecklist(u,c.idChecklists[f],r,l)}else a++;e.items.push(u)}}o()}.bind(this),r),r)},_handleChecklist:function(e,t,r,i){Trello.get("checklists/"+t+"/",a.default.protectFn(function(t){for(var r={text:t.name,isCollapsed:!0,items:[]},a=0;a<t.checkItems.length;++a){var s=t.checkItems[a],n="complete"===s.state;if(!n){var o={text:s.name,isComplete:n};r.items.push(o)}}e.items.push(r),i()}.bind(this),r),r)},trelloSave:function(e,t,r){function i(e,t){var r=n.a.createVMLI({text:e.text,isComplete:e.isComplete,isCollapsed:e.isCollapsed},{parent:t,changeType:ChangeType.AllLocal});if(t.insertItem(r),e.items)for(var a=0;a<e.items.length;++a)i(e.items[a],r);return r}try{o.a.beginAction(),a.default.vmMain.beginUpdateItems();var s=n.a.getRootModel();try{a.default.PAssert(2561,s,"Root item must exist in order to import")}catch(e){a.default.reportError(e)}var l=n.a.createVMLI({text:"Trello Import"},{parent:s,changeType:ChangeType.AllLocal});s.insertItem(l);for(var d=0;d<e.length;++d)i(e[d],l);a.default.vmMain.commitUpdateItems(),o.a.endAction()}catch(e){return r(e)}t()},todoistLogin:function(e,t,r,i){try{a.default.PAssert(2562,r,"Todoist requires a success callback")}catch(e){a.default.reportError(e)}try{a.default.PAssert(2563,i,"Todoist requires an error callback")}catch(e){a.default.reportError(e)}var s="localhost"===window.location.hostname?"5d361221eddb4bcdb018457c7c74e698":"b701ac04f4df419ca4144ab208a9fb06",n="Dchs"+(new Date).getTime(),o="https://todoist.com/oauth/authorize?client_id="+s+"&scope=data:read&state="+n;window.open(o,"todoist","height=600,width=550");var l=function(e){var t=a.default.getLocationOrigin(),s=!1;try{s=e.data.state===n}catch(e){a.default.reportError(e)}if(t&&s)if(window.removeEventListener("message",l),e.data.error)i("Error authenticating with Todoist");else{var o=e.data.code;o&&a.default.XHR_PrivateAPI({type:"POST",path:"/oauth/todoist",data:{code:o},requireAuth:!0,cb:function(e){if(200===e.status){try{var t=JSON.parse(e.response).data;this.todoist.data=t}catch(e){i("Error parsing response from remote server.",e)}this.todoist.data?r():i("Invalid username or password")}else i("Error contacting remote server.")}.bind(this)})}}.bind(this);window.addEventListener("message",l)},todoistImport:function(e,t){try{a.default.PAssert(2564,e,"Todoist requires a success callback")}catch(e){a.default.reportError(e)}try{a.default.PAssert(2565,t,"Todoist requires an error callback")}catch(e){a.default.reportError(e)}for(var r=this.todoist.data,i={},s=0;s<r.projects.length;++s){var n=r.projects[s];n.is_archived||n.is_deleted||(i[n.id]={name:n.name,items:[]})}for(s=0;s<r.items.length;++s){var o=r.items[s];!i[o.project_id]||o.is_deleted||o.is_archived||o.checked||i[o.project_id].items.push(o)}e(i)},todoistSave:function(e,t,r){var i=[VMLIFlag.None,VMLIFlag.None,VMLIFlag.P2,VMLIFlag.P1,VMLIFlag.P0];function s(e,t){e.priority&&(e.priority=i[e.priority]),e.due_date_utc&&(e.content+=" @"+m(new Date(e.due_date_utc)));var r=n.a.createVMLI({text:e.content||"",isCollapsed:!!e.collapsed,priority:e.priority},{parent:t,changeType:ChangeType.AllLocal});return t.insertItem(r),r}try{o.a.beginAction(),a.default.vmMain.beginUpdateItems();var l=n.a.getRootModel();try{a.default.PAssert(2566,l,"Root item must exist in order to import")}catch(e){a.default.reportError(e)}var d=n.a.createVMLI({text:"Todoist Import"},{parent:l,changeType:ChangeType.AllLocal});for(var c in l.insertItem(d),e){var u=e[c],h=u.items;h.sort(function(e,t){return e.item_order>t.item_order});var f=n.a.createVMLI({text:u.name},{parent:d,changeType:ChangeType.AllLocal});d.insertItem(f);for(var p={},g=0;g<h.length;++g){var v=h[g];try{a.default.PAssert(2567,!v.parent_id||p[v.parent_id],"Parent exists and has not been created yet")}catch(e){a.default.reportError(e)}var y=v.parent_id?p[v.parent_id]:f;y||(y=f,v.content="[Error] "+v.content),p[v.id]=s(v,y)}}a.default.vmMain.commitUpdateItems(),o.a.endAction()}catch(e){return r(e)}t()},_createCSVEntry:function(e,t){for(var r={},a=0;a<e.length;++a)r[e[a]]=t[a];return r},parseCSV:function(e){for(var t=f.a.parse(e),r=["Area","Client","Contacts","Category","Context","Created By","Date Created","Date Updated","Delegated To","Start Date","Due Date","Links","Notes","Originating Entry","Parent Entries","Priority","Short Description","Title","Star","Status","Website References"],a=[],i=t.data[0],s=0;s<i.length;++s)r.indexOf(i[s])<0?console.log("Unknown CSV Headers: ",i[s]):a.indexOf(i[s])>=0&&a.remove(i[s]);if(0===a.length){var n=[];for(s=1;s<t.data.length;++s)n.push(this._createCSVEntry(i,t.data[s]))}else var o="Missing required export fields: "+a.join(", ");if(i.indexOf("Short Descrption")<0&&i.indexOf("Title")<0)o="Missing required export fields: Short Descrption OR Title.";return n||o}},t.default=p},238:function(e,t,r){var a,i,s;i=[],void 0===(s="function"==typeof(a=function(){"use strict";var e,t,r="undefined"!=typeof self?self:"undefined"!=typeof window?window:void 0!==r?r:{},a=!r.document&&!!r.postMessage,i=a&&/(\?|&)papaworker(=|&|$)/.test(r.location.search),s=!1,n={},o=0,l={parse:function(t,a){var i=(a=a||{}).dynamicTyping||!1;_(i)&&(a.dynamicTypingFunction=i,i={});if(a.dynamicTyping=i,a.worker&&l.WORKERS_SUPPORTED){var d=function(){if(!l.WORKERS_SUPPORTED)return!1;if(!s&&null===l.SCRIPT_PATH)throw new Error("Script path cannot be determined automatically when Papa Parse is loaded asynchronously. You need to set Papa.SCRIPT_PATH manually.");var t=l.SCRIPT_PATH||e;t+=(-1!==t.indexOf("?")?"&":"?")+"papaworker";var a=new r.Worker(t);return a.onmessage=v,a.id=o++,n[a.id]=a,a}();return d.userStep=a.step,d.userChunk=a.chunk,d.userComplete=a.complete,d.userError=a.error,a.step=_(a.step),a.chunk=_(a.chunk),a.complete=_(a.complete),a.error=_(a.error),delete a.worker,void d.postMessage({input:t,config:a,workerId:d.id})}var c=null;"string"==typeof t?c=a.download?new u(a):new f(a):!0===t.readable&&_(t.read)&&_(t.on)?c=new p(a):(r.File&&t instanceof File||t instanceof Object)&&(c=new h(a));return c.stream(t)},unparse:function(e,t){var r=!1,a=!0,i=",",s="\r\n",n='"';!function(){if("object"!=typeof t)return;"string"==typeof t.delimiter&&1===t.delimiter.length&&-1===l.BAD_DELIMITERS.indexOf(t.delimiter)&&(i=t.delimiter);("boolean"==typeof t.quotes||t.quotes instanceof Array)&&(r=t.quotes);"string"==typeof t.newline&&(s=t.newline);"string"==typeof t.quoteChar&&(n=t.quoteChar);"boolean"==typeof t.header&&(a=t.header)}();var o=new RegExp(n,"g");"string"==typeof e&&(e=JSON.parse(e));if(e instanceof Array){if(!e.length||e[0]instanceof Array)return c(null,e);if("object"==typeof e[0])return c(d(e[0]),e)}else if("object"==typeof e)return"string"==typeof e.data&&(e.data=JSON.parse(e.data)),e.data instanceof Array&&(e.fields||(e.fields=e.meta&&e.meta.fields),e.fields||(e.fields=e.data[0]instanceof Array?e.fields:d(e.data[0])),e.data[0]instanceof Array||"object"==typeof e.data[0]||(e.data=[e.data])),c(e.fields||[],e.data||[]);throw"exception: Unable to serialize unrecognized input";function d(e){if("object"!=typeof e)return[];var t=[];for(var r in e)t.push(r);return t}function c(e,t){var r="";"string"==typeof e&&(e=JSON.parse(e)),"string"==typeof t&&(t=JSON.parse(t));var n=e instanceof Array&&e.length>0,o=!(t[0]instanceof Array);if(n&&a){for(var l=0;l<e.length;l++)l>0&&(r+=i),r+=u(e[l],l);t.length>0&&(r+=s)}for(var d=0;d<t.length;d++){for(var c=n?e.length:t[d].length,h=0;h<c;h++){h>0&&(r+=i);var f=n&&o?e[h]:h;r+=u(t[d][f],h)}d<t.length-1&&(r+=s)}return r}function u(e,t){if(void 0===e||null===e)return"";e=e.toString().replace(o,n+n);var a="boolean"==typeof r&&r||r instanceof Array&&r[t]||function(e,t){for(var r=0;r<t.length;r++)if(e.indexOf(t[r])>-1)return!0;return!1}(e,l.BAD_DELIMITERS)||e.indexOf(i)>-1||" "===e.charAt(0)||" "===e.charAt(e.length-1);return a?n+e+n:e}}};if(l.RECORD_SEP=String.fromCharCode(30),l.UNIT_SEP=String.fromCharCode(31),l.BYTE_ORDER_MARK="\ufeff",l.BAD_DELIMITERS=["\r","\n",'"',l.BYTE_ORDER_MARK],l.WORKERS_SUPPORTED=!a&&!!r.Worker,l.SCRIPT_PATH=null,l.LocalChunkSize=10485760,l.RemoteChunkSize=5242880,l.DefaultDelimiter=",",l.Parser=g,l.ParserHandle=m,l.NetworkStreamer=u,l.FileStreamer=h,l.StringStreamer=f,l.ReadableStreamStreamer=p,r.jQuery){var d=r.jQuery;d.fn.parse=function(e){var t=e.config||{},a=[];return this.each(function(e){if(!("INPUT"===d(this).prop("tagName").toUpperCase()&&"file"===d(this).attr("type").toLowerCase()&&r.FileReader)||!this.files||0===this.files.length)return!0;for(var i=0;i<this.files.length;i++)a.push({file:this.files[i],inputElem:this,instanceConfig:d.extend({},t)})}),i(),this;function i(){if(0!==a.length){var t,r,i,n,o=a[0];if(_(e.before)){var c=e.before(o.file,o.inputElem);if("object"==typeof c){if("abort"===c.action)return t="AbortError",r=o.file,i=o.inputElem,n=c.reason,void(_(e.error)&&e.error({name:t},r,i,n));if("skip"===c.action)return void s();"object"==typeof c.config&&(o.instanceConfig=d.extend(o.instanceConfig,c.config))}else if("skip"===c)return void s()}var u=o.instanceConfig.complete;o.instanceConfig.complete=function(e){_(u)&&u(e,o.file,o.inputElem),s()},l.parse(o.file,o.instanceConfig)}else _(e.complete)&&e.complete()}function s(){a.splice(0,1),i()}}}function c(e){this._handle=null,this._paused=!1,this._finished=!1,this._input=null,this._baseIndex=0,this._partialLine="",this._rowCount=0,this._start=0,this._nextChunk=null,this.isFirstChunk=!0,this._completeResults={data:[],errors:[],meta:{}},function(e){var t=k(e);t.chunkSize=parseInt(t.chunkSize),e.step||e.chunk||(t.chunkSize=null);this._handle=new m(t),this._handle.streamer=this,this._config=t}.call(this,e),this.parseChunk=function(e){if(this.isFirstChunk&&_(this._config.beforeFirstChunk)){var t=this._config.beforeFirstChunk(e);void 0!==t&&(e=t)}this.isFirstChunk=!1;var a=this._partialLine+e;this._partialLine="";var s=this._handle.parse(a,this._baseIndex,!this._finished);if(!this._handle.paused()&&!this._handle.aborted()){var n=s.meta.cursor;this._finished||(this._partialLine=a.substring(n-this._baseIndex),this._baseIndex=n),s&&s.data&&(this._rowCount+=s.data.length);var o=this._finished||this._config.preview&&this._rowCount>=this._config.preview;if(i)r.postMessage({results:s,workerId:l.WORKER_ID,finished:o});else if(_(this._config.chunk)){if(this._config.chunk(s,this._handle),this._paused)return;s=void 0,this._completeResults=void 0}return this._config.step||this._config.chunk||(this._completeResults.data=this._completeResults.data.concat(s.data),this._completeResults.errors=this._completeResults.errors.concat(s.errors),this._completeResults.meta=s.meta),!o||!_(this._config.complete)||s&&s.meta.aborted||this._config.complete(this._completeResults,this._input),o||s&&s.meta.paused||this._nextChunk(),s}},this._sendError=function(e){_(this._config.error)?this._config.error(e):i&&this._config.error&&r.postMessage({workerId:l.WORKER_ID,error:e,finished:!1})}}function u(e){var t;(e=e||{}).chunkSize||(e.chunkSize=l.RemoteChunkSize),c.call(this,e),this._nextChunk=a?function(){this._readChunk(),this._chunkLoaded()}:function(){this._readChunk()},this.stream=function(e){this._input=e,this._nextChunk()},this._readChunk=function(){if(this._finished)this._chunkLoaded();else{if(t=new XMLHttpRequest,this._config.withCredentials&&(t.withCredentials=this._config.withCredentials),a||(t.onload=w(this._chunkLoaded,this),t.onerror=w(this._chunkError,this)),t.open("GET",this._input,!a),this._config.downloadRequestHeaders){var e=this._config.downloadRequestHeaders;for(var r in e)t.setRequestHeader(r,e[r])}if(this._config.chunkSize){var i=this._start+this._config.chunkSize-1;t.setRequestHeader("Range","bytes="+this._start+"-"+i),t.setRequestHeader("If-None-Match","webkit-no-cache")}try{t.send()}catch(e){this._chunkError(e.message)}a&&0===t.status?this._chunkError():this._start+=this._config.chunkSize}},this._chunkLoaded=function(){4==t.readyState&&(t.status<200||t.status>=400?this._chunkError():(this._finished=!this._config.chunkSize||this._start>function(e){var t=e.getResponseHeader("Content-Range");if(null===t)return-1;return parseInt(t.substr(t.lastIndexOf("/")+1))}(t),this.parseChunk(t.responseText)))},this._chunkError=function(e){var r=t.statusText||e;this._sendError(r)}}function h(e){var t,r;(e=e||{}).chunkSize||(e.chunkSize=l.LocalChunkSize),c.call(this,e);var a="undefined"!=typeof FileReader;this.stream=function(e){this._input=e,r=e.slice||e.webkitSlice||e.mozSlice,a?((t=new FileReader).onload=w(this._chunkLoaded,this),t.onerror=w(this._chunkError,this)):t=new FileReaderSync,this._nextChunk()},this._nextChunk=function(){this._finished||this._config.preview&&!(this._rowCount<this._config.preview)||this._readChunk()},this._readChunk=function(){var e=this._input;if(this._config.chunkSize){var i=Math.min(this._start+this._config.chunkSize,this._input.size);e=r.call(e,this._start,i)}var s=t.readAsText(e,this._config.encoding);a||this._chunkLoaded({target:{result:s}})},this._chunkLoaded=function(e){this._start+=this._config.chunkSize,this._finished=!this._config.chunkSize||this._start>=this._input.size,this.parseChunk(e.target.result)},this._chunkError=function(){this._sendError(t.error)}}function f(e){var t;e=e||{},c.call(this,e),this.stream=function(e){return e,t=e,this._nextChunk()},this._nextChunk=function(){if(!this._finished){var e=this._config.chunkSize,r=e?t.substr(0,e):t;return t=e?t.substr(e):"",this._finished=!t,this.parseChunk(r)}}}function p(e){e=e||{},c.call(this,e);var t=[],r=!0;this.stream=function(e){this._input=e,this._input.on("data",this._streamData),this._input.on("end",this._streamEnd),this._input.on("error",this._streamError)},this._nextChunk=function(){t.length?this.parseChunk(t.shift()):r=!0},this._streamData=w(function(e){try{t.push("string"==typeof e?e:e.toString(this._config.encoding)),r&&(r=!1,this.parseChunk(t.shift()))}catch(e){this._streamError(e)}},this),this._streamError=w(function(e){this._streamCleanUp(),this._sendError(e.message)},this),this._streamEnd=w(function(){this._streamCleanUp(),this._finished=!0,this._streamData("")},this),this._streamCleanUp=w(function(){this._input.removeListener("data",this._streamData),this._input.removeListener("end",this._streamEnd),this._input.removeListener("error",this._streamError)},this)}function m(e){var t,r,a,i=/^\s*-?(\d*\.?\d+|\d+\.?\d*)(e[-+]?\d+)?\s*$/i,s=this,n=0,o=!1,d=!1,c=[],u={data:[],errors:[],meta:{}};if(_(e.step)){var h=e.step;e.step=function(t){if(u=t,p())f();else{if(f(),0===u.data.length)return;n+=t.data.length,e.preview&&n>e.preview?r.abort():h(u,s)}}}function f(){if(u&&a&&(v("Delimiter","UndetectableDelimiter","Unable to auto-detect delimiting character; defaulted to '"+l.DefaultDelimiter+"'"),a=!1),e.skipEmptyLines)for(var t=0;t<u.data.length;t++)1===u.data[t].length&&""===u.data[t][0]&&u.data.splice(t--,1);return p()&&function(){if(!u)return;for(var e=0;p()&&e<u.data.length;e++)for(var t=0;t<u.data[e].length;t++)c.push(u.data[e][t]);u.data.splice(0,1)}(),function(){if(!u||!e.header&&!e.dynamicTyping)return u;for(var t=0;t<u.data.length;t++){for(var r=e.header?{}:[],a=0;a<u.data[t].length;a++){var i=a,s=u.data[t][a];e.header&&(i=a>=c.length?"__parsed_extra":c[a]),s=m(i,s),"__parsed_extra"===i?(r[i]=r[i]||[],r[i].push(s)):r[i]=s}u.data[t]=r,e.header&&(a>c.length?v("FieldMismatch","TooManyFields","Too many fields: expected "+c.length+" fields but parsed "+a,t):a<c.length&&v("FieldMismatch","TooFewFields","Too few fields: expected "+c.length+" fields but parsed "+a,t))}e.header&&u.meta&&(u.meta.fields=c);return u}()}function p(){return e.header&&0===c.length}function m(t,r){return function(t){return e.dynamicTypingFunction&&void 0===e.dynamicTyping[t]&&(e.dynamicTyping[t]=e.dynamicTypingFunction(t)),!0===(e.dynamicTyping[t]||e.dynamicTyping)}(t)?"true"===r||"TRUE"===r||"false"!==r&&"FALSE"!==r&&(a=r,i.test(a)?parseFloat(a):a):r;var a}function v(e,t,r,a){u.errors.push({type:e,code:t,message:r,row:a})}this.parse=function(i,s,n){if(e.newline||(e.newline=function(e){var t=(e=e.substr(0,1048576)).split("\r"),r=e.split("\n"),a=r.length>1&&r[0].length<t[0].length;if(1===t.length||a)return"\n";for(var i=0,s=0;s<t.length;s++)"\n"===t[s][0]&&i++;return i>=t.length/2?"\r\n":"\r"}(i)),a=!1,e.delimiter)_(e.delimiter)&&(e.delimiter=e.delimiter(i),u.meta.delimiter=e.delimiter);else{var d=function(t,r){for(var a,i,s,n=[",","\t","|",";",l.RECORD_SEP,l.UNIT_SEP],o=0;o<n.length;o++){var d=n[o],c=0,u=0;s=void 0;for(var h=new g({delimiter:d,newline:r,preview:10}).parse(t),f=0;f<h.data.length;f++){var p=h.data[f].length;u+=p,void 0!==s?p>1&&(c+=Math.abs(p-s),s=p):s=p}h.data.length>0&&(u/=h.data.length),(void 0===i||c<i)&&u>1.99&&(i=c,a=d)}return e.delimiter=a,{successful:!!a,bestDelimiter:a}}(i,e.newline);d.successful?e.delimiter=d.bestDelimiter:(a=!0,e.delimiter=l.DefaultDelimiter),u.meta.delimiter=e.delimiter}var c=k(e);return e.preview&&e.header&&c.preview++,t=i,r=new g(c),u=r.parse(t,s,n),f(),o?{meta:{paused:!0}}:u||{meta:{paused:!1}}},this.paused=function(){return o},this.pause=function(){o=!0,r.abort(),t=t.substr(r.getCharIndex())},this.resume=function(){o=!1,s.streamer.parseChunk(t)},this.aborted=function(){return d},this.abort=function(){d=!0,r.abort(),u.meta.aborted=!0,_(e.complete)&&e.complete(u),t=""}}function g(e){var t=(e=e||{}).delimiter,r=e.newline,a=e.comments,i=e.step,s=e.preview,n=e.fastMode,o=e.quoteChar||'"';if(("string"!=typeof t||l.BAD_DELIMITERS.indexOf(t)>-1)&&(t=","),a===t)throw"Comment character same as delimiter";!0===a?a="#":("string"!=typeof a||l.BAD_DELIMITERS.indexOf(a)>-1)&&(a=!1),"\n"!=r&&"\r"!=r&&"\r\n"!=r&&(r="\n");var d=0,c=!1;this.parse=function(e,l,u){if("string"!=typeof e)throw"Input must be a string";var h=e.length,f=t.length,p=r.length,m=a.length,g=_(i);d=0;var v=[],y=[],b=[],k=0;if(!e)return x();if(n||!1!==n&&-1===e.indexOf(o)){for(var w=e.split(r),E=0;E<w.length;E++){b=w[E];if(d+=b.length,E!==w.length-1)d+=r.length;else if(u)return x();if(!a||b.substr(0,m)!==a){if(g){if(v=[],C(b.split(t)),R(),c)return x()}else C(b.split(t));if(s&&E>=s)return v=v.slice(0,s),x(!0)}}return x()}for(var T=e.indexOf(t,d),I=e.indexOf(r,d),A=new RegExp(o+o,"g");;)if(e[d]!==o)if(a&&0===b.length&&e.substr(d,m)===a){if(-1===I)return x();d=I+p,I=e.indexOf(r,d),T=e.indexOf(t,d)}else if(-1!==T&&(T<I||-1===I))b.push(e.substring(d,T)),d=T+f,T=e.indexOf(t,d);else{if(-1===I)break;if(b.push(e.substring(d,I)),L(I+p),g&&(R(),c))return x();if(s&&v.length>=s)return x(!0)}else{var P=d;for(d++;;){if(-1===(P=e.indexOf(o,P+1)))return u||y.push({type:"Quotes",code:"MissingQuotes",message:"Quoted field unterminated",row:v.length,index:d}),S();if(P===h-1)return S(e.substring(d,P).replace(A,o));if(e[P+1]!==o){if(e[P+1]===t){b.push(e.substring(d,P).replace(A,o)),d=P+1+f,T=e.indexOf(t,d),I=e.indexOf(r,d);break}if(e.substr(P+1,p)===r){if(b.push(e.substring(d,P).replace(A,o)),L(P+1+p),T=e.indexOf(t,d),g&&(R(),c))return x();if(s&&v.length>=s)return x(!0);break}}else P++}}return S();function C(e){v.push(e),k=d}function S(t){return u?x():(void 0===t&&(t=e.substr(d)),b.push(t),d=h,C(b),g&&R(),x())}function L(t){d=t,C(b),b=[],I=e.indexOf(r,d)}function x(e){return{data:v,errors:y,meta:{delimiter:t,linebreak:r,aborted:c,truncated:!!e,cursor:k+(l||0)}}}function R(){i(x()),v=[],y=[]}},this.abort=function(){c=!0},this.getCharIndex=function(){return d}}function v(e){var t=e.data,r=n[t.workerId],a=!1;if(t.error)r.userError(t.error,t.file);else if(t.results&&t.results.data){var i={abort:function(){a=!0,y(t.workerId,{data:[],errors:[],meta:{aborted:!0}})},pause:b,resume:b};if(_(r.userStep)){for(var s=0;s<t.results.data.length&&(r.userStep({data:[t.results.data[s]],errors:t.results.errors,meta:t.results.meta},i),!a);s++);delete t.results}else _(r.userChunk)&&(r.userChunk(t.results,i,t.file),delete t.results)}t.finished&&!a&&y(t.workerId,t.results)}function y(e,t){var r=n[e];_(r.userComplete)&&r.userComplete(t),r.terminate(),delete n[e]}function b(){throw"Not implemented."}function k(e){if("object"!=typeof e)return e;var t=e instanceof Array?[]:{};for(var r in e)t[r]=k(e[r]);return t}function w(e,t){return function(){e.apply(t,arguments)}}function _(e){return"function"==typeof e}return i?r.onmessage=function(e){var t=e.data;void 0===l.WORKER_ID&&t&&(l.WORKER_ID=t.workerId);if("string"==typeof t.input)r.postMessage({workerId:l.WORKER_ID,results:l.parse(t.input,t.config),finished:!0});else if(r.File&&t.input instanceof File||t.input instanceof Object){var a=l.parse(t.input,t.config);a&&r.postMessage({workerId:l.WORKER_ID,results:a,finished:!0})}}:l.WORKERS_SUPPORTED&&(t=document.getElementsByTagName("script"),e=t.length?t[t.length-1].src:"",document.body?document.addEventListener("DOMContentLoaded",function(){s=!0},!0):s=!0),u.prototype=Object.create(c.prototype),u.prototype.constructor=u,h.prototype=Object.create(c.prototype),h.prototype.constructor=h,f.prototype=Object.create(f.prototype),f.prototype.constructor=f,p.prototype=Object.create(c.prototype),p.prototype.constructor=p,l})?a.apply(t,i):a)||(e.exports=s)}});
//# sourceMappingURL=dimport-1521699980649.js.map