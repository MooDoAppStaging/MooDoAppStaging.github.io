(window.webpackJsonp=window.webpackJsonp||[]).push([[0],Array(75).concat([function(e,t,a){"use strict";var n=a(0),i=a(1),r=a(2),o=a.n(r),s=a(12),l=(a(3),a(33)),c=a(10),d=s.a.createClass({displayName:"FancyModal",componentDisplay:i.a.ComponentDisplay.Everywhere,close:function(e){n.default.menus.closeModalNew(this.props.modalID,e)},onCloseButton:function(e){this.props.onCloseButton?this.props.onCloseButton():this.close()},onEscapeKey:function(){this.close()},render:function(){var e,t=this.props,a=this.getChildByKey("sidebar"),i=this.getChildByKey("content"),r=this.getChildByKey("buttons"),s={maxHeight:t.height?"95%":null},d=n.default.classNames("fancyModal c-bg-app popup c-shadow-popup",t.className,{"flexbox flexvert":!0},{small:t.small},{hasSidebar:!!a},{hasTitle:!!t.title},{hasButtons:!!r}),u=n.default.classNames("fancyModalWrapper",{"small flexbox":t.small}),m=n.default.classNames("fancyModalContent c-border c-background",{flex1:!0},i.props.className),h=o.a.createElement(l.a,{className:m,scrollable:t.scrollable},i.props.children||i);if(t.small||(s.width=t.width,s.height=t.height,s.minWidth=t.minWidth),a){var p={width:a.props.width||180};e=o.a.createElement("div",{className:"fancyModalSidebar",style:p},a.props.children)}return o.a.createElement("span",{className:u},o.a.createElement("div",{className:"fancyModalBackdrop",onClick:!1!==t.backdropClose?this.close.bind(this,!1):void 0}),o.a.createElement("div",{className:d,style:s,id:t.id},!1!==t.closeButton&&o.a.createElement(c.a,{className:"fancyModalClose",icon:"icon-close",iconSize:20,width:50,height:50,onClick:this.onCloseButton,tooltip:"Close"}),t.title&&o.a.createElement("div",{className:"fancyModalTitle"},t.title),o.a.createElement("div",{className:"fancyModalInside flexbox flex1"},e,o.a.createElement("div",{className:"fancyModalContentArea c-border-light c-background flexbox flexvert f1"},h,r&&o.a.createElement("div",{className:n.default.classNames("fancyModalButtons c-background",{border:t.buttonsBorder})},r)))))}});t.a=d},function(e,t,a){"use strict";var n=a(0),i=a(1),r=a(2),o=a.n(r),s=a(12),l=(a(4),a(23)),c=s.a.createClass({displayName:"FancyTextArea",componentDisplay:i.a.ComponentDisplay.Everywhere,init:function(){this.createObservables({isFocused:this.props.focused||!1})},componentDidMount:function(){var e=this.refs.input;this.props.value&&(e.value=this.props.value),this.props.focused&&requestAnimationFrame(function(){e.focus(),void 0!==this.props.selectionStart&&(e.selectionStart=this.props.selectionStart),void 0!==this.props.selectionEnd&&(e.selectionEnd=this.props.selectionEnd),e.scrollTop=0}.bind(this))},onUnmount:function(){this.isFocused.get()&&this.onBlur()},focus:function(){this.refs.input.focus()},blur:function(){this.refs.input.blur()},getValue:function(){return this.refs.input.value},setValue:function(e){this.refs.input.value=e},getSelectionStart:function(){return this.refs.input.selectionStart},getSelectionEnd:function(){return this.refs.input.selectionEnd},onFocus:function(e){n.default.vmMain.activeInput.set(this),this.isFocused.set(!0),this.props.onEscape&&(this.__hotkeyEscape=l.a.pushStackEscape(this.handleEscapeKey)),this.props.onFocus&&this.props.onFocus(e)},onBlur:function(e){n.default.vmMain.activeInput.set(null),this.isFocused.set(!1),this.__hotkeyEscape&&(l.a.popStack(this.__hotkeyEscape),this.__hotkeyEscape=void 0),this.props.onBlur&&this.props.onBlur(e)},onKeyPress:function(e){this.props.onKeyPress&&this.props.onKeyPress(e)},handleEscapeKey:function(){this.props.onEscape&&this.props.onEscape()},render:function(){var e=this.props,t=n.default.classNames("fancyTextarea c-background c-foreground",e.className),a=e.spellCheck?"true":null,i={fontSize:e.fontSize,height:e.height||150,margin:void 0!==e.margin?e.margin:"16px 0",overflow:e.height<=34&&"hidden"};return o.a.createElement("textarea",{className:t,style:i,ref:"input",readOnly:!!e.isReadOnly,spellCheck:a,onClick:e.onClick,onChange:e.onChange,onFocus:this.onFocus,onBlur:this.onBlur,onKeyDown:e.onKeyDown,onKeyPress:e.onKeyPress,placeholder:e.placeholder,tabIndex:e.tabIndex})}});t.a=c},function(e,t,a){"use strict";var n=a(0),i=a(1),r=(a(4),a(2)),o=a.n(r),s=a(12),l=a(47),c=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var n in a)Object.prototype.hasOwnProperty.call(a,n)&&(e[n]=a[n])}return e};var d=s.a.createClass({displayName:"FancyListItem",componentDisplay:i.a.ComponentDisplay.Desktop,render:function(){var e=this.props,t=e.header,a=(e.clickable,e.subtext,function(e,t){var a={};for(var n in e)t.indexOf(n)>=0||Object.prototype.hasOwnProperty.call(e,n)&&(a[n]=e[n]);return a}(e,["header","clickable","subtext"])),i=n.default.classNames("fancyListItem",{header:e.header},{clickable:!e.header&&!1!==e.clickable},{"selected c-background c-border-light":e.selected},{subtext:e.subtext},e.className);return!1!==e.ripple&&!t&&!1!==e.clickable?o.a.createElement(l.a,c({},a,{className:i}),e.children):o.a.createElement("div",c({},a,{className:i}),this.props.children)}});t.a=d},function(e,t,a){"use strict";var n=a(0),i=a(1),r=(a(4),a(2)),o=a.n(r),s=a(12).a.createClass({displayName:"FancyTable",componentDisplay:i.a.ComponentDisplay.Desktop,render:function(){var e=n.default.classNames("fancyTable",this.props.className);return o.a.createElement("div",{className:e,id:this.props.id},this.props.children)}});t.a=s},function(e,t,a){"use strict";var n=a(0),i=a(1),r=a(2),o=a.n(r),s=a(12),l=a(17),c=a(10),d=a(32),u=s.a.createClass({displayName:"ReactInviteSection",componentDisplay:i.a.ComponentDisplay.Desktop,getState:function(){var e=n.default.billingManager;return{validBilling:e._hasValidBillingData,premiumStatus:e._premiumStatus,inviteEmailSuccess:e.inviteEmailSuccess,inviteEmailError:e.inviteEmailError,inviteCodeError:e.inviteCodeError}},onTapInviteUrl:function(e){var t=e.target;t!==document.activeElement&&(l.default.selectElement(t),e.preventDefault(),n.default.sendEvent("Billing","TapInviteUrl"))},inviteEmails:function(){for(var e=this.refs.inviteEmails.getTokens(),t=[],a=0;a<e.length;a++)t.push(e[a].email);n.default.billingManager.sendInviteEmail(t)},render:function(){var e=n.default.billingManager,t=this.state;return o.a.createElement("span",{className:"new-modal-group"},o.a.createElement("div",{className:"new-modal-title"},o.a.createElement("div",{className:"title"},"Share Moo.do with your friends"),o.a.createElement("div",{className:"subtext center"},"Thank you for spreading the ",o.a.createElement("i",{className:"icon-heart red"}))),o.a.createElement("div",{className:"new-modal-center"},o.a.createElement("div",null,o.a.createElement("div",{className:"subtitle"},"Social"),o.a.createElement("span",{className:"shareIcons"},o.a.createElement(c.a,{iconSize:22,icon:"icon-twitter",tooltip:"@MooDoApp",onClick:e.shareTwitter.bind(e)}),o.a.createElement(c.a,{iconSize:22,marginLeft:16,marginRight:16,icon:"icon-facebook",tooltip:"@MooDoApp",onClick:e.shareFacebook.bind(e)}),o.a.createElement(c.a,{iconSize:22,icon:"icon-google-plus",tooltip:"@MooDoApp",onClick:e.shareGoogle.bind(e)})),o.a.createElement("br",null),o.a.createElement("br",null),o.a.createElement("div",{className:"subtitle"},"Share Link"),o.a.createElement("div",{className:"subtext"},e.getSelectText()),o.a.createElement(d.a,{display:"inline-block",width:280,height:36,value:e.getInviteUrl(),onMouseDown:this.onTapInviteUrl,readonly:!0}),o.a.createElement("br",null),o.a.createElement("br",null),o.a.createElement("div",{className:"subtitle"},"Share by email"),o.a.createElement("div",{className:"subtext"},"Separate multiple email addresses with commas."),o.a.createElement(d.a,{ref:"inviteEmails",width:350,buttonWidth:70,height:36,autocompleteMode:"email",placeholder:"Add friends' email addresses",buttonText:"SEND",onButtonClick:this.inviteEmails}),(t.inviteEmailSuccess||t.inviteEmailError)&&o.a.createElement("div",{id:"inviteEmailMessage",className:n.default.classNames({success:t.inviteEmailSuccess},{error:t.inviteEmailError})},t.inviteEmailSuccess||t.inviteEmailError))))}});t.a=u},function(e,t,a){"use strict";a.r(t);var n=a(0),i=a(4),r=a(1),o=a(18),s=a(2),l=a.n(s),c=a(38),d=a.n(c),u=a(12),m=a(30),h=a(45),p=a(83),g=(a(53),0),f=1,v=2,E=4,C=8,y=["now","soon","later","someday"],k=["today","tomorrow"],b=["next"],S=["mon","tue","wed","thu","fri","sat","sun"],D=["january","february","march","april","may","june","july","august","september","october","november","december"],N=["every"],M=["first","other","last"],x=[0,1,2,3,4,5,6],w=y.concat(N),P=(w.concat(k).concat(M).concat(b).concat(S).concat(D),u.a.createClass({displayName:"ReactAutocompleteDates",componentDisplay:r.a.ComponentDisplay.Everywhere,init:function(){this.text="",this.createObservables({nextDateWord:g})},isInMode:function(e){return 0===e?0===this.state.nextDateWord:n.default.isFlagSet(this.state.nextDateWord,e)},getShortMonth:function(e){return Date.CultureInfo.abbreviatedMonthNames[e]},getLongMonth:function(e){return Date.CultureInfo.monthNames[e]},getShortDay:function(e){return Date.CultureInfo.abbreviatedDayNames[e]},getLongDay:function(e){return Date.CultureInfo.dayNames[e]},getMonthList:function(){var e=(new Date).getMonth()-1;e<0&&(e=12+e);for(var t=e+1+5,a=[],n=e;n<t;++n){var i=n%12;a.push(i)}return a},nextWordOptions:function(e){var t=e.toLowerCase().split(" "),a=t[t.length-1];if(""===a&&(a=t[t.length-2]),y.indexOf(a)>=0)return g;if(N.indexOf(a)>=0)return f|C;if(M.indexOf(a)>=0)return f;if(k.indexOf(a)>=0)return E;if(b.indexOf(a)>=0)return f;if(S.indexOf(a)>=0)return E;if(D.indexOf(a)>=0)return v;var n=parseInt(a,10);return isNaN(n)?a.indexOf(":")>=0?E:g:E},onTapDate:function(e){var t=e.target;if("SPAN"===t.nodeName){var a=t.textContent.trim(),i=this.nextWordOptions(a),r=i===g;this.nextDateWord.set(i),this.text+=a,n.default.findParentID(t,"autocompleteHours",2)||n.default.findParentID(t,"autocompleteMinutes",2)||(this.text+=" "),console.log(a,i,r),this.props.setText(this.text)}},render:function(){var e=this,t=(this.state.nextDateWord,""===this.text);return l.a.createElement("div",{id:"autocompleteDates",className:"f1",onClick:this.onTapDate},(this.isInMode(g)||this.isInMode(f))&&l.a.createElement("div",{id:"autocompleteDate"},l.a.createElement("div",{className:n.default.classNames({disabled:!t})},w.map(function(e){return l.a.createElement("span",{key:e},e)})),!this.isInMode(C)&&l.a.createElement("div",{className:n.default.classNames({disabled:!t})},l.a.createElement("span",null,"today"),l.a.createElement("span",null,"tomorrow"),l.a.createElement("span",null,"next")),this.isInMode(C)&&l.a.createElement("div",null,l.a.createElement("span",null,"first"),l.a.createElement("span",null,"other"),l.a.createElement("span",null,"last")),l.a.createElement("div",{id:"datePickerDays"},x.map(function(t){var a=e.getLongDay(t);return l.a.createElement("span",{key:a},e.getShortDay(t))})),l.a.createElement("div",{className:n.default.classNames({disabled:!t})},e.getMonthList().map(function(t){var a=e.getLongMonth(t);return l.a.createElement("span",{key:a},e.getShortMonth(t))}))),this.isInMode(v)&&l.a.createElement("div",{id:"autocompleteDay"},l.a.createElement("div",{className:"flexcolumn"},l.a.createElement("div",{className:"autocompleteDays"},Array.apply(0,Array(31)).map(function(e,t){return l.a.createElement("span",{key:t},t+1)})))),this.isInMode(E)&&l.a.createElement("div",{id:"autocompleteTime"},l.a.createElement("div",{className:"flexcolumn"},l.a.createElement("div",{id:"autocompleteHours"},Array.apply(0,Array(12)).map(function(e,t){return l.a.createElement("span",{key:t},t+1)}))),l.a.createElement("div",{className:"flexcolumn"},l.a.createElement("div",{id:"autocompleteMinutes"},l.a.createElement("span",null,":15"),l.a.createElement("span",null,":30"),l.a.createElement("span",null,":45"))),l.a.createElement("div",{className:"flexcolumn"},l.a.createElement("div",{id:"autocompleteAMPM"},l.a.createElement("span",null,"am"),l.a.createElement("span",null,"pm")))))}}),a(10)),I=a(32),T=a(33),A=a(31),O=a(28),R=u.a.createClass({displayName:"ReactAutocomplete",componentDisplay:r.a.ComponentDisplay.Everywhere,init:function(){var e=this.props;this.createObservables({selectedIndex:e.elementInput||e.fromPane||e.onlyMatches?0:-1,expanded:!1})},componentDidMount:function(){if(this.hasOwnInput()){var e=this.props,t=this.refs.input;t.focus(),t.updateAutocomplete(e.item||e.items&&e.items[0])}document.addEventListener("keydown",this.onInputKeyDown,!0)},componentWillReceiveProps:function(e){this.props.matches!==e.matches&&this.updateState(e)},onUnmount:function(){document.removeEventListener("keydown",this.onInputKeyDown,!0)},onBeforeChanged:function(e,t){var a=this.refs;if(e.matches!==t.matches&&!e.hasSpecialMatches){this.expanded.set(!1,!1),e.expanded=!1;var n=!a.input||!this.props.allowCustom&&a.input.getValue()&&this.state.matches.length>0?0:-1;this.selectedIndex.set(n,!1),e.selectedIndex=n}},onAfterChanged:function(e,t){e.matches.length>t.matches.length&&setTimeout(function(){this.refs.contextMenu&&this.refs.contextMenu.updateState()}.bind(this),0)},getState:function(e){var t=this.getSpecialMatches();return{matches:e.matches||t||m.a.matches,hasSpecialMatches:!!t,kbsize:i.a.kbsize,owner:m.a.owner}},updateTextFromIndex:function(){if(this.hasOwnInput()){var e=this.refs.input,t=this.selectedIndex.get(),a="";if(t>=0){var n=this.state.matches[t];a=this.getInsertText(n)}e.setValue(a),e.selectEnd()}},onInputKeyDown:function(e){var t=this.state,a=this.props;if(a.allowCustom&&e.keyCode===KeyCode.Enter)this.onSelected(),n.default.preventDefault(e),n.default.stopPropagation(e);else if(t.matches.length>0){var i=this.selectedIndex.get();if(e.keyCode===KeyCode.DownArrow||e.keyCode===KeyCode.UpArrow){if(e.keyCode===KeyCode.UpArrow?--i<(a.allowCustom?-1:0)&&(i=t.matches.length-1):e.keyCode===KeyCode.DownArrow&&++i>t.matches.length-1&&(i=a.allowCustom?-1:0),i!==this.selectedIndex.get()&&(this.selectedIndex.set(i),this.updateTextFromIndex(),i>=0)){var r=this.refs["item_"+this.selectedIndex.get()];try{n.default.PAssert(1973,r,"Item must exist in autocomplete to be scrolled to")}catch(e){n.default.reportError(e)}if(r){var o=d.a.findDOMNode(r);n.default.scrollIntoView(o,ScrollDuration.Default)}}n.default.preventDefault(e)}else e.keyCode===KeyCode.RightArrow?this.expanded.set(i):e.keyCode===KeyCode.Enter&&i>=0&&(this.onSelected(),n.default.preventDefault(e),n.default.stopPropagation(e))}},onEscapeKey:function(){this.hide(!0)},hide:function(e){m.a.hide(e)},onMouseOver:function(e){this.selectedIndex.set(e)},onClick:function(e){this.selectedIndex.set(e),this.updateTextFromIndex(),this.onSelected()},onButtonClick:function(){this.onSelected()},hasOwnInput:function(){return!this.props.elementInput&&!this.props.fromPane&&!this.props.onlyMatches},onSelected:function(){var e,t,a=this.props,n=this.state,i={owner:n.owner,index:a.indexInPane};if(a.allowCustom)(a.allowEmpty||this.refs.input.getValue())&&(t={text:this.refs.input.getValue()});else{var r=this.selectedIndex.get();t=this.state.matches[r]}t&&("contact"===t.type&&"email"===this.props.mode?(e=m.a.insertMatch(""),i.token=t):"item"===t.type?(e=m.a.insertMatch(""),i.item=t.item):e=m.a.insertMatch(this.getInsertText(t)),e&&(i.value=e.text,i.offset=e.offset),a.onSelected?a.onSelected(i):n.owner&&n.owner.onAutocompleteSelected&&n.owner.onAutocompleteSelected(i),this.hide())},getInsertText:function(e){return"email"===this.props.mode?e.text+" <"+e.email+">":"snooze"===e.type?e.insertText:e.text},insertHighlight:function(e){var t=[],a=m.a.getText(),n=e.toUpperCase().indexOf(a.toUpperCase());return n>=0&&a.length>0?(n>0&&t.push(e.substr(0,n)),t.push(l.a.createElement("span",{key:"match",className:"ac-match c-bg-autocomplete-highlight"},e.substr(n,a.length))),e.length>n+a.length&&t.push(e.substr(n+a.length))):t=e,t},onClickExpand:function(e,t){this.expanded.set(e),t.stopPropagation()},onClickExpandedInput:function(e){e.stopPropagation()},onSelectedAddChild:function(){var e=this.props,t=this.state,a=t.expanded,n=t.matches[a];if(e.onSelected){var i={item:n.item,subItemText:this.refs.inputAdd.getValue()};e.onSelected(i)}},getSpecialMatches:function(){if("snooze"===this.props.mode){var e=new Date,t=e.getHours(),a=e.getDay(),i=e.clone().clearTime().addHours(Math.min(t+3,23+59/60)),r=e.clone().clearTime();t<18?r.addHours(19):r.addHours(Math.min(t+2,23+59/60));var s=e.clone().clearTime();a<6?s.addDays(6-e.getDay()).addHours(9):6===a?s.addDays(1).addHours(9):s.addHours(Math.min(t+3,23+59/60));var l=e.clone().clearTime();a>0?l.addDays(8-e.getDay()).addHours(9):l.addDays(1).addHours(9);var c=e.clone().clearTime().addDays(1).addHours(9),d=e.clone().clearTime().addDays(1).addHours(19);return[{type:"snooze",icon:"icon-access_time",iconColor:"#f30",text:"Later Today",insertText:"Today "+i.toString(o.a.getFormat(DFormat.ShortTime)),date:i,showDay:!1},{type:"snooze",icon:"icon-access_time",iconColor:"#fa0",text:"Tonight",insertText:"Today "+r.toString(o.a.getFormat(DFormat.ShortTime)),date:r,showDay:!1},{type:"snooze",icon:"icon-access_time",iconColor:"#fd0",text:"Tomorrow Morning",insertText:"Tomorrow "+c.toString(o.a.getFormat(DFormat.ShortTime)),date:c,showDay:!0},{type:"snooze",icon:"icon-access_time",iconColor:"#2a6",text:"Tomorrow Night",insertText:"Tomorrow "+d.toString(o.a.getFormat(DFormat.ShortTime)),date:d,showDay:!0},{type:"snooze",icon:"icon-access_time",iconColor:n.default.colorBlue,text:"This Weekend",insertText:s.toString(o.a.getFormat(DFormat.NoPadShortDayTime)),date:s,showDay:!0},{type:"snooze",icon:"icon-access_time",iconColor:"#b0d",text:"Next Week",insertText:l.toString(o.a.getFormat(DFormat.NoPadShortDayTime)),date:l,showDay:!0}]}},onCloseButton:function(){n.default.menus.closeContextMenu()},setText:function(e){this.refs.input.setValue(e)},renderSpecialAutocomplete:function(){0},renderRightContent:function(){var e=this.state;if(e.matches.length>0&&e.selectedIndex>=0){var t,a=e.matches[e.selectedIndex];if("contact"===a.type&&(t=l.a.createElement(p.a,{contact:a})),t)return l.a.createElement("div",{className:"newAutocompleteRightContent c-border"},t)}},renderObject:function(e,t){var a;switch(e.type){case"contact":if(e.text&&e.email){a=this.insertHighlight(e.text);var i=this.insertHighlight(" <"+e.email+">");return l.a.createElement("span",null,l.a.createElement("span",{className:"contact c-contact"},a),i)}if(e.email)return e.email;if(e.text)return a=this.insertHighlight(e.text),l.a.createElement("span",{className:"contact c-contact"},a);break;case"tag":return a=this.insertHighlight(e.text),l.a.createElement(l.a.Fragment,null,l.a.createElement("span",{className:"tag c-tag"},a),l.a.createElement("span",{className:"number c-foreground-faded"},e.count));case"date":return a=this.insertHighlight(e.text),l.a.createElement("span",{className:"date c-date"},a);case"snooze":var o=(e.showDay?e.date.toString("dddd")+" ":"")+e.date.toString("h:mm tt");return l.a.createElement(l.a.Fragment,null,l.a.createElement("span",{className:"snoozeDate"},e.text),l.a.createElement("span",{className:"snoozeDetail"},o));case"item":var s=e.item,c=n.default.parentTextForItem(s),d=t===this.state.expanded,u=n.default.classNames("autocompleteItem flexbox",{hasParent:!!c},{itemExpanded:d}),m=this.props.mode===r.a.AutocompleteMode.Move;return l.a.createElement("div",{className:u},l.a.createElement("div",{className:"autocompleteItemInside f1"},c&&l.a.createElement("div",{className:"parentPath c-foreground-very-faded"},c),l.a.createElement(h.a,{key:s.id,item:s}),m&&d&&l.a.createElement(I.a,{ref:"inputAdd",placeholder:"Add subitem",buttonText:"MOVE TO CHILD",focused:!0,onButtonClick:this.onSelectedAddChild,onClick:this.onClickExpandedInput})),m&&l.a.createElement(P.a,{icon:d?"icon-angle-down":"icon-angle-right",className:"autocompleteExpand",width:46,height:46,onClick:this.onClickExpand.bind(this,t),tooltip:"Add sub-item"}));case r.a.AutocompleteMode.GmailLabel:return a=this.insertHighlight(e.text),l.a.createElement("span",null,a);default:try{n.default.PAssert(1974,!1,"Invalid insert text",e.type)}catch(e){n.default.reportError(e)}}},render:function(){for(var e=this.state,t=this.props,a=[],i=0;i<e.matches.length;i++){var r=e.matches[i],o=n.default.classNames("c-border-light autocomplete_"+r.type,{selected:i===e.selectedIndex});a.push(l.a.createElement(O.a,{key:i,ref:"item_"+i,icon:r.icon,iconColor:r.iconColor,className:o,onMouseOver:this.onMouseOver.bind(this,i),canClose:!1,noMouseUp:!0,onClick:this.onClick.bind(this,i)},this.renderObject(r,i)))}var s,c=t.text,d=t.buttonText;this.hasOwnInput()&&(s=!!t.allowEmpty||(t.allowCustom?void 0:e.selectedIndex>=0));var u,m=n.default.classNames("newAutocomplete flexbox",t.className,{contextMenuMobile:!1},{flexvert:this.hasOwnInput()},{hasOwnInput:this.hasOwnInput()},{expanded:!1!==e.expanded}),h={minWidth:260,maxWidth:320};this.hasOwnInput()&&(u=l.a.createElement("div",{className:"newAutocompleteTopBar flexbox c-border-heavy"},l.a.createElement(I.a,{ref:"input",display:"block",className:"f1",placeholder:c,autocompleteMode:t.mode,padding:{left:16,right:16},tokens:t.tokens,onTokenRemoved:t.onTokenRemoved,border:!1,buttonText:d,onEscape:this.onEscape,buttonEnabled:s,onButtonClick:this.onButtonClick})));var p=l.a.createElement(T.a,{className:"autocompleteMatches f1",style:h},a);return t.onlyMatches?p:l.a.createElement(A.a,{className:m,id:t.id,element:t.elementDisplay,maxWidth:"none",height:!1,positionOffset:t.positionOffset,position:t.position,useElementPosition:!0,overflowHeight:"shrink",ref:"contextMenu"},u,void 0,p,this.renderRightContent())}});t.default=R},function(e,t,a){"use strict";a.r(t);var n,i=a(0),r=a(1),o=a(2),s=a.n(o),l=a(12),c=a(30),d=a(39),u=a(10),m=a(31),h=a(28),p=a(52),g=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var n in a)Object.prototype.hasOwnProperty.call(a,n)&&(e[n]=a[n])}return e},f=r.a.TaskViewMode,v={};v.Outline="O",v[PaneMode.Gmail]="E",v[PaneMode.Drive]="D",v[PaneMode.Archived]="R",v[1]="G",v[2]="A",v[3]="C",n=[void 0,{Groups_Project:"P",Groups_Tag:"T",Groups_Contact:"C",Groups_Priority:"R"},{Agenda_Today:"T",Agenda_Week:"W",Agenda_All:"A"},{Calendar_Day:"D",Calendar_Week:"W",Calendar_Month:"M"}];var E=l.a.createClass({displayName:"ReactContextMenuPanes",componentDisplay:r.a.ComponentDisplay.Desktop,init:function(){this.numAtIndex=[],this.createObservables({selectedGroupIndex:0})},getState:function(){var e=this.props.pane;return{viewState:e&&e.viewState,viewMode:e&&e.getViewMode(),activePaneTypes:d.a.activePaneTypes,numInactivePanes:d.a.numInactivePanes,selectedGroup:this.selectedGroup?this.selectedGroup.get():-1}},componentDidMount:function(){this.selectedGroup=this.refs.menu.selectedIndex},onKeyPress:function(e,t){var a,i,r,o=this.selectedGroup.get(),s=o>=1&&o<=3?n[o]:v;for(var l in s)if(s.hasOwnProperty(l)&&KeyCode[s[l]]===e){a=l;break}if(a&&(isNaN(+a)?f[a]&&(r=a,i=f[a],a=PaneMode.Task):a=+a,!isNaN(a)||i||this.isPaneTypeOk(a))){if(t.preventDefault(),t.stopPropagation(),!t.shiftKey)return this.onSelected(a,i),isNaN(a);var c=document.getElementById("addPane_"+(r||a));if(c)return this.selectZoom(a,i,c),!0}var d=this.selectedGroupIndex.get();e===KeyCode.LeftArrow&&d>0?(d--,this.selectedGroupIndex.set(d)):e===KeyCode.RightArrow&&d<this.numAtIndex[this.selectedGroup.get()]-1&&(d++,this.selectedGroupIndex.set(d))},isPaneTypeOk:function(e){return!this.props.subset},onClickEnableMorePanes:function(){i.default.menus.openSettings(r.a.SettingsSections.Plugins)},selectZoom:function(e,t,a){e===PaneMode.Gmail?i.default.menus.openContextMenu({componentName:"ReactContextMenuSelectGmailAccount",element:a,showHeader:!0,onSelected:function(t){this.onSelected(e,null,t)}.bind(this)}):c.a.showPopup({mode:r.a.AutocompleteMode.Move,text:"Select item to zoom to",buttonText:"ZOOM",elementDisplay:a,onSelected:function(a){this.onSelected(e,t,a.item)}.bind(this)})},onSelectZoom:function(e,t,a){a.preventDefault(),a.stopPropagation(),this.selectZoom(e,t,a.target)},onSelected:function(e,t,a){if(isNaN(e)){var n=this.props;n.onSelected(e,t,a),i.default.menus.isContextMenuOpen(n.componentName)&&i.default.menus.closeContextMenu(n.componentName)}else this.selectedGroup.set(e),this.selectedGroupIndex.set(0)},onSelectedIndexChanged:function(e){var t=this.numAtIndex[e]-1;this.selectedGroupIndex.get()>t?this.selectedGroupIndex.set(t):this.updateState()},onClickGroup:function(e){i.default.preventDefault(e),i.default.stopPropagation(e)},onMouseEnterButton:function(e,t,a){this.selectedGroup.set(-1),this.selectedGroupIndex.set(t),this.selectedGroupNum=a},renderPaneType:function(e,t){var a=this.state,r=this.selectedGroup?this.selectedGroup.get():-1,o=isNaN(r)||r<1||r>3;if(e.enableMore)return s.a.createElement(h.a,{className:"hasBorder c-border",onClick:this.onClickEnableMorePanes},"Enable more panes");if(e.viewModes){var l=i.default.classNames("hasHorButtons",{"hasBorder c-border":e.border},{selectedHotkey:t===r}),c=[],d=e.viewModes.length;this.numAtIndex[t]=d;for(var m=0;m<d;m++){var g=e.viewModes[m],f=t===r&&a.selectedGroupIndex===m,E=i.default.classNames("c-popup-item",{selected:f});c.push(s.a.createElement(u.a,{key:g.text,className:E,padding:0,iconSize:16,color:"c-foreground",onMouseEnter:this.onMouseEnterButton.bind(this,t,m,d),onClick:this.onSelected.bind(this,g.type,g.viewMode,void 0)},t===r?s.a.createElement("div",{className:"viewHotkey bold"},n[t][g.viewMode]):s.a.createElement("div",{className:"viewIcon c-foreground-faded "+g.icon}),g.text))}return s.a.createElement(h.a,{className:l,key:e.text,customLayout:!0,onMouseEnter:this.onMouseEnterButton.bind(this,t,void 0,d),onClick:this.onClickGroup,clickCloses:!1,hoverEffects:!1},s.a.createElement(p.a,{hotkeyCentered:!0,hotkey:o&&v[t]},e.text),s.a.createElement("div",{className:"horButtons flexbox"},c))}var C=e.viewMode;return s.a.createElement(h.a,{key:e.text,className:e.border?"hasBorder c-border":"",icon:e.icon,height:32,hotkey:o&&(v[C]||v[e.type]),hotkeyCentered:!0,onClick:this.onSelected.bind(this,e.type,e.viewMode,null),active:this.props.subset&&C&&this.state.viewMode===C,onMouseEnter:this.onMouseEnterButton.bind(this,void 0,void 0),id:"addPane_"+(C||e.type)},e.text)},render:function(){var e=this.props,t=d.a.getAvailablePanes(!!e.subset);return s.a.createElement(m.a,g({},e,{id:"contextMenuPanes",ref:"menu",key:"contextMenuAdd",supportArrows:!0,onKeyPress:this.onKeyPress,onSelectedIndexChanged:this.onSelectedIndexChanged}),e.children,t.map(this.renderPaneType))}});t.default=E},function(e,t,a){"use strict";var n=a(1),i=a(0),r=a(2),o=a.n(r),s=a(12),l=(a(3),a(19)),c=a(7),d=a(76),u=s.a.createClass({displayName:"ReactNoteEditor",componentDisplay:n.a.ComponentDisplay.Everywhere,init:function(){var e=this.props,t=e.item.hasNote()&&e.item.getNote(),a=t?t.getParsedText():void 0;this.createObservables({hasValue:!!a})},onUnmount:function(){clearTimeout(this._noteUpdateTimeout),this._noteUpdateTimeout=void 0,this._saveNote()},getValue:function(){return this.refs.noteText.getValue()},_saveNote:function(){c.a.beginAction(),i.default.vmMain.beginUpdateItems();var e=this.props.item,t=e.hasNote()&&e.getNote(),a=this.refs.noteText.getValue();!t&&a&&(t=e.createNote()),t&&(t.setText(a,!0,ChangeType.Local),a||e.setNote(void 0,ChangeType.Local)),i.default.vmMain.commitUpdateItems(),c.a.endAction()},onChange:function(){var e=this.refs.noteText.getValue().length>0;e!==this.hasValue.get()&&(this.hasValue.set(e),e&&this.props.onValueSet&&requestAnimationFrame(this.props.onValueSet,0)),clearTimeout(this._noteUpdateTimeout),this._noteUpdateTimeout=setTimeout(this._saveNote,8e3)},render:function(){var e=this.props,t=l.a.fontSize(),a=e.item.hasNote()&&e.item.getNote(),n=a?a.getParsedText():void 0,i=a?void 0:"Add note",r=this.state.hasValue?e.heightValue:e.heightEmpty,s=!e.item.canHaveNote();return o.a.createElement(d.a,{ref:"noteText",className:e.className,value:n,placeholder:i,focused:e.focused,onChange:this.onChange,onKeyDown:e.onKeyDown,onKeyPress:e.onKeyPress,selectionStart:e.selectionStart,selectionEnd:e.selectionEnd,fontSize:t,margin:0,height:r,tabIndex:e.tabIndex,isReadOnly:s})}});t.a=u},function(e,t,a){"use strict";var n=a(0),i=a(1),r=a(30),o=a(2),s=a.n(o),l=a(12).a.createClass({displayName:"ReactContact",componentDisplay:i.a.ComponentDisplay.Everywhere,onClickNumber:function(e){r.a.hide(),n.default.openUrl(this.props.contact.link,e,!0)},onClickEmail:function(e){var t=n.default.vmMain.getDefaultEmailPlugin(),a=this.props.contact;if(t.isActive()){r.a.hide();var i={to:[{text:"",email:a.address}]};n.default.menus.openComposeEmail(t,void 0,void 0,i)}else n.default.openUrl(a.link,e,!0)},render:function(){var e=this,t=this.props.contact;return s.a.createElement("div",{className:"contactPreview"},s.a.createElement("div",{className:"contactName c-border"},t.text),t.phoneNumbers&&t.phoneNumbers.map(function(t){return s.a.createElement("div",{className:"contactRow contactPhone",key:t.number},s.a.createElement("i",{className:"contactButton icon-phone c-foreground-super-faded"}),s.a.createElement("span",{className:"contactNumber link",onClick:e.onClickNumber},t.number),s.a.createElement("span",{className:"phoneType c-foreground-faded"},t.type))}),t.emails&&t.emails.map(function(t){return s.a.createElement("div",{className:"contactRow contactEmail",key:t.address},s.a.createElement("i",{className:"icon-mail_outline contactButton c-foreground-super-faded"}),s.a.createElement("span",{className:"contactEmail link",onClick:e.onClickEmail},t.address))}))}});t.a=l},function(e,t,a){"use strict";a.r(t);var n=a(0),i=a(1),r=a(6),o=a(9),s=a(4),l=a(2),c=a.n(l),d=a(12),u=a(11);function m(e){return e?e.value:void 0}var h=/(?:â(p:[^â]+)â)/gi;function p(e){var t,a;e&&(h.lastIndex=0,t=null!==(a=h.exec(e.json))?e.json.substr(0,a.index)+window.EmbedAttachChar+a[1]+window.EmbedAttachChar+e.json.substr(a.index+a[0].length):e.json);return t}function g(){}g.prototype={_fixPlugins:function(e){this.transformRawRevisionData(e,function(e){if(e.t){var t=p(e.t);t!==e.t.json&&log("Fixed Plugin: "+t),e.t.json=t}})},recoverRevision:function(e,t,a){var n=this.getCurrentDocID();this.getRawRevisionData(n,e,function(e){if(!e)return log("Unable to get revision data"),a();this._fixPlugins(e),this.runRecovery(n,e,t,a)}.bind(this))},runRecovery:function(e,t,a,i){var s={path:"/upload/drive/v2/files/"+e+"/realtime",method:"PUT",params:{uploadType:"media",fileId:e},headers:{"Content-Type":"text/plain;"},body:t},l=gapi.client.request(s),c=o.a.model.getRoot().get("recoverVersion")||0;o.a.model.getRoot().set("recoverVersion",c+1),o.a.clearItemEventListeners(),l.then(function(e){log("Recovery Success: ",e),n.default.settings.set(Settings.localRecoverVersion,c+1),o.a.model.getRoot().set("recoverVersion",c+1),r.default.addDefaultSkipSetting(Settings.gdocId,"Default"),r.default.addDefaultSkipSetting(Settings.gdocTitle,"Default"),o.a.close(!0),a()},function(e){log("Recovery Failure: ",e),i()})},getCurrentRevision:function(){var e;try{e=o.a.doc.getModel().serverVersion}catch(e){n.default.reportError(e)}return e},getCurrentDocID:function(){var e;try{e=n.default.settings.get(Settings.gdocId)}catch(e){n.default.reportError(e)}return e},getRawRevisionData:function(e,t,a){var i=u.a.getDefaultAccessToken();if(i){var r="https://www.googleapis.com/drive/v2/files/"+(e||this.getCurrentDocID())+"/realtime";t&&(r+="?revision="+t),n.default.XHR({type:"GET",url:r,headers:{Authorization:"Bearer "+i},cb:function(e){if(200===e.status)try{var t=JSON.parse(e.responseText);a(t)}catch(e){n.default.reportError(e),a()}else a()}})}else log("Invalid OAuth token"),a()},getDefaultRawRevisionData:function(e,t){return this.getRawRevisionData(this.getCurrentDocID(),e,t)},transformRawRevisionData:function(e,t){var a=m(e.data);if(a){!function e(a,n){if(n>=0&&t(a,n),a.i)for(var i=m(a.i),r=0;r<i.length;++r){var o=m(i[r]);o&&e(o,n+1)}if(a.n){var s=m(a.n);s&&e(s,n+1)}}(m(a.root),-1)}else n.default.reportError("Invalid Revision Data: ",e)},_makeConsumableOutput:function(e,t,a,i){this.getRawRevisionData(e,t,function(e){try{n.default.PAssert(2566,e&&e.data,"Missing expected recovery data")}catch(e){n.default.reportError(e)}if(e&&e.data)try{this.transformRawRevisionData(e,a)}catch(t){n.default.reportError(t),e=void 0}i&&i(e)}.bind(this))},_padText:function(e,t,a){var n="";a=a||" ";for(var i=0;i<t;++i)n+=a;return n+=e},printRevisionData:function(e,t){this._makeConsumableOutput(e,t,function(e,t){console.log(this._padText(p(e.t),t))}.bind(this))},printDefaultRevisionData:function(e){return this.printRevisionData(this.getCurrentDocID(),e)},printRevisionOffset:function(e){var t=this.getCurrentRevision()-e;return t<0?log("Maximum offset is: "+this.getCurrentRevision()):this.printDefaultRevisionData(t)},getRevisionData:function(e,t,a,n){var i="",r=-1;this._makeConsumableOutput(e,t,function(e,t){if(a&&"text"!==a){if("html"===a){if(t>r)i+="<ul>";else if(t<r)for(var n=t;n<r;n++)i+="</ul>";i+="<li>"+p(e.t)+"</li>",r=t}}else i+=this._padText(p(e.t),t,"\t")+"\r\n"}.bind(this),function(e){n(i,e)})},saveRevisionData:function(e,t,a){var n="";this._makeConsumableOutput(e,t,function(e,t){n+=this._padText(p(e.t),t,"\t")+"\r\n"}.bind(this),function(){var e=new Blob([n],{type:"text/plain;charset=utf-8"});saveAs(e,"DataRecovery_"+t+".txt")})},saveDefaultRevisionData:function(e,t){return this.saveRevisionData(this.getCurrentDocID(),e,t)},saveRevisionOffset:function(e,t){var a=this.getCurrentRevision()-e;return a<0?log("Maximum offset is: "+this.getCurrentRevision()):this.saveDefaultRevisionData(a,t)},getHelp:function(){return console.log("To recover your data input __MoodoRecovery.saveRevisionOffset(<revision offset>)"),console.log("The maximum <revision offset> for this document is "+this.getCurrentRevision()),console.log("If you just lost data, an offset of 10 is a good place to start"),console.log("You may need to try larger offsets if the returned file does not contain the data you need"),console.log("This is a temporary tool to help recover data, please report any issues or data loss to support@moo.do"),window.__SendInfo("Recover Help Used!"),""},dumpRawIndexedDB:function(){r.default.dbi.settings.get("root").done(function(e){var t=e.root;r.default.dbi.items.query().all().execute().done(function(e){var a;e.forEach(function(e){e.id===t&&(a=e),r.default.getItem(e.id)||r.default.setItem(e.id,n.default.translateObjOut(e))});var i=r.default.toJSON(a,!1,!1,!0);saveAs(new Blob([i],{type:"text/plain;charset=utf-8"}),"MoodoRecovery.json")})})}};var f=new g;window.__MoodoRecovery={maxUIRevisions:2e3,raw:f,help:f.getHelp.bind(f),getCurrentRevision:f.getCurrentRevision.bind(f),getCurrentDocID:f.getCurrentDocID.bind(f),getRawData:f.getDefaultRawRevisionData.bind(f),printRevision:f.printDefaultRevisionData.bind(f),saveRevision:f.saveDefaultRevisionData.bind(f),printRevisionOffset:f.printRevisionOffset.bind(f),saveRevisionOffset:f.saveRevisionOffset.bind(f),dumpRawIndexedDB:f.dumpRawIndexedDB.bind(f),_getRawRevisionData:f.getRawRevisionData.bind(f)};var v=f,E=a(17),C=a(75),y=a(77),k=a(10),b=d.a.createClass({displayName:"ReactModalRevisionHistory",componentDisplay:i.a.ComponentDisplay.Desktop,init:function(){if(this.maxRevision=0,this.revisions=[],this.selectedRevision=null,this.isOnline=!!o.a.doc,this.createObservables({isLoading:!1,recoveredPreview:null}),o.a.doc){var e=v.getCurrentRevision()-1;this.maxRevision=e,this.selectedRevision=e;for(var t=Math.max(e-window.__MoodoRecovery.maxUIRevisions,0),a=[],n=e;n>=t;--n)a.push(n);this.revisions=a,this.updatePreview()}else this.recoveredPreview.set("You must be online to view your revision history. Please go online and try again.")},updatePreview:function(){this.recoveredPreview.set("",!1),this.isLoading.set(!0);var e=v.getCurrentDocID();v.getRevisionData(e,this.selectedRevision,"html",function(e){this.recoveredPreview.set(e,!1),this.isLoading.set(!1)}.bind(this))},onSelectChange:function(e){this.selectedRevision=this.revisions[e.target.selectedIndex],log(this.selectedRevision),this.updatePreview()},onTapSelect:function(){var e=E.default.createSelectionRange();e.selectNodeContents(this.refs.exportedContent),E.default.setSelectionRange(e)},onKeyDown:function(e){var t=s.a.getKeyCode(e);log(e.metaKey,e.ctrlKey,e.keyCode),(s.a.mac&&e.metaKey||!s.a.mac&&e.ctrlKey)&&t===KeyCode.A&&this.onTapSelect(),e.preventDefault(),e.stopPropagation()},onTapRestore:function(e,t){return v.recoverRevision(this.selectedRevision,function(){n.default.menus.alert({text:"Your data has been recovered.",actionText:"OKAY",callback:r.default.clearDataAndReload}),t()},function(){n.default.menus.alert({text:"There was an error recovering your data. Please contact support@moo.do for additional help.",actionText:"OKAY"}),t()}),!0},render:function(){var e=n.default.classNames({loading:this.state.isLoading});return c.a.createElement(C.a,{id:"modalRevisionHistory",title:"Revision History",width:860,height:900,modalID:Modals.RevisionHistory},c.a.createElement("div",{key:"sidebar",width:180},c.a.createElement(y.a,{header:!0},"Choose Revision"),c.a.createElement(y.a,{style:{lineHeight:"24px",height:"36px"},clickable:!1},c.a.createElement("select",{onChange:this.onSelectChange},this.revisions.map(function(e){return c.a.createElement("option",{key:e,value:e},e)}))),c.a.createElement(k.a,{primary:!0,enabled:this.isOnline,onClick:this.onTapRestore},"RESTORE"),c.a.createElement(y.a,{header:!0},"Directions"),c.a.createElement(y.a,{clickable:!1,subtext:!0},c.a.createElement("p",null,"Choose the revision from the dropdown that you want to revert to."),c.a.createElement("p",null,"Each change is a new revision, so if you've made a lot of changes you may want to go back by 50 or 100."),c.a.createElement("p",null,"You may need to reload or re-login to other clients to see the recovered data there."))),c.a.createElement("div",{key:"content",className:e},c.a.createElement("div",{className:"exportedContent",onKeyDown:this.onKeyDown,contentEditable:!0,dangerouslySetInnerHTML:{__html:this.state.recoveredPreview},ref:"exportedContent"})))}});t.default=b},function(e,t,a){"use strict";a.r(t);var n=a(0),i=a(1),r=(a(6),a(2)),o=a.n(r),s=a(12),l=a(7),c=a(4),d=a(13),u=(a(35),a(23)),m=a(45),h=a(82),p=s.a.createClass({displayName:"FancyFocusGuard",componentDisplay:i.a.ComponentDisplay.Desktop,onFocus:function(){var e=this.props.component.refs[this.props.target];e&&e.focus()},render:function(){return o.a.createElement("input",{className:"fancyFocusGuard",onFocus:this.onFocus,tabIndex:this.props.tabIndex})}}),g=a(50),f=a(32),v=a(10),E=a(31),C=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var n in a)Object.prototype.hasOwnProperty.call(a,n)&&(e[n]=a[n])}return e},y=s.a.createClass({displayName:"ReactItemDetailsPopup",componentDisplay:i.a.ComponentDisplay.Desktop,init:function(){this.createObservables({canSyncDate:!1,addingLocal:!0})},getHotkeys:function(){return[u.a.create(KeyCode.Escape,!0,i.a.Primary.Either,i.a.Shift.Either,this.onEscape),u.a.create(KeyCode.C,!0,i.a.Primary.Never,i.a.Shift.No,this.onHotkeyCreateEvent)]},getState:function(){var e=this.props.item;return{flags:e.flags,maxWidth:this.props.pane&&Math.min(this.props.pane.getWidth()-20,500),isStarred:e.isStarred(),priority:e.priority()}},componentDidMount:function(){this.props.item.itemChanged.listen(this.onItemChanged),d.a.listen("windowResize",this.onResize),d.a.listen("panesChanged",this.onResize)},onResize:function(){this.updateState(),setTimeout(function(){this.refs.menu&&this.refs.menu.updateState()}.bind(this),300)},onUnmount:function(){this.props.item.itemChanged.unlisten(this.onItemChanged);var e=this.props;if(e.addOnSave&&this.needsSave){var t=this.addItem();e.beginSave&&e.beginSave();try{var a=e.options;if(a)for(var i=0;i<a.length;i++){var r=a[i],o=this.refs[r.text];if(o&&o.getValue())try{r.cb(t)}catch(e){n.default.reportError(e)}}if(e.children)for(i=0;i<e.children.length;i++){var s=e.children[i].clone(t,ChangeType.Local);t.insertItem(s)}var l=n.default.vmMain.getDefaultCalendarPlugin(),c=this.refs.checkAddCalendar;l&&l.isAvailable()&&c&&c.getValue()&&l.createEventForItem(t)}catch(e){n.default.reportError(e)}e.endSave&&e.endSave()}d.a.unlisten("windowResize",this.onResize),d.a.unlisten("panesChanged",this.onResize)},onItemChanged:function(){var e=this.props.item;this.canSyncDate.set(!(!e.getDateText()||n.default.isDateSoft(e.getDateText())||!e.date()&&!e.repeatDate()))},onHotkeyCreateEvent:function(){var e=n.default.vmMain.getDefaultCalendarPlugin(),t=this.props.item;e&&(this.props.addOnSave?this.state.canSyncDate&&this.refs.checkAddCalendar&&this.refs.checkAddCalendar.setValue(!0):(e.createEventForItem(t),t.itemChanged.notify()))},onKeyPress:function(e){c.a.getKeyCode(e)===KeyCode.Enter?(this.save(),e.preventDefault()):this.wasAKeyPressed=!0},save:function(){this.props.item.hasText()?(this.needsSave=!0,n.default.menus.closeContextMenu()):n.default.toasts.pushMessage({text:"Please enter text for the item before adding it.",timeout:2e3})},addItem:function(){var e=this.props.item,t=!0,a=n.default.vmMain.getDefaultCalendarPlugin();if(a&&a.isAvailable()&&this.refs.checkAddLocal&&(t=this.refs.checkAddLocal.getValue()),e.getRawText().length>0){if(t){var i=this.props.parent,r=this.refs.addTo.getItem(),o=0;r&&(o=(i=r.item).numItems()),l.a.beginAction();var s=e.clone(i,ChangeType.AllLocal),c=this.refs.noteText.getValue();if(c){var d=s.createNote();d&&d.setText(c,!0,ChangeType.Local)}return i.insertItem(s,o),l.a.endAction(),s}return e}return!1},onEscape:function(){this.wasEscapeKeyPressed=!0,n.default.menus.closeContextMenu()},onNoteValueSet:function(){this.refs.menu.updateState()},onKeyDownNote:function(e){c.a.getKeyCode(e)===KeyCode.Enter&&c.a.mac&&e.metaKey&&this.save()},onClickStar:function(){var e=this.props.item;e.isStarred(!e.isStarred(),ChangeType.Local)},setPriority:function(e){var t=this.props.item;t.priority()===e&&(e=VMLIFlag.None),t.priority(e,ChangeType.Local)},onChangeAddToCalendar:function(e){!e&&this.refs.checkAddLocal&&this.refs.checkAddLocal.setValue(!0)},onChangeAddLocal:function(e){!e&&this.refs.checkAddCalendar&&this.refs.checkAddCalendar.setValue(!0),this.addingLocal.set(e)},render:function(){var e,t=this.props,a=this.state,i=t.pane,r=t.item,s=this.state.maxWidth,l=n.default.parentTextForItem(r),c=t.children||(i?i.getSubItems(r,!0):[]),d=r.allowTextEditing(),u=d&&(r.canHaveNote()||r.hasNote()),y=a.canSyncDate,k=n.default.vmMain.pluginManager.getPlugin(PluginID.GCalendar),b=k.isActive()&&n.default.vmMain.pluginManager.getSetting(PluginID.GCalendar,PluginSettingsID.GCalendar.SyncNewEvents),S=k.isActive()&&n.default.vmMain.pluginManager.getSetting(PluginID.GCalendar,PluginSettingsID.GCalendar.CreateLocalEvents),D=k&&k.isAvailable();if(c.length>0){e=[];for(var N=-c[0].getPadding(i),M=0;M<c.length;M++){var x=c[M];e.push(o.a.createElement(m.a,{key:x.id,item:x,pane:t.pane,padded:!0,allowDrag:!1,paddingOffset:N,maxWidth:508}))}}var w=10,P=n.default.classNames("c-foreground-faded",{disabled:!a.addingLocal});return o.a.createElement(E.a,C({},t,{key:r.id+"_Edit",id:"contextMenuItemDetails",className:"flexbox flexvert",width:540,maxWidth:s,bottom:!1,onEscape:this.onEscape,ref:"menu"}),o.a.createElement(p,{component:this,target:"buttonSave",tabIndex:w++}),l&&o.a.createElement("div",{className:"detailsSection flexbox itemContext c-foreground-faded"},o.a.createElement("div",{className:"c-foreground-faded"},"Parents"),o.a.createElement("div",null,l)),o.a.createElement("div",{className:"detailsSection flexbox noShrink"},o.a.createElement("div",{className:"c-foreground-faded"},"Item text"),o.a.createElement(m.a,{ref:"item",className:"detailsItem c-background c-border",item:r,maxWidth:508,onKeyPress:this.onKeyPress,selectIndex:t.selectIndex,showPriority:!0,shouldSave:!t.addOnSave,autocompleteMode:"all",tabIndex:w,inItemDetails:!0,pane:i,editable:d})),t.addOnSave&&o.a.createElement("div",{className:"detailsSection flexbox"},o.a.createElement("div",{className:P},"Add to"),o.a.createElement(f.a,{autocompleteMode:"item",height:33,placeholder:"Select item to add to",tabIndex:w++,ref:"addTo",disabled:!a.addingLocal})),u&&o.a.createElement("div",{className:"detailsSection flexbox"},o.a.createElement("div",{className:"c-foreground-faded"},"Note"),o.a.createElement(h.a,{className:"c-border",ref:"noteText",item:r,heightEmpty:34,heightValue:150,onValueSet:this.onNoteValueSet,onKeyDown:this.onKeyDownNote,tabIndex:w++})),o.a.createElement("div",{className:"detailsSection flexbox"},o.a.createElement("div",{className:"c-foreground-faded"},"Options"),o.a.createElement("span",{className:"itemDetailOption c-border pointer",onClick:this.onClickStar},o.a.createElement("span",{className:"c-foreground-super-faded"},"Star:"),o.a.createElement("i",{className:n.default.classNames("starButton icon-star c-foreground-super-faded",{selected:a.isStarred})})),o.a.createElement("span",{className:"itemDetailOption c-border"},o.a.createElement("span",{className:"c-foreground-super-faded"},"Priority:"),o.a.createElement("span",{className:n.default.classNames("searchPriority searchP0",{selected:a.priority===VMLIFlag.P0}),onClick:this.setPriority.bind(this,VMLIFlag.P0)}),o.a.createElement("span",{className:n.default.classNames("searchPriority searchP1",{selected:a.priority===VMLIFlag.P1}),onClick:this.setPriority.bind(this,VMLIFlag.P1)}),o.a.createElement("span",{className:n.default.classNames("searchPriority searchP2",{selected:a.priority===VMLIFlag.P2}),onClick:this.setPriority.bind(this,VMLIFlag.P2)}))),t.addOnSave&&(D||t.options)&&o.a.createElement("div",{className:"detailsSection"},D&&y&&o.a.createElement(g.a,{key:"addLocal",initialChecked:S,ref:"checkAddLocal",onChange:this.onChangeAddLocal,tabIndex:y?w++:void 0},"Create Moo.do item"),D&&y&&o.a.createElement(g.a,{key:"addToCalendar",initialChecked:b,ref:"checkAddCalendar",onChange:this.onChangeAddToCalendar,tabIndex:y?w++:void 0},"Add to Google Calendar"),t.options&&t.options.map(function(e){return o.a.createElement(g.a,{key:e.text,initialChecked:e.value,ref:e.text,tabIndex:w++},e.text)})),e&&o.a.createElement("div",{className:"detailsSection"},o.a.createElement("div",{className:"c-foreground-faded"},"Subitems"),o.a.createElement("div",{className:"children c-border"},e)),t.addOnSave&&o.a.createElement("div",{className:"bottomRow flexbox"},o.a.createElement(v.a,{onClick:this.onEscape},"CANCEL"),o.a.createElement(v.a,{primary:!0,marginLeft:8,onClick:this.save,tabIndex:w++,ref:"buttonSave"},"SAVE")),o.a.createElement(p,{component:this,target:"item",tabIndex:w++}))}});t.default=y},function(e,t,a){"use strict";a.r(t);var n=a(0),i=a(1),r=(a(4),a(2)),o=a.n(r),s=a(12),l=a(7),c=a(28),d=s.a.createClass({displayName:"ReactFile",componentDisplay:i.a.ComponentDisplay.Everywhere,getState:function(){var e=this.props.file;return{isShared:e._isShared,title:e._title,isOpen:e.isOpen()}},onClickDocumentTitle:function(){var e=this.props.file;n.default.vmMain.vmPicker.openDocument(e),l.a.miscAction({type:TrackerType.Misc,misc:TrackerMisc.OpenDocument})},onClickDocumentSettings:function(){var e=this.props.file;n.default.vmMain.vmPicker.openSharing(e),n.default.sendEvent("Menu","OpenSharing"),l.a.miscAction({type:TrackerType.Misc,misc:TrackerMisc.OpenDocSharing})},render:function(){var e=this.state;return o.a.createElement(c.a,{icon:e.isShared?"icon-user":"icon-settings",active:e.isOpen,selected:this.props.selected,tooltip:"Open "+e.title,iconTooltip:"Share / Rename / Delete",onClick:this.onClickDocumentTitle,onClickIcon:this.onClickDocumentSettings},e.title)}}),u=(a(33),a(31)),m=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var n in a)Object.prototype.hasOwnProperty.call(a,n)&&(e[n]=a[n])}return e},h=s.a.createClass({displayName:"ReactContextMenuDocuments",componentDisplay:i.a.ComponentDisplay.Everywhere,getState:function(){var e=n.default.vmMain.vmPicker;return{files:n.default.vmMain.docManager._docList,showError:e.showError,isLoading:e.isLoading}},render:function(){var e=n.default.vmMain.vmPicker,t=this.props,a=this.state;n.default.classNames("flexbox flexvert",{loading:a.isLoading||0===a.files.length});return a.showError?o.a.createElement(u.a,m({},t,{key:"contextMenuDocuments",id:"contextMenuDocuments",supportArrows:!0}),o.a.createElement(c.a,{onClick:e.onTapReloadDocuments.bind(e)},a.showError)):a.isLoading||0===a.files.length?o.a.createElement(u.a,m({},t,{key:"contextMenuDocuments",id:"contextMenuDocuments",loading:!0,supportArrows:!0})):o.a.createElement(u.a,m({},t,{key:"contextMenuDocuments",id:"contextMenuDocuments",supportArrows:!0,maxWidth:360,maxHeight:500}),o.a.createElement(c.a,{id:"addDocument",onClick:e.onTapAddDocument.bind(e),icon:"icon-add",iconSize:18},"New File"),o.a.createElement("hr",null),a.files.map(function(e){return o.a.createElement(d,{key:"file_"+e.id,file:e})}))}});t.default=h},function(e,t,a){"use strict";a.r(t);var n=a(0),i=a(1),r=a(4),o=a(2),s=a.n(o),l=a(12),c=a(37),d=a(11),u=a(79),m=a(18),h=a(50),p=a(10),g=a(42),f=l.a.createClass({displayName:"ReactModalSettingsGeneral",componentDisplay:i.a.ComponentDisplay.Desktop,init:function(){this.createObservables({isStoragePersisted:!1,usage:NaN,quota:NaN}),r.a.isStoragePersisted(function(e){this.isStoragePersisted.set(e)}.bind(this)),r.a.estimateAvailableStorage(function(e){this.usage.set(e.usage),this.quota.set(e.quota)}.bind(this),function(){})},onNotificationsChanged:function(e){n.default.settings.set(Settings.disableNotifications,!e),e?r.a.usesHTML5Notifications()?r.a.hasNotificationPermission()||Notification.requestPermission(function(e){"granted"===e?n.default.timeline.updateNotifications():(n.default.settings.set(Settings.disableNotifications,!0),this.refs.notifications.setValue(!1),n.default.toasts.pushMessage({text:"To enable notifications in the future, you must first give permission in your browser.",action:MessageAction.OpenURL,actionText:"LEARN MORE",data:{url:"https://support.google.com/chrome/answer/6148059"}}))}.bind(this)):n.default.timeline.updateNotifications():n.default.timeline.clearNotifications()},onCacheRatioClick:function(){this.getCacheRatio()<.98&&(n.default.settings.set(Settings.cacheSizeRatio,1),n.default.sendEvent("CacheRatio","Changed",1),n.default.toasts.pushMessage({text:"Success!",action:MessageAction.Okay}))},onDelayChanged:function(e){n.default.settings.set(Settings.notificationDelay,e),n.default.sendEvent("NotificationDelay","Changed",e)},onSettingChanged:function(e,t){n.default.settings.set(e,t)},parseFn:function(e){return parseFloat(e.toFixed(2))},getCacheRatio:function(){return this.parseFn(n.default.vmMain.pluginManager.getCacheSizeRatio())},onPersistClick:function(){r.a.requestStoragePersistence(function(){this.isStoragePersisted.set(!0)}.bind(this),function(){this.isStoragePersisted.set(!1)}.bind(this))},onChangeDateFormat:function(){var e=this.refs.selectDateFormat.value;n.default.settings.set(Settings.dateFormat,e)},onChangeDayWeekStart:function(){n.default.settings.set(Settings.dayWeekStart,+this.refs.selectDayWeekStart.value)},onChangeDefaultItemPrefix:function(){n.default.settings.set(Settings.defaultItemPrefix,this.refs.selectItemPrefix.value)},render:function(){var e=this.getCacheRatio()<.98,t=!r.a.app&&r.a.supportsPersistedStorage(),a=r.a.supportsEstimatedStorage(),o=n.default.settings.get(Settings.notificationDelay),l=!n.default.settings.get(Settings.disableNotifications)&&r.a.hasNotificationPermission(),c=n.default.settings.get(Settings.defaultItemPrefix),d=(this.usage.get()/1024/1024).toFixed(2),u=(this.quota.get()/1024/1024).toFixed(2),f=m.a.getCurrentDateFormat(),v=n.default.settings.get(Settings.dayWeekStart);return s.a.createElement("div",{key:"content",className:"new-modal-group"},s.a.createElement("div",{className:"new-modal-row new-modal-row-1c"},s.a.createElement("div",{className:"settingsName ib"},"Default item type:"),s.a.createElement("select",{defaultValue:c,ref:"selectItemPrefix",onChange:this.onChangeDefaultItemPrefix},s.a.createElement("option",{value:""},"None"),s.a.createElement("option",{value:i.a.Prefix.Task},"Task"),s.a.createElement("option",{value:i.a.Prefix.Bullet},"Bullet"))),s.a.createElement("div",{className:"new-modal-row new-modal-row-1c"},s.a.createElement("div",{className:"settingsName ib"},"Date Format:"),s.a.createElement("select",{defaultValue:f,ref:"selectDateFormat",onChange:this.onChangeDateFormat},s.a.createElement("option",{value:i.a.DateFormat.MDY},"Month / Day / Year"),s.a.createElement("option",{value:i.a.DateFormat.DMY},"Day / Month / Year"),s.a.createElement("option",{value:i.a.DateFormat.YMD},"Year / Month / Day"))),s.a.createElement("div",{className:"new-modal-row new-modal-row-1c"},s.a.createElement("div",{className:"settingsName ib"},"Start week on:"),s.a.createElement("select",{defaultValue:v,ref:"selectDayWeekStart",onChange:this.onChangeDayWeekStart},s.a.createElement("option",{value:0},"Sunday"),s.a.createElement("option",{value:1},"Monday"))),s.a.createElement("div",{className:"new-modal-row new-modal-row-1c"},s.a.createElement(h.a,{ref:"notifications",checked:n.default.settings.get(Settings.openEvernoteApp),onChange:this.onSettingChanged.bind(this,Settings.openEvernoteApp)},"Open Evernote links in Evernote app")),s.a.createElement("div",{className:"new-modal-row new-modal-row-1c"},s.a.createElement(h.a,{ref:"notifications",checked:n.default.settings.get(Settings.searchExpandsCollapsed),onChange:this.onSettingChanged.bind(this,Settings.searchExpandsCollapsed)},"Automatically expand collapsed items while searching"),s.a.createElement("div",{className:"subtext",style:{marginLeft:24}},"Collapsed state while searching is separate from normal collapsed state, and search collapse state is cleared when the search is cleared.")),r.a.supportsNotifications()&&s.a.createElement("div",{className:"new-modal-row new-modal-row-1c"},s.a.createElement(h.a,{ref:"notifications",checked:l,onChange:this.onNotificationsChanged},"Enable notifications"),s.a.createElement("div",{className:"subtext",style:{marginLeft:24}},"Display native notifications for items that use a specific @date and time in their text. These are only displayed for the currently open document on this device."),s.a.createElement("div",{style:{marginTop:16}},s.a.createElement("span",{style:{display:"inline-block",marginLeft:24,width:140}},"Notification Time"),s.a.createElement(g.a,{value:o,minValue:0,maxValue:120,interval:5,onChange:this.onDelayChanged}),s.a.createElement("div",{className:"subtext",style:{marginLeft:24}},"Time in minutes before event to display a notification about the event."))),s.a.createElement("div",{className:"new-modal-row new-modal-row-1c"},s.a.createElement("div",{className:"modal-group-title"},"Storage / Caching"),t&&!this.isStoragePersisted.get()&&s.a.createElement("div",null,s.a.createElement(p.a,{raised:!0,margin:"16px 0",onClick:this.onPersistClick},"Enable Persistent Storage"),s.a.createElement("div",{className:"subtext"},"Allow Moo.do to store your data offline without potential for the browser to delete it. This can help Moo.do's performance if your disk is low on free-space.")),e&&s.a.createElement("div",null,s.a.createElement(p.a,{raised:!0,margin:"16px 0",onClick:this.onCacheRatioClick},"Reset Cache Ratio"),s.a.createElement("div",{className:"subtext"},"If you have run out of disk space in the past, we may not be efficiently caching your data. If you have resolved any disk space issues, click this button to efficiently cache your data again.")),a&&s.a.createElement("div",{className:"new-modal-row new-modal-row-1c"},s.a.createElement("div",{className:"modal-group-title"},"Estimated disk usage"),s.a.createElement("div",{className:"subtext"},s.a.createElement("b",null,"Usage: "),Math.round(d)," MB / ",s.a.createElement("b",null,"Quota: "),Math.round(u)," MB"))))}}),v=a(6),E=a(15),C=l.a.createClass({displayName:"ReactModalSettingsPlugins",componentDisplay:i.a.ComponentDisplay.Desktop,init:function(){this.pluginsEnabled={},this.pluginOptions={},c.a.refresh()},componentDidMount:function(){this.listenTo(d.a.onAccountsUpdated),this.checkTiers()},getState:function(){for(var e={isSaveEnabled:c.a.isSaveEnabled,premiumStatus:n.default.billingManager._premiumStatus,enableOfflineAuth:c.a.enableOfflineAuth,linkedAccounts:d.a.getLinkedAccounts(),hasError:c.a.enableOfflineAuth.get()&&d.a.isConnected()&&!!d.a.getAccountError(d.a.getDefaultEmail())},t=c.a.pluginsAvailable,a=0;a<t.length;++a){var i=t[a];this.pluginsEnabled[i]=e[i+"Enabled"]=c.a.getPluginEnabledObservable(i);var r=c.a.getPluginOptions(i);for(var o in r)if(r.hasOwnProperty(o)){var s=i+"_"+o;this.pluginOptions[s]=e[s]=r[o]}}return e},openSection:function(e){this.props.openSection(e)},onChangeFree:function(e){this.refs[PluginID.Contacts].setValue(e),this.refs[PluginID.Gmail].setValue(e),this.onChangeFeature()},onChangePremium:function(e){this.refs[PluginID.GCalendar].setValue(e),this.refs[PluginID.Drive].setValue(e),this.refs.DriveShared.setValue(e),this.onChangeFeature()},checkTier:function(e,t){for(var a=0,n=0;n<t.length;n++)this.refs[t[n]].getValue()?a++:a--;a===t.length&&e.setValue(!0),a===-t.length&&e.setValue(!1)},checkTiers:function(){this.checkTier(this.refs.free,[PluginID.Contacts,PluginID.Gmail]),this.checkTier(this.refs.premium,[PluginID.GCalendar,PluginID.Drive,"DriveShared"])},onChangeFeature:function(){c.a.isSaveEnabled.set(!0),this.checkTiers()},onEnablePremium:function(){if(n.default.billingManager.isTrialOver())return this.openSection(i.a.SettingsSections.Account),!1;n.default.billingManager.startTrial()},onClickFixError:function(){c.a.enableOfflineFeatures(function(){c.a.refresh(),this.updateState()}.bind(this))},onClickCancel:function(e){for(var t in this.refs)if(this.refs.hasOwnProperty(t)){var a=this.refs[t];a.checked&&a.resetValue()}this.checkTiers()},onClickSave:function(e,t){var a=[PluginID.Contacts,PluginID.GCalendar,PluginID.Gmail,PluginID.Drive].map(function(e){var t={id:e,enable:!!this.refs[e].getValue()};return e===PluginID.Drive&&(t.shared=!!this.refs.DriveShared.getValue()),t}.bind(this)),n=this.refs.offlineFeatures.getValue(),i=!1;return c.a.setEnabledPlugins(a,n,function(){i=!0,t(),c.a.isSaveEnabled.set(!1)}),!i},renderPluginOptionCheckbox:function(e,t,a,n){return s.a.createElement(h.a,{className:"subcheckbox",ref:t,initialChecked:!!this.state[e+"_"+a],onChange:this.onChangeFeature},n)},renderPluginCheckbox:function(e,t,a){return s.a.createElement(h.a,{ref:e,initialChecked:!!this.state[e+"Enabled"],onChange:this.onChangeFeature},a,t)},render:function(){var e=n.default.billingManager,t=this.state,a=e.hasPremiumFeatures(),r=e.isTrialOver(),o=t.hasError;return s.a.createElement("div",{key:"content",className:"new-modal-group"},s.a.createElement("div",{className:"new-modal-title"},s.a.createElement("div",{className:"title"},"Integrate with your other services"),s.a.createElement("div",{className:"subtext center c-foreground-light"},"Use ",s.a.createElement("b",null,"Moo.do")," to organize everything in one place")),s.a.createElement("div",{className:"setupFeatures featureCheckboxes"},o&&s.a.createElement("div",{className:"new-modal-row new-modal-row-1c settingError"},s.a.createElement("div",{className:"bold"},"Error detected"),s.a.createElement("div",{className:"errorSubtext"},"There is an error with your offline authentication. Click here to fix it."),s.a.createElement("div",{className:"center"},s.a.createElement(p.a,{raised:!0,onClick:this.onClickFixError},"FIX ERROR"))),s.a.createElement("div",{className:"featureTier c-border"},s.a.createElement("div",{className:"tierTitleWrapper"},s.a.createElement(h.a,{ref:"free",className:"tierTitle c-background",initialChecked:!1,onChange:this.onChangeFree},"Free Plugins")),s.a.createElement("div",{className:"flexbox"},s.a.createElement("div",{className:"setupFeatureHalf"},this.renderPluginCheckbox(PluginID.Contacts,"Google Contacts",s.a.createElement("i",{className:"icon-group"})),this.renderPluginCheckbox(PluginID.Gmail,"Gmail",s.a.createElement("img",{src:"/img/plugin-gmail.png"}))),s.a.createElement("div",{className:"setupFeatureHalf"},s.a.createElement("div",{className:"setupFeature"},s.a.createElement(h.a,{ref:"offlineFeatures",initialChecked:!!t.enableOfflineAuth,onChange:this.onChangeFeature},"Offline Features"),s.a.createElement("div",{className:"setupFeatureDesc c-foreground-light"},"Gmail features like Snooze require server access to your account so Moo.do can manage your inbox."))))),s.a.createElement("div",{className:"featureTier c-border"},s.a.createElement("div",{className:"tierTitleWrapper"},s.a.createElement(h.a,{ref:"premium",className:"tierTitle c-background",initialChecked:!1,onChange:this.onChangePremium},"Premium Plugins")),!a&&r&&s.a.createElement("div",{className:"featureTierDesc c-foreground-light"},"Your free trial of Premium has ended. Please signup to continue using premium features or contact support@moo.do to extend."),!a&&!r&&s.a.createElement("div",{className:"featureTierDesc c-foreground-light"},"Enabling Premium features will start a free "+i.a.TrialDuration+" day trial of Moo.do Premium."),s.a.createElement("div",{className:"flexbox"},s.a.createElement("div",{className:"setupFeature setupFeatureHalf"},this.renderPluginCheckbox(PluginID.GCalendar,"Google Calendar",s.a.createElement("img",{src:"/img/plugin-gcal.png"}))),s.a.createElement("div",{className:"setupFeature setupFeatureHalf"},this.renderPluginCheckbox(PluginID.Drive,"Google Drive",s.a.createElement("img",{src:"/img/plugin-gdrive.png"})),this.renderPluginOptionCheckbox(PluginID.Drive,"DriveShared",PluginSettingsID.Drive.WriteAccess,"Share files with collaborators")))),s.a.createElement("div",{className:"setupSubtext"},s.a.createElement("b",null,"Moo.do")," connects with your Google services to integrate everything together. ",s.a.createElement("b",null,"Moo.do")," data is stored in your personal Google Drive account and is never sent to any other server. Nobody can access any of your data. See our ",s.a.createElement("span",{className:"link"},"Privacy Policy")," for more details."),s.a.createElement("div",{className:"setupButtons center"},s.a.createElement(p.a,{raised:!0,primary:!0,onClick:this.onClickSave,enabled:t.isSaveEnabled},"SAVE"),s.a.createElement(p.a,{raised:!0,marginLeft:24,onClick:this.onClickCancel,enabled:t.isSaveEnabled},"RESET"))))}}),y=a(32),k=l.a.createClass({displayName:"ReactModalSettingsAccounts",componentDisplay:i.a.ComponentDisplay.Desktop,getState:function(){var e=n.default.billingManager;return{validBilling:e._hasValidBillingData,premiumStatus:e._premiumStatus,daysLeftInTrial:e.daysLeftInTrial,trialOverHidden:n.default.settings.get(Settings.trialOverHidden),monthlyInvoice:n.default.settings.get(Settings.monthlyInvoice),invoiceEmail:n.default.settings.get(Settings.invoiceEmail),invoiceCompany:n.default.settings.get(Settings.invoiceCompany),invoiceAddress:n.default.settings.get(Settings.invoiceAddress),isUnsubscribed:n.default.settings.get(Settings.isUnsubscribed)}},onClickDismissTrial:function(){n.default.settings.set(Settings.trialOverHidden,!0),this.updateState()},onUnsubscribedChanged:function(e){var t=n.default.settings.get(Settings.isUnsubscribed);n.default.settings.set(Settings.isUnsubscribed,e),e?n.default.XHR_PrivateAPI({type:"POST",path:"/feedback/unsubscribe",data:{email:n.default.vmMain.getUserEmail()},requireAuth:!0,cb:function(a){a.status!==i.a.HTTPStatusCode.Success?(n.default.settings.set(Settings.isUnsubscribed,t),n.default.toasts.pushMessage({text:"There was an error updating your subscription status. Please retry or contact support@moo.do.",actionText:"RETRY",timeout:8e3,action:function(){this.onUnsubscribedChanged(e)}.bind(this)})):n.default.toasts.pushMessage({text:"You have successfully unsubscribed from further emails.",actionText:"OKAY",timeout:2e3})}.bind(this)}):n.default.XHR_PrivateAPI({type:"POST",path:"/feedback/subscribe",data:{email:n.default.vmMain.getUserEmail()},requireAuth:!0,cb:function(a){a.status!==i.a.HTTPStatusCode.Success?(n.default.settings.set(Settings.isUnsubscribed,t),n.default.toasts.pushMessage({text:"There was an error updating your subscription status. Please retry or contact support@moo.do.",actionText:"RETRY",timeout:8e3,action:function(){this.onUnsubscribedChanged(e)}.bind(this)})):n.default.toasts.pushMessage({text:"Success!",actionText:"OKAY",timeout:2e3})}.bind(this)})},onInvoiceEnabledChanged:function(e){this._onInvoiceChanged(e,n.default.settings.get(Settings.invoiceEmail),n.default.settings.get(Settings.invoiceCompany),n.default.settings.get(Settings.invoiceAddress))},onInvoiceEmailChanged:function(e){clearTimeout(this._invoiceEmailTimeout),this._invoiceEmailTimeout=setTimeout(function(){this._onInvoiceChanged(n.default.settings.get(Settings.monthlyInvoice),e,n.default.settings.get(Settings.invoiceCompany),n.default.settings.get(Settings.invoiceAddress)),this._invoiceEmailTimeout=void 0}.bind(this),3e3)},onInvoiceCompanyChanged:function(e){clearTimeout(this._invoiceCompanyTimeout),this._invoiceCompanyTimeout=setTimeout(function(){this._onInvoiceChanged(n.default.settings.get(Settings.monthlyInvoice),n.default.settings.get(Settings.invoiceEmail),e,n.default.settings.get(Settings.invoiceAddress)),this._invoiceCompanyTimeout=void 0}.bind(this),3e3)},onInvoiceAddressChanged:function(e){clearTimeout(this._invoiceAddressTimeout),this._invoiceAddressTimeout=setTimeout(function(){this._onInvoiceChanged(n.default.settings.get(Settings.monthlyInvoice),n.default.settings.get(Settings.invoiceEmail),n.default.settings.get(Settings.invoiceCompany),e),this._invoiceAddressTimeout=void 0}.bind(this),3e3)},_onInvoiceChanged:function(e,t,a,r){var o=n.default.settings.get(Settings.monthlyInvoice),s=n.default.settings.get(Settings.invoiceEmail),l=n.default.settings.get(Settings.invoiceCompany),c=n.default.settings.get(Settings.invoiceAddress);n.default.settings.set(Settings.monthlyInvoice,e),n.default.settings.set(Settings.invoiceEmail,t),n.default.settings.set(Settings.invoiceCompany,a),n.default.settings.set(Settings.invoiceAddress,r),n.default.sendEvent("InvoiceChanged",e);var d=e?1:0;n.default.XHR_PrivateAPI({type:"POST",path:"/billing/invoice",data:{isEnabled:d,invoiceEmail:t,invoiceCompany:a,invoiceAddress:r},requireAuth:!0,cb:function(d){d.status!==i.a.HTTPStatusCode.Success?(n.default.settings.set(Settings.monthlyInvoice,o),n.default.settings.set(Settings.invoiceEmail,s),n.default.settings.set(Settings.invoiceCompany,l),n.default.settings.set(Settings.invoiceAddress,c),n.default.toasts.pushMessage({text:"There was an error updating your invoice status on the server. Please retry in a minute.",actionText:"RETRY",timeout:8e3,action:function(){this._onInvoiceChanged(e,t,a,r)}.bind(this)})):n.default.toasts.pushMessage({text:"Your invoice information was successfully updated.",actionText:"OKAY",timeout:2e3}),this.updateState()}.bind(this)})},render:function(){var e=n.default.billingManager,t=this.state,a=n.default.vmMain.getUserName(),i=n.default.vmMain.getUserEmail(),r=e.getMonthlyPrice(),o=e.getYearlyPrice();return s.a.createElement("div",{key:"content",className:"new-modal-group"},e.isTrialOver()&&!t.trialOverHidden&&s.a.createElement("div",{className:"new-modal-row-1c"},s.a.createElement("div",{className:"new-modal-row trialEnd"},s.a.createElement("div",null,"Your trial has ended. Please sign up to continue using Premium features."),s.a.createElement("div",{className:"center",style:{marginTop:16}},s.a.createElement(p.a,{raised:!0,onClick:this.onClickDismissTrial},"DISMISS"))),s.a.createElement("hr",null)),s.a.createElement("div",{className:"new-modal-title"},s.a.createElement("div",{className:"title"},a&&"Hi "+a),t.validBilling&&e.isTrialState()&&s.a.createElement("div",{className:"subtext center"},"We hope your trial of Premium is going well."),t.validBilling&&e.hasPremium()&&s.a.createElement("div",{className:"subtext center"},"We are very happy to have you as a Premium Member."),t.validBilling&&!e.hasPremium()&&!e.isTrialState()&&s.a.createElement("div",{className:"subtext center"},"We hope Moo.do is helping you be productive.")),s.a.createElement("div",{className:"new-modal-row new-modal-row-2c"},s.a.createElement("div",{className:"left-header"},"ACCOUNT STATUS"),s.a.createElement("div",{className:"right-content"},s.a.createElement("div",{className:"new-modal-subrow"},s.a.createElement("div",null,s.a.createElement("div",{className:"subtitle"},"Account email"),s.a.createElement("div",{className:"subtext"},i)),s.a.createElement("div",null,s.a.createElement("div",{className:"subtitle"},"Member since"),s.a.createElement("div",{className:"subtext"},e.getJoinDate().toString(m.a.getFormat(DFormat.LongStrDate)))),e.isTrialState()&&!e.isTrialOver()&&s.a.createElement("div",null,s.a.createElement("div",{className:"subtitle"},"Days left in trial"),s.a.createElement("div",{className:"subtext"},t.daysLeftInTrial)),e.hasPremium()&&s.a.createElement("div",null,s.a.createElement("div",{className:"subtitle"},"Premium since"),s.a.createElement("div",{className:"subtext"},e.getPremiumStartDate().toString(m.a.getFormat(DFormat.LongStrDate)))),!!e.canceledUserHasPremiumAccess()&&s.a.createElement("div",null,s.a.createElement("div",{className:"subtitle"},"Premium end"),s.a.createElement("div",{className:"subtext"},e.getPremiumEndDate().toString(m.a.getFormat(DFormat.LongStrDate)))),e.hasPremium()&&e.hasSubscription()&&s.a.createElement("div",null,s.a.createElement("div",{className:"subtitle"},"Next billing cycle"),s.a.createElement("div",{className:"subtext"},e.getNextBillingDate().toString(m.a.getFormat(DFormat.LongStrDate))))))),s.a.createElement("div",{className:"new-modal-row new-modal-row-2c"},s.a.createElement("div",{className:"left-header"},"MANAGE ACCOUNT"),s.a.createElement("div",{className:"right-content"},s.a.createElement("div",{className:"new-modal-subrow"},!e.hasPremium()&&s.a.createElement("div",null,s.a.createElement(p.a,{raised:!0,onClick:e.onTapDeleteAccount.bind(e)},"DELETE ACCOUNT")),e.hasPremium()&&e.hasSubscription()&&s.a.createElement("div",null,s.a.createElement(p.a,{raised:!0,onClick:e.onTapUpdatePaymentMethod.bind(e)},"UPDATE PAYMENT METHOD")),e.hasPremium()&&s.a.createElement("div",null,s.a.createElement(p.a,{raised:!0,onClick:e.onTapCancelSubscription.bind(e)},"CANCEL PREMIUM")),s.a.createElement("div",null,s.a.createElement(h.a,{checked:n.default.settings.get(Settings.isUnsubscribed),onChange:this.onUnsubscribedChanged},"Unsubscribe from emails"))))),e.hasPremium()&&e.hasSubscription()&&s.a.createElement("div",{className:"new-modal-row new-modal-row-2c"},s.a.createElement("div",{className:"left-header"},"INVOICES"),s.a.createElement("div",{className:"right-content"},s.a.createElement("div",{className:"new-modal-subrow"},s.a.createElement("div",null,s.a.createElement(h.a,{checked:n.default.settings.get(Settings.monthlyInvoice),onChange:this.onInvoiceEnabledChanged},"Receive Billing Invoice")),t.monthlyInvoice&&s.a.createElement(y.a,{height:50,floatingText:"Invoice Email",display:"block",ref:"invoiceEmail",value:t.invoiceEmail,onChange:this.onInvoiceEmailChanged}),t.monthlyInvoice&&s.a.createElement(y.a,{height:50,floatingText:"Name",display:"block",ref:"invoiceCompany",value:t.invoiceCompany,onChange:this.onInvoiceCompanyChanged}),t.monthlyInvoice&&s.a.createElement(y.a,{height:50,floatingText:"Address",display:"block",ref:"invoiceAddress",value:t.invoiceAddress,onChange:this.onInvoiceAddressChanged}),s.a.createElement("div",null,s.a.createElement(p.a,{raised:!0,onClick:e.onTapViewInvoices.bind(this)},"VIEW INVOICES"))))),!e.hasPremium()&&s.a.createElement("span",{id:"accountSettingsPremium"},s.a.createElement("hr",null),s.a.createElement("div",{className:"new-modal-title"},s.a.createElement("div",{className:"title"},"Moo.do Premium"),s.a.createElement("div",{className:"subtext center"},"Integrate more of your services together and unlock advanced organization and customization features."),s.a.createElement("div",{className:"center",style:{marginTop:24}},s.a.createElement(p.a,{fontSize:14,raised:!0,primary:!0,onClick:e.onTapSignupMonth.bind(e)},"$"+r+" / month"),s.a.createElement(p.a,{fontSize:14,raised:!0,primary:!0,marginLeft:16,onClick:e.onTapSignupYear.bind(e)},"$"+o+" / year"),s.a.createElement(p.a,{fontSize:14,raised:!0,primary:!0,marginLeft:16,onClick:e.onTapCodeSignup.bind(e)},"Enter Code"))),s.a.createElement("div",{id:"premiumFeatures"},s.a.createElement("div",{className:"flexbox c-border"},s.a.createElement("div",{className:"premiumImg premiumShadow"},s.a.createElement("img",{src:"/img/about/CalendarPane.gif"})),s.a.createElement("div",{className:"premiumDesc"},s.a.createElement("div",{className:"premiumTitle"},"Calendar Pane"),s.a.createElement("div",{className:"premiumText"},"Day, Week, and Month views for managing your calendar."))),s.a.createElement("div",{className:"flexbox c-border"},s.a.createElement("div",{className:"premiumImg premiumShadow"},s.a.createElement("img",{src:"/img/about/DrivePane.png"})),s.a.createElement("div",{className:"premiumDesc"},s.a.createElement("div",{className:"premiumTitle"},"Google Drive Pane"),s.a.createElement("div",{className:"premiumText"},"Attach documents to your tasks. Dragging a file from your computer into Moo.do automatically uploads it to Drive."))),s.a.createElement("div",{className:"flexbox c-border"},s.a.createElement("div",{className:"premiumImg premiumShadow"},s.a.createElement("img",{src:"/img/about/GCalSettings.jpg"})),s.a.createElement("div",{className:"premiumDesc"},s.a.createElement("div",{className:"premiumTitle"},"Google Calendar Sync"),s.a.createElement("div",{className:"premiumText"},"Two way sync: Manage your Google Calendar in Moo.do and/or sync your Moo.do events with your Google Calendar."))),s.a.createElement("div",{className:"flexbox c-border"},s.a.createElement("div",{className:"premiumImg premiumShadow"},s.a.createElement("img",{src:"/blog/img/update-workspaces.png"})),s.a.createElement("div",{className:"premiumDesc"},s.a.createElement("div",{className:"premiumTitle"},"Boards"),s.a.createElement("div",{className:"premiumText"},"Save sets of panes to easily switch between workflows."))),s.a.createElement("div",{className:"flexbox c-border"},s.a.createElement("div",{className:"premiumImg premiumShadow"},s.a.createElement("img",{src:"/img/about/DisplaySettings-Small.jpg"})),s.a.createElement("div",{className:"premiumDesc"},s.a.createElement("div",{className:"premiumTitle"},"Advanced Display Settings"),s.a.createElement("div",{className:"premiumText"},"Customize Moo.do's look and feel to your liking."))),s.a.createElement("div",{className:"flexbox c-border"},s.a.createElement("div",{className:"premiumImg"},s.a.createElement("img",{src:"/img/about/GmailCache.jpg"})),s.a.createElement("div",{className:"premiumDesc"},s.a.createElement("div",{className:"premiumTitle"},"Gmail Sync Time"),s.a.createElement("div",{className:"premiumText"},"Cache emails for access while offline and quicker load time.")))),s.a.createElement("table",{id:"pricingTable"},s.a.createElement("tbody",null,s.a.createElement("tr",{className:"c-border c-bg-faded"},s.a.createElement("td",null),s.a.createElement("td",null,"Free"),s.a.createElement("td",null,"Premium")),s.a.createElement("tr",{className:"empty"},s.a.createElement("td",null),s.a.createElement("td",null),s.a.createElement("td",null)),s.a.createElement("tr",{className:"header price"},s.a.createElement("td",null,"Price"),s.a.createElement("td",null,"$0"),s.a.createElement("td",null,s.a.createElement("div",null,"$"+r+" / month"),s.a.createElement("div",null,"$"+o+" / year"))),s.a.createElement("tr",{className:"header"},s.a.createElement("td",null,"Core Features"),s.a.createElement("td",null),s.a.createElement("td",null)),s.a.createElement("tr",null,s.a.createElement("td",null,"Unlimited items"),s.a.createElement("td",{className:"icon-check"}),s.a.createElement("td",{className:"icon-check"})),s.a.createElement("tr",null,s.a.createElement("td",null,"Powerful search"),s.a.createElement("td",{className:"icon-check"}),s.a.createElement("td",{className:"icon-check"})),s.a.createElement("tr",null,s.a.createElement("td",null,"Realtime collaboration"),s.a.createElement("td",{className:"icon-check"}),s.a.createElement("td",{className:"icon-check"})),s.a.createElement("tr",null,s.a.createElement("td",null,"Multiple Boards"),s.a.createElement("td",null),s.a.createElement("td",{className:"icon-check"})),s.a.createElement("tr",null,s.a.createElement("td",null,"Day, Week, Month views"),s.a.createElement("td",null),s.a.createElement("td",{className:"icon-check"})),s.a.createElement("tr",{className:"empty"},s.a.createElement("td",null),s.a.createElement("td",null),s.a.createElement("td",null)),s.a.createElement("tr",{className:"header"},s.a.createElement("td",null,"Plugins"),s.a.createElement("td",null),s.a.createElement("td",null)),s.a.createElement("tr",null,s.a.createElement("td",null,s.a.createElement("i",{className:"icon-group"}),"Google Contacts"),s.a.createElement("td",{className:"icon-check"}),s.a.createElement("td",{className:"icon-check"})),s.a.createElement("tr",null,s.a.createElement("td",null,s.a.createElement("img",{src:"/img/plugin-mailbird.png"}),"Mailbird"),s.a.createElement("td",{className:"icon-check"}),s.a.createElement("td",{className:"icon-check"})),s.a.createElement("tr",null,s.a.createElement("td",null,s.a.createElement("img",{src:"/img/plugin-gdrive.png"}),"Google Drive"),s.a.createElement("td",null),s.a.createElement("td",{className:"icon-check"})),s.a.createElement("tr",{className:"empty"},s.a.createElement("td",null),s.a.createElement("td",null),s.a.createElement("td",null)),s.a.createElement("tr",{className:"header"},s.a.createElement("td",null,s.a.createElement("img",{src:"/img/plugin-gmail.png"}),"Gmail"),s.a.createElement("td",null),s.a.createElement("td",null)),s.a.createElement("tr",null,s.a.createElement("td",null,"Standard email features"),s.a.createElement("td",{className:"icon-check"}),s.a.createElement("td",{className:"icon-check"})),s.a.createElement("tr",null,s.a.createElement("td",null,"Offline sync"),s.a.createElement("td",null,"2 days"),s.a.createElement("td",null,"30 days")),s.a.createElement("tr",{className:"empty"},s.a.createElement("td",null),s.a.createElement("td",null),s.a.createElement("td",null)),s.a.createElement("tr",{className:"header"},s.a.createElement("td",null,s.a.createElement("img",{src:"/img/plugin-gcal.png"}),"Google Calendar"),s.a.createElement("td",null),s.a.createElement("td",null)),s.a.createElement("tr",null,s.a.createElement("td",null,"Sync Moo.do tasks"),s.a.createElement("td",null),s.a.createElement("td",{className:"icon-check"})),s.a.createElement("tr",null,s.a.createElement("td",null,"Manage Calendar in Moo.do"),s.a.createElement("td",null),s.a.createElement("td",{className:"icon-check"})),s.a.createElement("tr",{className:"empty"},s.a.createElement("td",null),s.a.createElement("td",null),s.a.createElement("td",null)),s.a.createElement("tr",{className:"header"},s.a.createElement("td",null,"Customization"),s.a.createElement("td",null),s.a.createElement("td",null)),s.a.createElement("tr",null,s.a.createElement("td",null,"Display settings presets"),s.a.createElement("td",{className:"icon-check"}),s.a.createElement("td",{className:"icon-check"})),s.a.createElement("tr",null,s.a.createElement("td",null,"Advanced display settings"),s.a.createElement("td",null),s.a.createElement("td",{className:"icon-check"})),s.a.createElement("tr",{className:"empty"},s.a.createElement("td",null),s.a.createElement("td",null),s.a.createElement("td",null)),s.a.createElement("tr",{className:"header"},s.a.createElement("td",null,"We love you",s.a.createElement("i",{className:"icon-heart"})),s.a.createElement("td",null),s.a.createElement("td",null)),s.a.createElement("tr",null,s.a.createElement("td",null,"Early access to new features"),s.a.createElement("td",null),s.a.createElement("td",{className:"icon-check"})),s.a.createElement("tr",null,s.a.createElement("td",null,"Premium support"),s.a.createElement("td",null),s.a.createElement("td",{className:"icon-check"})),s.a.createElement("tr",{className:"empty"},s.a.createElement("td",null),s.a.createElement("td",null),s.a.createElement("td",null))))))}}),b=(a(9),a(55)),S=l.a.createClass({displayName:"ReactModalSettingsEarly",componentDisplay:i.a.ComponentDisplay.Desktop,init:function(){this.createObservables({isSendingFeedback:!1})},openSection:function(e){this.props.openSection(e)},onClickDiscard:function(){this.refs.feedback.value="",this.refs.feedback.focus()},onClickSend:function(e,t){var a=this.refs.feedback.value;if(a&&a.length>2){this.isSendingFeedback.set(!0);var i="Early Access Feedback: "+this.refs.selectFeature.value;return n.default.sendFeedback(i,a,function(){this.refs.feedback.value="",this.isSendingFeedback.set(!1),t&&n.default.isFunction(t)&&t()}.bind(this)),!0}},render:function(){n.default.billingManager,this.props;var e=this.state;return s.a.createElement("div",{key:"content",className:"new-modal-group"},s.a.createElement("div",{className:"new-modal-title"},s.a.createElement("div",{className:"title"},"Send Feedback"),s.a.createElement("div",{className:"subtext middle"},"Send the developers bug reports, feedback, or suggestions. Your feedback is very helpful in planning what to do next.")),s.a.createElement("div",{className:"earlyAccessFeedback"},s.a.createElement("textarea",{className:"feedbackTextArea c-background c-foreground",ref:"feedback",style:{marginBottom:16,color:e.isSendingFeedback?"#aaa":null}}),e.isSendingFeedback&&s.a.createElement(b.a,{top:100}),s.a.createElement("div",{style:{textAlign:"right"}},s.a.createElement(p.a,{raised:!0,onClick:this.onClickDiscard},"DISCARD"),s.a.createElement(p.a,{raised:!0,primary:!0,marginLeft:16,onClick:this.onClickSend},"SEND"))))}}),D=a(78),N=l.a.createClass({displayName:"ReactModalSettingsLinked",componentDisplay:i.a.ComponentDisplay.Desktop,init:function(){this.createObservables({addingAccount:!1,errorMessage:"",linkingAccount:!1}),c.a.refresh()},componentDidMount:function(){this.listenTo(d.a.onAccountsUpdated)},getState:function(){return{gmailSyncAccounts:c.a.GmailSyncAccounts,linkedAccounts:d.a.getLinkedAccounts()}},linkAccount:function(e,t,a){var n=[GScope.UserInfoEmail];return n.pushArray(t),E.default.linkAccount(e,n,a)},removeAccount:function(e){this.errorMessage.set("");var t=n.default.vmMain.pluginManager.getPlugin(PluginID.Gmail);d.a.removeLinkedAccount(e,function(t){t||n.default.toasts.pushMessage({text:"There was an error unlinking your account.",actionText:"RETRY",action:this.removeAccount.bind(this,e)})}.bind(this)),t.hasSyncAccount(e)&&t.removeSyncAccount(e,function(){c.a.refresh()})},addAccount:function(e){d.a.isDefaultEmail(e)?n.default.toasts.pushMessage({text:"Please use the 'Plugins' section to manage your main account."}):(d.a.addLinkedAccount(e),n.default.vmMain.pluginManager.getPlugin(PluginID.Gmail).isEnabled()&&this.enableGmailSync(e,!0))},enableGmailSync:function(e,t){this.errorMessage.set("");var a=n.default.vmMain.pluginManager.getPlugin(PluginID.Gmail),i=function(){this.errorMessage.set("There was an error linking your account. Please try again in a minute."),c.a.refresh()}.bind(this);if(t){var r=this.linkingAccount;r.set(e),this.linkAccount(e,[GScope.GmailCompose,GScope.GmailModify],function(e,t){e?a.addSyncAccount(t,function(e){e||i(),r.set(!1),c.a.refresh()}):(r.set(!1),i())})}else a.removeSyncAccount(e,function(e){e||i(),c.a.refresh()})},onAddAccountClick:function(){this.errorMessage.set(""),this.addingAccount.set(!0),setTimeout(function(){this.refs.addAccount.focus()}.bind(this),0)},onAddButtonClick:function(){this.errorMessage.set("");var e=this.refs.addAccount.getValue();this.addAccount(e),this.addingAccount.set(!1)},handleGmailClick:function(){n.default.vmMain.pluginManager.getPlugin(PluginID.Gmail).isEnabled()||this.props.openSection(i.a.SettingsSections.Plugins)},renderAccount:function(e){var t=n.default.vmMain.pluginManager.getPlugin(PluginID.Gmail).isEnabled(),a=this.state.gmailSyncAccounts.indexOf(e)>=0,i=a&&d.a.isConnected()&&(!d.a.isAuthorized(e,GScope.GmailCompose)||!d.a.isCurrentlyAuthorized(e)),r=this.state.linkingAccount===e,o=n.default.classNames("accountRow",{linking:r});return s.a.createElement("div",{key:"row"+e,className:o},s.a.createElement(p.a,{icon:"icon-close",iconSize:20,width:50,height:50,onClick:this.removeAccount.bind(this,e),tooltip:"Unlink Account"}),s.a.createElement("div",null,e),s.a.createElement(h.a,{disabled:!t,checked:a,error:i,onClick:this.handleGmailClick,onChange:this.enableGmailSync.bind(this,e)}),r&&s.a.createElement(b.a,{inline:!0},"Linking account..."))},getAccountList:function(){var e=[];e.pushOnlyUniques(this.state.linkedAccounts),e.pushOnlyUniques(this.state.gmailSyncAccounts);var t=d.a.getDefaultEmail();return e.filter(function(e){return e!==t})},render:function(){var e=this.getAccountList(),t=s.a.createElement(D.a,{className:"gmailAccountTable"},s.a.createElement("div",{key:"header"},s.a.createElement("div",null),s.a.createElement("div",null,"Account"),s.a.createElement("div",null,"Enabled")),e.map(this.renderAccount));return s.a.createElement("div",{key:"content",className:"new-modal-group"},s.a.createElement("div",{className:"new-modal-title"},s.a.createElement("div",{className:"title"},"Email Accounts"),s.a.createElement("div",{className:"subtext center"},"Manage email from multiple Gmail accounts")),t,this.state.addingAccount&&s.a.createElement("div",{key:"footer",style:{padding:"0 32px"}},s.a.createElement(y.a,{ref:"addAccount",floatingText:"Account Email",padding:{left:24,right:24},height:50,buttonText:"ADD",onButtonClick:this.onAddButtonClick})),this.state.errorMessage&&s.a.createElement("div",{key:"errorMessage",style:{textAlign:"center"}},this.state.errorMessage),!this.state.addingAccount&&s.a.createElement("div",{key:"footer"},s.a.createElement("div",{style:{textAlign:"center"}},s.a.createElement(p.a,{height:50,onClick:this.onAddAccountClick},"LINK ACCOUNT"))))}}),M=l.a.createClass({displayName:"ReactModalSettingsGCal",componentDisplay:i.a.ComponentDisplay.Desktop,init:function(){this.hadCalendarSyncUpdated=!1,this.createObservables({addingCalendar:!1}),c.a.refresh()},openSection:function(e){this.props.openSection(e)},componentDidMount:function(){this.listenTo(d.a.onAccountsUpdated)},onUnmount:function(){if(this.hadCalendarSyncUpdated){var e=n.default.vmMain.pluginManager.getPlugin(PluginID.GCalendar);e.isActive()&&e.forceRemoteEventSync()}},getState:function(){var e={premiumStatus:n.default.billingManager._premiumStatus,GCalendarsAvailable:c.a.GCalendarsAvailable,GCalendarSyncErrors:c.a.GCalendarSyncErrors,GCalendarAddFailure:c.a.GCalendarAddFailure,GCalendarListFailure:c.a.GCalendarListFailure,GCalendarListLoading:c.a.GCalendarListLoading},t=c.a.getPluginOptions(PluginID.GCalendar);for(var a in t){if(t.hasOwnProperty(a))e[PluginID.GCalendar+"_"+a]=t[a]}return e},toggleCalendarImport:function(e){var t=PluginSettingsID.GCalendar.ImportCalendars,a=(this.state[PluginID.GCalendar+"_"+t]||[]).slice(0),i=this.isExportCalendar(e);i&&this.disableCalendarExport(e);var r=a.indexOfWithProperty("id",e.id);if(r>=0)a.removeAt(r);else{try{n.default.PAssert(2567,!i,"Export calendar state must be matching with import calendar state")}catch(e){n.default.reportError(e)}a.push({id:e.id,summary:e.summary,accessRole:e.accessRole})}c.a.setPluginOption(PluginID.GCalendar,t,a,!1),this.hadCalendarSyncUpdated=!0},enableCalendarExport:function(e){c.a.setPluginOption(PluginID.GCalendar,PluginSettingsID.GCalendar.WriteAccess,!0,!0,function(t){t&&(c.a.setPluginOption(PluginID.GCalendar,PluginSettingsID.GCalendar.ExportCalendar,e.id,!1),this.hadCalendarSyncUpdated=!0,this.isImportCalendar(e)||this.toggleCalendarImport(e))}.bind(this))},disableCalendarExport:function(e){c.a.setPluginOption(PluginID.GCalendar,PluginSettingsID.GCalendar.WriteAccess,!1,!1,function(e){e&&c.a.setPluginOption(PluginID.GCalendar,PluginSettingsID.GCalendar.ExportCalendar,null,!1)})},toggleCalendarExport:function(e){this.isExportCalendar(e)?this.disableCalendarExport(e):this.enableCalendarExport(e)},onAddCalendarClick:function(){c.a.setPluginOption(PluginID.GCalendar,PluginSettingsID.GCalendar.WriteAccess,!0,!1,function(e){e?(this.addingCalendar.set(!0),setTimeout(function(){this.refs.addCalendar.focus()}.bind(this),0)):n.default.toasts.pushMessage({text:"Moo.do needs write access to create a new calendar.",actionText:"OKAY"})}.bind(this))},onAddButtonClick:function(){var e=this.refs.addCalendar.getValue();c.a.addCalendar(e),this.addingCalendar.set(!1)},isImportCalendar:function(e){var t=!1;if(this.state.GCalendar_importCalendars)for(var a=0;a<this.state.GCalendar_importCalendars.length;++a){var i=this.state.GCalendar_importCalendars[a];if(n.default.isObject(i)||(i={id:i}),i.id===e.id){t=!0;break}}return t},isExportCalendar:function(e){var t=!1;return this.state.GCalendar_exportCalendar&&(t=this.state.GCalendar_exportCalendar===e.id),t},onDisplayOverdueChange:function(e){n.default.vmMain.pluginManager.setSetting(PluginID.GCalendar,PluginSettingsID.GCalendar.DisplayOverdueInAgenda,e)},onSyncNewEventsChange:function(e){n.default.vmMain.pluginManager.setSetting(PluginID.GCalendar,PluginSettingsID.GCalendar.SyncNewEvents,e)},onSyncDraggedEventsChange:function(e){n.default.vmMain.pluginManager.setSetting(PluginID.GCalendar,PluginSettingsID.GCalendar.SyncDraggedEvents,e)},onCreateLocalChange:function(e){n.default.vmMain.pluginManager.setSetting(PluginID.GCalendar,PluginSettingsID.GCalendar.CreateLocalEvents,e)},renderCalendarSettings:function(){var e,t,a,r,o=this.state,l=0,d=o.GCalendarSyncErrors,u=!1;if(d)for(var m=0;m<d.length;m++){var f=d[m].result;f===i.a.SyncResult.FailureOAuth?u=!0:f!==i.a.SyncResult.FailureNoRead&&f!==i.a.SyncResult.FailureNoWrite||l++}var v=n.default.vmMain.pluginManager.getPlugin(PluginID.GCalendar),E=v.getSetting(PluginSettingsID.GCalendar.WriteAccess),C=v.getSetting(PluginSettingsID.GCalendar.WeeksPast),k=v.getSetting(PluginSettingsID.GCalendar.WeeksFuture),S=v.getSetting(PluginSettingsID.GCalendar.DisplayOverdueInAgenda),N=v.getSetting(PluginSettingsID.GCalendar.SyncNewEvents),M=v.getSetting(PluginSettingsID.GCalendar.SyncDraggedEvents),x=v.getSetting(PluginSettingsID.GCalendar.CreateLocalEvents),w=!1;return!E&&this.state.GCalendar_exportCalendar&&(w=!0),n.default.billingManager.hasPremiumFeatures()?u&&0===o.GCalendarsAvailable.length?r=s.a.createElement("center",null,s.a.createElement("div",{className:"error"},"We encountered a sync error. Please allow access to your calendar."),s.a.createElement("br",null),s.a.createElement(p.a,{raised:!0,primary:!0,onClick:c.a.enablePlugin.bind(c.a,PluginID.GCalendar)},"ALLOW")):o.GCalendarListFailure?r=s.a.createElement("center",null,s.a.createElement("div",{className:"error"},"There was an error syncing your calendar list. Please try again."),s.a.createElement("br",null),s.a.createElement(p.a,{raised:!0,primary:!0,onClick:c.a.updateCalendarList.bind(c.a)},"RETRY")):o.GCalendarListLoading?r=s.a.createElement(b.a,null,"Loading Google Calendars..."):(l>0&&(r=s.a.createElement("center",null,s.a.createElement("div",{style:{maxWidth:600,lineHeight:1.5,marginBottom:16},className:"error"},"There was an error reading or saving to your calendars. Please check your Google Calendar settings. The affected calendars are marked with a ",s.a.createElement(h.a,{checked:!0,error:!0,style:{marginLeft:5,marginRight:5}})," below."))),e=s.a.createElement(D.a,{className:"calendarSettingsTable new-modal-row"},s.a.createElement("div",{key:"header"},s.a.createElement("div",null,"Calendar Name"),s.a.createElement("div",null,"Sync From"),s.a.createElement("div",null,"Save To")),o.GCalendarsAvailable.map(function(e,t){var a=this.isImportCalendar(e),r=this.isExportCalendar(e),o="owner"===e.accessRole||"writer"===e.accessRole,l=n.default.classNames("calendarSettingsName",{import:a},{export:r});if(d){var c=d.indexOfWithProperty("id",e.id),u=null,m=null;if(c>=0){var p=d[c];p.result===i.a.SyncResult.FailureNoRead?u=!0:p.result===i.a.SyncResult.FailureNoRead&&(m=!0)}}var g=v.getCalendarBackgroundColor(e.id);return s.a.createElement("div",{key:"row"+t},s.a.createElement("div",{className:l},e.summary||e.id),s.a.createElement(h.a,{checked:a,error:u,checkedColor:g,onChange:this.toggleCalendarImport.bind(this,e)}),o?s.a.createElement(h.a,{checked:r,enabled:o,checkedColor:g,error:u||m||r&&w,radio:!0,onChange:this.toggleCalendarExport.bind(this,e)}):s.a.createElement("div",null))}.bind(this)),o.GCalendarAddFailure&&s.a.createElement("div",{key:"footerError"},s.a.createElement("div",{style:{textAlign:"center"}},"There was an error creating your new calendar. Please try again.")),o.addingCalendar&&s.a.createElement("div",{key:"footer"},s.a.createElement(y.a,{ref:"addCalendar",floatingText:"New calendar name",padding:{left:24,right:24},height:50,buttonText:"ADD",onButtonClick:this.onAddButtonClick})),!o.addingCalendar&&s.a.createElement("div",{key:"footer"},s.a.createElement("div",{style:{textAlign:"center"}},s.a.createElement(p.a,{height:"auto",onClick:this.onAddCalendarClick},"ADD NEW CALENDAR"))))):r=s.a.createElement("center",null,s.a.createElement("div",{className:"error"},"You must have an active Premium subscription or Trial to use Google Calendar."),s.a.createElement("br",null),s.a.createElement(p.a,{raised:!0,primary:!0,onClick:this.openSection.bind(this,i.a.SettingsSections.Account)},"ABOUT PREMIUM")),t=s.a.createElement("div",{className:"new-modal-row new-modal-row-1c"},s.a.createElement("span",{style:{display:"inline-block",width:140}},"Weeks in the past"),s.a.createElement(g.a,{value:C,minValue:0,maxValue:7,onChange:this.onChangeWeeksPast}),s.a.createElement("span",{style:{display:"inline-block",marginLeft:32,width:140}},"Weeks in the future"),s.a.createElement(g.a,{value:k,minValue:0,maxValue:12,onChange:this.onChangeWeeksFuture})),a=s.a.createElement("div",{className:"new-modal-row new-modal-row-1c"},s.a.createElement("div",{className:"new-modal-row new-modal-row-1c"},s.a.createElement(h.a,{ref:"displayoverdue",checked:S,onChange:this.onDisplayOverdueChange},"Display overdue events in agenda"),s.a.createElement("div",{className:"subtext"},"In the Agenda view of the Calendar Pane, display events from Google Calendar that happened in the past.")),s.a.createElement("div",{className:"new-modal-row new-modal-row-1c"},s.a.createElement(h.a,{ref:"syncDraggedEvents",checked:M,onChange:this.onSyncDraggedEventsChange},"Sync dragged events"),s.a.createElement("div",{className:"subtext"},"Sync events with Google Calendar when dragging onto the Calendar pane.")),s.a.createElement("div",{className:"new-modal-row new-modal-row-1c"},s.a.createElement(h.a,{ref:"syncNewEvents",checked:N,onChange:this.onSyncNewEventsChange},"Sync new events created in add item popup by default"),s.a.createElement("div",{className:"subtext"},"When adding events in the New Item popup, Create Task in the Gmail pane, or in the Day, Week, and Month views in the Calendar Pane, the option to sync the event with Google Calendar will be checked by default.")),s.a.createElement("div",{className:"new-modal-row new-modal-row-1c"},s.a.createElement(h.a,{ref:"createLocalEvents",checked:x,onChange:this.onCreateLocalChange},"Create a local item for new calendar events by default"),s.a.createElement("div",{className:"subtext"},"When adding events in the New Item popup, Create Task in the Gmail pane, or in the Day, Week, and Month views in the Calendar Pane, a new local task will be created for Google Calendar events."))),s.a.createElement("div",{className:"calendarSettings"},r,e,t,a)},onChangeWeeksPast:function(e){n.default.vmMain.pluginManager.setSetting(PluginID.GCalendar,PluginSettingsID.GCalendar.WeeksPast,e)},onChangeWeeksFuture:function(e){n.default.vmMain.pluginManager.setSetting(PluginID.GCalendar,PluginSettingsID.GCalendar.WeeksFuture,e)},render:function(){return s.a.createElement("div",{className:"new-modal-group"},s.a.createElement("div",{className:"new-modal-row new-modal-row-1c"},s.a.createElement("div",{className:"subtext"},"By default we are not able to modify your calendar or calendar events. Adding a 'Save To' calendar to below will sync your local changes to your Google Calendar."),this.renderCalendarSettings()))}}),x=l.a.createClass({displayName:"ReactModalSettingsContacts",componentDisplay:i.a.ComponentDisplay.Desktop,getState:function(){return{contacts:v.default.contactManager._contacts}},render:function(){var e=this.state;return s.a.createElement("div",{className:"settingPluginOptions"},s.a.createElement("div",{className:"subtext"},s.a.createElement("span",null,"We will not send emails or otherwise communicate with your contacts unless you ask us to."),s.a.createElement("span",null," If you need instant access to contacts you just added you can sync them by pressing the button below, otherwise your contacts will appear automatically after a few hours.")),s.a.createElement("div",{className:"center"},s.a.createElement(p.a,{id:"refreshContacts",raised:!0,primary:!0,onClick:c.a.onTapRefreshContacts.bind(c.a)},"REFRESH CONTACTS"),s.a.createElement("div",{id:"numContacts"},e.contacts.length+" contacts loaded")))}}),w=l.a.createClass({displayName:"ReactModalSettingsGmail",componentDisplay:i.a.ComponentDisplay.Desktop,init:function(){this.hadGmailSyncUpdated=!1},onUnmount:function(){if(this.hadGmailSyncUpdated){var e=n.default.vmMain.pluginManager.getPlugin(PluginID.Gmail);e.isActive()&&e._forceThreadSync()}},getState:function(){return{GmailNumSyncd:c.a.GmailNumSyncd,GmailNumTotal:c.a.GmailNumTotal,GmailCacheSize:c.a.GmailCacheSize,GmailSyncAccounts:c.a.GmailSyncAccounts}},onSyncTimeChanged:function(e){n.default.vmMain.pluginManager.setSetting(PluginID.Gmail,PluginSettingsID.Gmail.SyncTime,e),this.hadGmailSyncUpdated=!0},onScheduleChange:function(e){n.default.vmMain.pluginManager.setSetting(PluginID.Gmail,PluginSettingsID.Gmail.ArchiveOnSchedule,e)},onOrganizeChange:function(e){n.default.vmMain.pluginManager.setSetting(PluginID.Gmail,PluginSettingsID.Gmail.ArchiveOnOrganize,e)},onSignatureChange:function(e){n.default.vmMain.pluginManager.setSetting(PluginID.Gmail,PluginSettingsID.Gmail.InsertSignatureAboveReplies,e)},onClickSetupAccounts:function(){this.props.openSection(i.a.SettingsSections.Linked)},render:function(){var e=n.default.vmMain.pluginManager.getPlugin(PluginID.Gmail),t=e.getSetting(PluginSettingsID.Gmail.SyncTime),a=e.getSetting(PluginSettingsID.Gmail.ArchiveOnSchedule),r=e.getSetting(PluginSettingsID.Gmail.ArchiveOnOrganize),o=e.getSetting(PluginSettingsID.Gmail.InsertSignatureAboveReplies),l=n.default.billingManager.hasPremium()?i.a.MaxGmailSyncTime.Premium:i.a.MaxGmailSyncTime.Free;return s.a.createElement("div",{className:"new-modal-group gmailSettings"},s.a.createElement("div",{className:"new-modal-row new-modal-row-1c center"},s.a.createElement(p.a,{raised:!0,onClick:this.onClickSetupAccounts},"SETUP ACCOUNTS")),s.a.createElement("div",{className:"new-modal-row new-modal-row-1c"},s.a.createElement("span",{style:{width:140}},"Offline sync days  "),s.a.createElement(g.a,{value:t,minValue:0,maxValue:l,onChange:this.onSyncTimeChanged}),s.a.createElement("div",{className:"subtext"},"The number of days in the past that your email will be saved for offline access.")),s.a.createElement("div",{className:"new-modal-row new-modal-row-1c"},s.a.createElement(h.a,{ref:"archiveOnSchedule",checked:a,onChange:this.onScheduleChange},"Archive emails when scheduled"),s.a.createElement("div",{className:"subtext"},"If enabled, when you use the 'Schedule' feature to put an email on your calendar it will be archived.")),s.a.createElement("div",{className:"new-modal-row new-modal-row-1c"},s.a.createElement(h.a,{ref:"archiveOnOrganize",checked:r,onChange:this.onOrganizeChange},"Archive emails when organized"),s.a.createElement("div",{className:"subtext"},"If enabled, when you drag an email to your outline it will be archived and marked as Moo.do/Handled.")),s.a.createElement("div",{className:"new-modal-row new-modal-row-1c"},s.a.createElement(h.a,{ref:"insertSignatureAboveReplies",checked:o,onChange:this.onSignatureChange},"Insert signature before quoted text in replies"),s.a.createElement("div",{className:"subtext"},"If enabled, your signature will be inserted above the quoted text in replies and will remove the '--' line that precedes it.")))}}),P=a(60),I=a(59),T=["overdue","starred","important","#next","#soon","#later","#someday"],A=l.a.createClass({displayName:"ReactModalSettingsAgenda",componentDisplay:i.a.ComponentDisplay.Desktop,init:function(){for(var e=n.default.timeline.agendaSort.get(),t=[],a=Object.keys(e).map(function(t){return{key:t,value:e[t]}}),i=0;i<15;i++)a.push(i);for(a.sort(this.sortComparator),i=0;i<T.length;i++){var r=T[i];a.indexOfWithProperty("key",r)<0&&t.push({key:r,value:0})}var o=P.a.getAll();for(i=0;i<o.length;i++){var s="#"+o[i].text;a.indexOfWithProperty("key",s)<0&&t.push({key:s,value:0})}t.sort(this.sortComparatorNonSort),this.createObservables({sortArray:a,nonSortArray:t,selected:{array:"sort",index:0}})},sortComparatorNonSort:function(e,t){var a=e.key[0],n=t.key[0];return"#"===a&&"#"!==n?1:"#"===n&&"#"!==a?-1:e.key.localeCompare(t.key)},sortComparator:function(e,t){return(isNaN(e)?e.value:100*e)-(isNaN(t)?t.value:100*t)},moveChild:function(e,t,a,n){var i=this.state,r=a&&a!==this.refs.sortList?"nonSort":"sort",o=n&&n!==this.refs.nonSortList?"sort":"nonSort",s=i[r+"Array"],l=i[o+"Array"],c=s===l,d="sort"===r?i.nonSortArray:i.sortArray,u=s[e];c?s.splice(e,1):u.isDragging=!0;var m=d.indexOfWithProperty("key",u.key);m>=0&&d.splice(m,1),l.splice(t,0,u),this[r+"Array"].set(s,!1),this[o+"Array"].set(l,!0)},onDragOut:function(e,t){var a=t&&t!==this.refs.sortList?"nonSort":"sort",n=this.state[a+"Array"],i="sort"===a?this.nonSortArray:this.sortArray,r=n[e],o=i.indexOfWithProperty("key",r.key);o>=0&&i.splice(o,1)},onDragEnd:function(e,t,a){var n=e.props.owner,i=e.props.index,r=n&&n!==this.refs.sortList?"nonSort":"sort",o=this.state[r+"Array"][i];if(o.isDragging=!1,t){var s=e.props.owner;(s&&s!==this.refs.nonSortList?this.sortArray:this.nonSortArray).splice(e.props.index,1)}this.sortArray.indexOf(o)<0&&this.nonSortArray.indexOf(o)<0&&this.nonSortArray.push(o),this.sortArray.notify(),a&&this.saveAfterTimeout()},saveAfterTimeout:function(){this._saveTimeout&&clearTimeout(this._saveTimeout),this._saveTimeout=setTimeout(this.saveToSettings,200)},saveToSettings:function(){for(var e,t=this.state.sortArray,a={},i=-1,r=0;r<t.length;r++){var o=t[r];if(isNaN(o)){var s=100*i,l=e&&e>s?e+1:s+1;a[o.key]=l,e=l}else i=o}n.default.timeline.saveAgendaSort(a)},getDragTargetfromElement:function(e){var t=n.default.findParent(e,"fancySortableList"),a=this.refs;return t===a.sortList.getElement()?a.sortList:t===a.nonSortList.getElement()?a.nonSortList:void 0},onClickMoveToOtherList:function(){var e=this.state.selected,t=e.array,a=e.index,n="sort"===t?"nonSort":"sort",i=this.state[t+"Array"][a];isNaN(i)&&(this[t+"Array"].splice(a,1),this[n+"Array"].splice(0,0,i)),this.saveAfterTimeout()},onClickListItem:function(e,t){this.selected.set({array:e,index:t})},renderListItem:function(e,t,a,i){var r=this.state,o=this.onClickListItem.bind(this,i,t);if(isNaN(e)){var l=e.key.capitalize(),c=n.default.classNames(a,{"tag c-tag":l.startsWith("#")},{"selected c-popup-item":r.selected.array===i&&r.selected.index===t});return s.a.createElement("div",{key:l,className:c,onClick:o,"data-isdragging":e.isDragging},l)}return s.a.createElement("div",{key:e,className:a+" date c-date","data-nodrag":!0},s.a.createElement("span",{className:"icon-calendar"}),s.a.createElement("span",null,"Today"+(e>0?" + "+e+" days":"")))},render:function(){var e,t=this.state,a=t.sortArray,i=t.nonSortArray,r=[],o=[],l=t.selected.array,c=n.default.classNames("agendaSortSettingsItem c-background"),d=n.default.classNames({"icon-arrow_forward":"sort"===l},{"icon-arrow_back":"nonSort"===l});for(e=0;e<a.length;e++)r.push(this.renderListItem(a[e],e,c,"sort"));for(e=0;e<i.length;e++)o.push(this.renderListItem(i[e],e,c,"nonSort"));return s.a.createElement("div",{key:"content",className:"new-modal-group"},s.a.createElement("div",{className:"new-modal-row new-modal-row-1c"},s.a.createElement("div",{className:"settingsName ib"},"Change agenda sort:"),s.a.createElement("div",{className:"agendaSortLists flexbox"},s.a.createElement(I.a,{className:"agendaSortList f1 c-border-light",moveChild:this.moveChild,onDragEnd:this.onDragEnd,onDragOut:this.onDragOut,ref:"sortList",getDragTargetfromElement:this.getDragTargetfromElement,classDragging:"c-foreground-very-faded"},r),s.a.createElement("div",{className:"flexbox flexvert height100"},s.a.createElement(p.a,{raised:!0,round:!1,icon:d,onClick:this.onClickMoveToOtherList})),s.a.createElement(I.a,{className:"agendaSortList agendaSortList f1 c-border-light",moveChild:this.moveChild,onDragEnd:this.onDragEnd,onDragOut:this.onDragOut,ref:"nonSortList",getDragTargetfromElement:this.getDragTargetfromElement,classDragging:"c-foreground-very-faded"},o))))}}),O=a(75),R=a(77),L=l.a.createClass({displayName:"ReactModalSettings",componentDisplay:i.a.ComponentDisplay.Desktop,init:function(){this.createObservables({sectionOpened:this.props.section||i.a.SettingsSections.Plugins}),c.a.refresh(),c.a.getPluginEnabledObservable(PluginID.GCalendar).listen(this.onToggleGCal)},getState:function(){for(var e={},t=c.a.pluginsAvailable,a=0;a<t.length;++a){var n=t[a];e[n+"Enabled"]=c.a.getPluginEnabledObservable(n)}return e},onToggleGCal:function(e){e&&setTimeout(function(){this.openSection(i.a.SettingsSections.GoogleCalendar)}.bind(this),0)},openSection:function(e){var t=!c.a.isSaveEnabled.get();t||n.default.menus.confirm("You have unsaved changes. Are you sure you want to cancel your changes?",function(t){t&&(c.a.isSaveEnabled.set(!1),this.openSection(e))}.bind(this)),t&&this.sectionOpened.set(e)},showEarlyAndAccount:function(){return!n.default.isDemoMode()||!1},_checkLinkedAccountErrors:function(){for(var e=!1,t=n.default.vmMain.pluginManager.getPlugin(PluginID.Gmail).getSyncAccounts(),a=0;a<t.length;++a){var i=t[a];if(d.a.isConnected())d.a.getAccountError(i)&&(e=!0)}return e},_checkSectionError:function(e){var t=!1;switch(e){case i.a.SettingsSections.Linked:t=this._checkLinkedAccountErrors()}return t},renderListItem:function(e,t){var a,i=this._checkSectionError(e);if(i){var r=n.default.classNames("error","icon-warning");a=s.a.createElement("span",null,s.a.createElement("span",{className:r}),s.a.createElement("span",null,"\t"+e))}else a=s.a.createElement("span",null,"\t"+e);return s.a.createElement(R.a,{className:t&&!i?"indented":null,selected:this.state.sectionOpened===e,onClick:this.openSection.bind(this,e)},a)},renderPluginListItem:function(e,t){var a,i=n.default.vmMain.pluginManager.getPlugin(e),r=i&&i.hasSettingsError();if(r){var o=n.default.classNames("error","icon-warning");a=s.a.createElement("span",null,s.a.createElement("span",{className:o}),s.a.createElement("span",null,"\t"+t))}else a=s.a.createElement("span",null,"\t"+t);return s.a.createElement(R.a,{className:r?null:"indented",selected:this.state.sectionOpened===t,onClick:this.openSection.bind(this,t)},a)},isPluginEnabled:function(e){return this.state[e+"Enabled"]},render:function(){n.default.billingManager;var e,t,a=this.state.sectionOpened;switch(a){case i.a.SettingsSections.General:t=f;break;case i.a.SettingsSections.Plugins:t=C;break;case i.a.SettingsSections.Invite:t=u.a;break;case i.a.SettingsSections.EarlyAccess:t=S;break;case i.a.SettingsSections.Account:t=k;break;case i.a.SettingsSections.Linked:t=N;break;case i.a.SettingsSections.GoogleCalendar:t=M;break;case i.a.SettingsSections.Contacts:t=x;break;case i.a.SettingsSections.Gmail:t=w;break;case i.a.SettingsSections.Agenda:t=A;break;default:try{n.default.PAssert(1961,!1,"Unknown settings sections requested: ",a)}catch(e){n.default.reportError(e)}}e=s.a.createElement(t,{key:"content",openSection:this.openSection});var r="Settings - "+this.sectionOpened.get();return s.a.createElement(O.a,{id:"modalSettings",title:r,width:960,height:900,modalID:Modals.Settings},s.a.createElement("div",{key:"sidebar",width:170},this.renderListItem(i.a.SettingsSections.General),this.renderListItem(i.a.SettingsSections.Agenda),this.showEarlyAndAccount()&&this.renderListItem(i.a.SettingsSections.Account),this.renderListItem(i.a.SettingsSections.Plugins),this.isPluginEnabled(PluginID.GCalendar)&&this.renderPluginListItem(PluginID.GCalendar,i.a.SettingsSections.GoogleCalendar),this.isPluginEnabled(PluginID.Contacts)&&this.renderPluginListItem(PluginID.Contacts,i.a.SettingsSections.Contacts),this.isPluginEnabled(PluginID.Gmail)&&this.renderPluginListItem(PluginID.Gmail,i.a.SettingsSections.Gmail),this.showEarlyAndAccount()&&this.renderListItem(i.a.SettingsSections.Linked),this.renderListItem(i.a.SettingsSections.EarlyAccess),this.renderListItem(i.a.SettingsSections.Invite)),e)}});t.default=L},function(e,t,a){"use strict";a.r(t);var n=a(0),i=a(1),r=a(4),o=a(2),s=a.n(o),l=a(12),c=a(7),d=(a(13),a(18)),u=a(79),m=a(31),h=(a(52),a(28)),p=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var n in a)Object.prototype.hasOwnProperty.call(a,n)&&(e[n]=a[n])}return e},g=l.a.createClass({displayName:"ReactContextMenuOptions",componentDisplay:i.a.ComponentDisplay.Desktop,init:function(){},onClickSettings:function(){n.default.menus.openSettings()},onClickDisplaySettings:function(){n.default.menus.openDisplaySettings()},onClickImport:function(){c.a.miscAction({type:TrackerType.Misc,misc:TrackerMisc.OpenImport}),n.default.menus.openModalNew(Modals.ImportData)},onClickExport:function(){c.a.miscAction({type:TrackerType.Misc,misc:TrackerMisc.OpenExport}),n.default.menus.openModalNew(Modals.ExportData)},onClickRevision:function(){n.default.menus.openModalNew(Modals.RevisionHistory)},onClickFeedback:function(){n.default.menus.openModalNew(Modals.ReportBug)},onClickBlog:function(){n.default.openUrl("/blog/")},onClickLogout:function(){n.default.vmSetup.logoutClicked()},onClickShare:function(){n.default.menus.openContextMenu({componentName:"ReactContextMenuShare",element:this.props.element})},onClickDownloadApp:function(){n.default.openUrl(r.a.getAppDownloadURL())},onClickFile:function(){c.a.miscAction({type:TrackerType.Misc,misc:TrackerMisc.OpenDocumentsMenu}),n.default.menus.openContextMenu({componentName:"ReactContextMenuDocuments",element:this.props.element})},onClickTrial:function(){n.default.menus.openSettings(i.a.SettingsSections.Account)},onClickHelp:function(){n.default.menus.openContextMenu({componentName:"ReactContextMenuHelp",element:this.props.element})},renderContextMenuHeart:function(e){return s.a.createElement(m.a,{key:"contextMenuHeart",id:"contextMenuHeart",element:e.element},s.a.createElement(u.a,{shouldShowInvitedBy:!1}))},render:function(){var e=n.default.billingManager,t=n.default.vmMain.getUserName(),a=n.default.isDemoMode()?"Demo Doc":n.default.settings.get(Settings.gdocTitle),i=e.isTrialState()&&!n.default.settings.get(Settings.trialOverHidden),o=e.isTrialOver(),l=e.daysLeftInTrial.get(),c=+window.__jsVersion;return s.a.createElement(m.a,p({},this.props,{key:"contextMenuOptions",id:"contextMenuOptions",supportArrows:!0}),s.a.createElement(h.a,{icon:"icon-folder",onClick:this.onClickFile},a),s.a.createElement("hr",null),s.a.createElement(h.a,{onClick:this.onClickSettings},"Settings"),s.a.createElement(h.a,{onClick:this.onClickDisplaySettings},"Display Settings"),s.a.createElement("hr",null),s.a.createElement(h.a,{onClick:this.onClickHelp},"Help"),s.a.createElement("hr",null),s.a.createElement(h.a,{onClick:this.onClickImport},"Import Data"),s.a.createElement(h.a,{onClick:this.onClickExport},"Export Data"),s.a.createElement(h.a,{onClick:this.onClickRevision},"Revision History"),s.a.createElement("hr",null),s.a.createElement(h.a,{onClick:this.onClickFeedback},"Contact Support"),s.a.createElement(h.a,{onClick:this.onClickBlog},"Moo.do Blog"),s.a.createElement(h.a,{onClick:this.onClickShare},"Share Moo.do"),r.a.canDownloadNativeApp()&&s.a.createElement(h.a,{onClick:this.onClickDownloadApp},"Get "+r.a.getPlatformName()+" app"),s.a.createElement("hr",null),i&&s.a.createElement(h.a,{className:o?"error":"",onClick:this.onClickTrial},o?"Trial over":"Trial: "+l+" days"),s.a.createElement(h.a,{onClick:this.onClickLogout},"Logout"),s.a.createElement(h.a,{className:"username",faded:!0},t),s.a.createElement(h.a,{className:"useremail",faded:!0},n.default.getUserIdentifier()),!isNaN(c)&&s.a.createElement(h.a,{customLayout:!0,faded:!0},s.a.createElement("div",null,c),s.a.createElement("div",null,new Date(c).toString(d.a.getFormat(DFormat.ShortDayTime)))))}});t.default=g},function(e,t,a){"use strict";a.r(t);var n=a(0),i=a(1),r=a(2),o=a.n(r),s=a(12),l=a(81),c=a(32),d=a(28),u=s.a.createClass({displayName:"ReactContextMenuPaneMode",componentDisplay:i.a.ComponentDisplay.Desktop,onChange:function(e){this.props.pane.setName(e)},onEnter:function(){n.default.menus.isContextMenuOpen(this.props.componentName)&&n.default.menus.closeContextMenu(this.props.componentName)},render:function(){return o.a.createElement(l.default,this.props,o.a.createElement(d.a,{className:"namePane c-border",customLayout:!0},o.a.createElement(c.a,{value:this.props.pane.name.get(),placeholder:"Name this pane",height:32,border:!1,padding:{left:16,right:16},onChange:this.onChange,onEnter:this.onEnter})))}});t.default=u},function(e,t,a){"use strict";a.r(t);a(0);var n=a(1),i=a(2),r=a.n(i),o=a(12),s=a(79),l=a(31),c=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var n in a)Object.prototype.hasOwnProperty.call(a,n)&&(e[n]=a[n])}return e},d=o.a.createClass({displayName:"ReactContextMenuShare",componentDisplay:n.a.ComponentDisplay.Desktop,render:function(){return r.a.createElement(l.a,c({},this.props,{key:"contextMenuHeart",id:"contextMenuHeart",element:this.props.element}),r.a.createElement(s.a,{shouldShowInvitedBy:!1}))}});t.default=d},function(e,t,a){"use strict";a.r(t);var n=a(0),i=a(1),r=a(2),o=a.n(r),s=a(12),l=a(13),c=a(31),d=a(28),u=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var n in a)Object.prototype.hasOwnProperty.call(a,n)&&(e[n]=a[n])}return e},m=s.a.createClass({displayName:"ReactContextMenuHelp",componentDisplay:i.a.ComponentDisplay.Desktop,componentDidMount:function(){l.a.fireEvent("helpOpened",[])},onClickVideo:function(){var e="https://www.youtube.com/watch?v="+i.a.IntroVideoID;n.default.openUrl(e)},onClickGetStarted:function(){var e=n.default.createPath("help/basics");n.default.openUrl(e)},onClickGTDEmail:function(){var e=n.default.createPath("help/email");n.default.openUrl(e)},onClickAdvancedHelp:function(){n.default.intro.toggle(i.a.HelpMode.Normal)},onClickHotkeys:function(){n.default.intro.toggle(i.a.HelpMode.Hotkeys)},render:function(){return o.a.createElement(c.a,u({},this.props,{key:"contextMenuHelp",id:"contextMenuHelp"}),o.a.createElement(d.a,{className:"helpVideoLink",onClick:this.onClickVideo},o.a.createElement("i",{className:"icon-youtube-play"}),o.a.createElement("div",null,"Introduction Video")),o.a.createElement("hr",null),o.a.createElement(d.a,{onClick:this.onClickGetStarted},"How to get started"),o.a.createElement(d.a,{onClick:this.onClickGTDEmail},"How to GTD your email"),o.a.createElement("hr",null),o.a.createElement(d.a,{onClick:this.onClickAdvancedHelp},"Advanced Help"),o.a.createElement(d.a,{onClick:this.onClickHotkeys},"Hotkeys"))}});t.default=m},function(e,t,a){"use strict";a.r(t);var n=a(0),i=a(1),r=a(2),o=a.n(r),s=a(12),l=a(37),c=a(31),d=a(10),u=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var n in a)Object.prototype.hasOwnProperty.call(a,n)&&(e[n]=a[n])}return e},m=s.a.createClass({displayName:"ReactContextMenuAuthorize",componentDisplay:i.a.ComponentDisplay.Everywhere,onClickEnable:function(){l.a.refresh(),l.a.toggleOfflineFeatures(!0,this.onEnable)},onEnable:function(e){e&&n.default.menus.closeContextMenu()},render:function(){return o.a.createElement(c.a,u({},this.props,{key:"contextMenuAuthorize",id:"contextMenuAuthorize"}),o.a.createElement("div",null,this.props.message),o.a.createElement("div",{className:"center"},o.a.createElement(d.a,{primary:!0,raised:!0,onClick:this.onClickEnable},"ENABLE")))}});t.default=m},function(e,t,a){"use strict";a.r(t);var n=a(0),i=a(1),r=a(4),o=a(6),s=a(9),l=a(15),c=a(2),d=a.n(c),u=a(12),m=a(18),h=a(11),p=a(31),g=a(28),f=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var n in a)Object.prototype.hasOwnProperty.call(a,n)&&(e[n]=a[n])}return e},v=u.a.createClass({displayName:"ReactContextMenuOnlineStatus",componentDisplay:i.a.ComponentDisplay.Desktop,init:function(){this.createObservables({syncTimes:{}}),n.default.vmMain.pluginManager.getPlugin(PluginID.Gmail).getAllLastSyncTimes(function(e){this.syncTimes.set(e)}.bind(this)),this.listenTo(h.a.onAccountsUpdated)},getState:function(){var e=n.default.vmMain,t=e.gdriveStatus(),a={gDriveStatus:e.gDriveStatusObs,lastChangeTime:s.a.lastChangeTime,lastSyncText:this.getLastSyncText(),isOnline:t!==DriveStatus.Offline,undoRedoDisabled:!e.canRunUndoRedo(),isTrashed:e.docManager.isOpenDocTrashed(),hasTrashedDocs:e.docManager.hasTrashedDocuments(),isBlocked:n.default.hasOnlineBlockingError(),isCookiesBlocked:n.default.hasCookieBlockingError(),supportsOffline:!!window.applicationCache,overQuota:o.default.overQuota,nearQuota:!o.default.overQuota&&r.a.isNearStorageQuota,hasUnsavedData:s.a.hasPotentialUnsavedData(),cacheRatioWarning:!o.default.overQuota&&parseFloat(n.default.vmMain.pluginManager.getCacheSizeRatio())<.6,isConnected:t===DriveStatus.Saving||t===DriveStatus.Saved};return a.hasWarning=a.isTrashed||a.hasTrashedDocs||a.overQuota||a.nearQuota||a.hasUnsavedData||a.isBlocked||a.isCookiesBlocked||a.undoRedoDisabled||a.cacheRatioWarning||!a.supportsOffline,a},getLastSyncText:function(){var e,t=s.a.lastChangeTime.get();t>0?e="Last Sync: "+new Date(t).toString(m.a.getFormat(DFormat.LongDayTime)):e="Not synced";return e},_handleTrashClick:function(e){var t="https://drive.google.com/drive/u/"+n.default.vmMain.getUserEmail()+"/search?q=mimetype=application/vnd.google-apps.drive-sdk.597847337936%20is:trashed";n.default.openUrl(t,e)},_handleQuotaOverClick:function(){n.default.toasts.pushMessage({text:"Your computer's offline storage quota has been exceeded. Please try freeing space on your device. Offline access will not work.",action:MessageAction.Okay})},_handleQuotaNearClick:function(){n.default.toasts.pushMessage({text:"Your computer's offline storage quota is almost exceeded. Please try freeing space on your device, running out will cause offline access to not work.",action:MessageAction.Okay})},_handleUnsavedClick:function(){n.default.toasts.pushMessage({text:"Your local changes have been unable to be persisted to disk and have not been saved remotely. You must reconnect to the internet to save them. Free up disk space to prevent this happening.",action:MessageAction.Okay})},_handleRatioClick:function(){n.default.toasts.pushMessage({text:"Due to low disk space your cache size was restricted. View your General Settings to reset your cache size.",action:MessageAction.OpenGeneralSettings})},_handleBlockClick:function(){},_handleCookiesClick:function(){},_handleStatusClick:function(){this.state.isConnected||l.default.ensureDocConnection()},_handleIconWarningClick:function(e){try{n.default.PAssert(1967,!0,"User should never see account warnings on mobile")}catch(e){n.default.reportError(e)}h.a.isDefaultEmail(e)?n.default.menus.openSettings(i.a.SettingsSections.Plugins):n.default.menus.openSettings(i.a.SettingsSections.Linked)},componentDidUpdate:function(){this.refs.menu.updateState()},_renderAccounts:function(){var e,t,a,i,r=this.state,o=[];for(var s in r.syncTimes)if(r.syncTimes.hasOwnProperty(s)){var l=r.syncTimes[s];if(e=void 0,t=void 0,a=void 0,i=l?s+": "+l.toString(m.a.getFormat(DFormat.ShortDayTime)):s+": Not synced",h.a.isConnected()){var c=h.a.getAccountError(s);if(c)e="icon-warning",t=c,a=this._handleIconWarningClick.bind(this,s);else n.default.vmMain.pluginManager.getPlugin(PluginID.Gmail).verifyAuthorization(s).length>0&&(e="icon-warning",t="Missing authorization",a=this._handleIconWarningClick.bind(this,s))}o.push(d.a.createElement(g.a,{key:s,icon:e,iconTooltip:t,onClickIcon:a},i))}return o.length>0&&d.a.createElement("div",null,d.a.createElement("hr",null),d.a.createElement(g.a,{className:"onlineStatusHeader"},"Email accounts"),o)},render:function(){var e=this.state,t=this._renderAccounts();return d.a.createElement(p.a,f({},this.props,{ref:"menu",key:"contextMenuOnlineStatus",id:"contextMenuOnlineStatus",element:this.props.element}),d.a.createElement(g.a,{className:"onlineStatusHeader"},"File Content"),d.a.createElement(g.a,{tooltip:"Force Reconnect",onClick:this._handleStatusClick},e.lastSyncText),e.hasWarning&&d.a.createElement("div",null,d.a.createElement("hr",null),d.a.createElement(g.a,{className:"onlineStatusHeader"},"Warnings"),e.isBlocked&&d.a.createElement(g.a,{tooltip:"Learn More",onClick:this._handleBlockClick},n.default.blockedMessage),e.isCookiesBlocked&&d.a.createElement(g.a,{tooltip:"Learn More",onClick:this._handleCookiesClick},"Cookies are blocked. Unable to keep you logged in."),!e.supportsOffline&&d.a.createElement(g.a,{tooltip:"Learn More",onClick:this._handleOfflineClick},"Your browser does not support offline access"),e.isTrashed&&d.a.createElement(g.a,{tooltip:"View Trash",onClick:this._handleTrashClick},"Document is in the trash"),e.hasTrashedDocs&&d.a.createElement(g.a,{tooltip:"View Trash",onClick:this._handleTrashClick},"Trashed documents detected"),e.overQuota&&d.a.createElement(g.a,{tooltip:"Learn More",onClick:this._handleQuotaOverClick},"Disk quota exceeded"),e.nearQuota&&d.a.createElement(g.a,{tooltip:"Learn More",onClick:this._handleQuotaNearClick},"Nearly out of disk space"),e.hasUnsavedData&&d.a.createElement(g.a,{tooltip:"Learn More",onClick:this._handleUnsavedClick},"Unsaved changes will be lost"),e.cacheRatioWarning&&d.a.createElement(g.a,{tooltip:"Learn More",onClick:this._handleRatioClick},"Your data is not efficiently being cached"),e.undoRedoDisabled&&d.a.createElement(g.a,null,"You cannot undo/redo while offline")),t)}});t.default=v},function(e,t,a){"use strict";a.r(t);var n=a(0),i=a(4),r=a(1),o=a(2),s=a.n(o),l=a(12),c=a(39),d=a(3),u=a(11),m=a(10),h=a(31),p=a(52),g=a(28),f=l.a.createClass({displayName:"ReactContextMenuItem",componentDisplay:r.a.ComponentDisplay.Desktop,init:function(){this.mod=i.a.secModKey,this.priMod=i.a.priModKey,this.props.useItem||this.props.pane.applyToSelection(function(e){return this.item=e,this.hasSelection=!0,!1}.bind(this)),this.item||(this.item=this.props.item,this.hasSelection=!1);try{n.default.PAssert(1969,this.item,"Must have a valid item")}catch(e){n.default.reportError(e)}},onClickComplete:function(){this.hasSelection?n.default.vmMain.applyFnToSelection("isComplete",{toggle:!0,value2:ChangeType.Local}):this.item.isComplete(!this.item.isComplete(),ChangeType.Local)},onClickStar:function(){this.hasSelection?n.default.vmMain.applyFnToSelection("isStarred",{toggle:!0,value2:ChangeType.Local}):this.item.isStarred(!this.item.isStarred(),ChangeType.Local)},onClickPriority:function(e){this.hasSelection?this.props.pane.applyPriorityToSelection(e):this.item.priority(e,ChangeType.Local),n.default.menus.closeContextMenu()},onClickIndent:function(e){d.a.fireKeyEvent(void 0,{normCode:KeyCode.Tab,shiftKey:e})},onClickMove:function(){this.props.pane.autocompleteMove()},onClickCreateTask:function(){this.props.pane.autocompleteCreateTask()},onClickNote:function(){this.item.editNote()},onClickCollapse:function(){this.item.toggleCollapsed(this.props.pane)},onClickZoom:function(){this.item.canZoom()&&(d.a.setFocusedPane(this.props.pane),n.default.vmMain.zoomin(this.item))},onClickZoomNewPane:function(){var e=this.props.pane;if(this.item.canZoom()){var t=n.default.vmMain.paneManager.getPaneIndex(e)+1,a=e.getSaveInfo();a.item=this.item,delete a.id;var i=c.a.createPane(PaneMode.Task,a);return n.default.vmMain.paneManager.addPaneAtIndex(i,t),d.a.setFocusedPane(i),i.onAdded(),!1}},onClickGoto:function(){n.default.scrollToAndHighlightItem(this.item,this.props.pane)},onClickArchive:function(){var e=this.props.pane;if(e.isWriteable)if(this.hasSelection)e.archiveSelected(!0);else{var t=this.props.item;t.parent().archiveChild(t,ChangeType.Local)}},onClickUnarchive:function(){n.default.focusedPane.runUnarchive(this.item)},onClickDelete:function(){var e=this.item,t=this.props.pane;if(e.isNote()){var a=d.a.getStartIndex(),i=e.parent();e.parent().setNote(void 0,ChangeType.Local),d.a.selectIndex(a-1,i.getParsedText().length)}else if(t.isWriteable)if(t.isViewDates()&&!e.hasAttachmentType(r.a.PluginType.Calendar)&&e.hasChildren()){n.default.menus.options("The item you are deleting has children.",["Remove Date","Delete All"],function(t){if("Remove Date"===t){var a=e.getParsedText().replace(e.getItemDateString(),"");e.setText(a,!0,ChangeType.Local)}else"Delete All"===t&&e.deleteSelf(ChangeType.Local)}.bind(this))}else this.hasSelection?t.deleteSelected():this.props.item.deleteSelf(ChangeType.Local)},onClickAddCalendar:function(){var e=n.default.vmMain.getDefaultCalendarPlugin(),t=this.item;e&&(e.createEventForItem(t),t.itemChanged.notify())},onClickDeleteCalendar:function(){var e=this.item,t=this.props.pane;if(e.hasAttachmentType(r.a.PluginType.Calendar)){var a=e.getAttachmentByPlugin(PluginID.GCalendar);try{n.default.PAssert(1970,a,"Must be able to get a valid attachment")}catch(e){n.default.reportError(e)}try{n.default.PAssert(1971,this.item,"Must have a valid item")}catch(e){n.default.reportError(e)}var i=a.getPlugin();i.hasWritePermissionForAttach(a)?(d.a.reset(),i.deleteCalendarEventForItem(this.item,a,n.default.emptyFn,n.default.emptyFn,function(e,a,i,r){a?t.updateItems():n.default.toasts.pushMessage({text:"There was an error removing the event from your Google Calendar.",action:MessageAction.Okay})})):n.default.toasts.pushMessage(MessageID.ReadOnlyCalendar)}},onClickReply:function(){this.hasSelection?this.props.pane.replySelected():this.props.pane.openEmailByItem(this.item,r.a.EmailResponseMode.Reply)},onClickReplyAll:function(){this.hasSelection?this.props.pane.replyAllSelected():this.props.pane.openEmailByItem(this.item,r.a.EmailResponseMode.ReplyAll)},onClickForward:function(){this.hasSelection?this.props.pane.forwardSelected():this.props.pane.openEmailByItem(this.item,r.a.EmailResponseMode.Forward)},onClickRead:function(){var e=this.item,t=e.getAttachmentByType(r.a.PluginType.Email),a=t.getPlugin(),n=a.isItemUnread(e);this.hasSelection?this.props.pane.markReadSelected(n):n?a.performAction(r.a.PluginAction.Gmail.MarkRead,t):a.performAction(r.a.PluginAction.Gmail.MarkUnread,t)},onClickStarGmail:function(){if(this.hasSelection)this.props.pane.toggleStarSelected();else{var e=this.item.getAttachmentByType(r.a.PluginType.Email),t=e.getPlugin();t.isItemStarred(this.item)?t.performAction(r.a.PluginAction.Gmail.Unstar,e):t.performAction(r.a.PluginAction.Gmail.Star,e)}},onClickSnooze:function(){this.props.pane.autocompleteSnooze()},onClickLabel:function(){this.props.pane.autocompleteLabel()},onClickSchedule:function(){this.props.pane.autocompleteSchedule()},onClickArchiveGmail:function(){var e=this.item,t=e.getAttachmentByType(r.a.PluginType.Email),a=t.getPlugin(),n=a.isItemArchived(e);"PaneGmail"===this.props.pane.type&&this.hasSelection?this.props.pane.archiveSelected(!n):n?a.performAction(r.a.PluginAction.Gmail.Unarchive,!1,t):a.performAction(r.a.PluginAction.Gmail.Archive,!1,t)},onClickDeleteGmail:function(){var e=this.item,t=e.getAttachmentByType(r.a.PluginType.Email).getPlugin(),a=t.isItemFullTrashed(e);this.hasSelection?this.props.pane.deleteSelected(t.isGmailItem,!a):t.isGmailItem(e)&&(this.onClickDeleteCalendar(),e.deleteSelf(ChangeType.Local))},onClickPrefix:function(e){n.default.vmMain.applyPrefixToSelection(e,!this.hasSelection&&this.item)},onViewInDrive:function(){var e=this.item.getAttachmentByPlugin(PluginID.Drive),t=e.getPlugin(),a=e.getData();if(a&&a.parents){var i=a.parents[0];if(i){var r=i.id,o=t.createFolderURL(r);n.default.openUrl(o)}}},renderMenuDate:function(){return s.a.createElement("span",null,s.a.createElement(g.a,{icon:"icon-calendar",hotkey:i.a.secModKeyForce+" + C",onClick:this.onClickAddCalendar},"Add to Google Calendar"))},renderMenuNote:function(){return s.a.createElement("span",null,s.a.createElement(g.a,{icon:"icon-edit",hotkey:"Shift + Enter",onClick:this.onClickNote},"Edit"),s.a.createElement(g.a,{icon:"icon-delete",onClick:this.onClickDelete},"Delete"))},renderMenuDefault:function(){var e,t=this.props.pane,a=this.item,o=this.mod,l=this.priMod,c=t.isViewDates(),d=!t.isViewCalendar(),u=t.supportIndent&&!a.isNote()&&0!==a.getIndex()&&!t.search.isFlatSearchResult(a),h=t.supportIndent&&!a.isNote()&&a.parent()!==n.default.focusedItem&&!(t.search.isFlatSearchResult(a)||t.search.isFlatSearchResult(a.parent()));if(n.default.vmMain.getDefaultCalendarPlugin()&&a.date())if(a.hasAttachmentType(r.a.PluginType.Calendar)){var f=a.getAttachmentByType(r.a.PluginType.Calendar);e=s.a.createElement(g.a,{icon:"icon-delete",disabled:!f.getPlugin().hasWritePermissionForAttach(f),onClick:this.onClickDeleteCalendar},"Delete Event")}else e=s.a.createElement(g.a,{icon:"icon-calendar",hotkey:d&&i.a.secModKeyForce+" + C",onClick:this.onClickAddCalendar},"Add to Google Calendar");return s.a.createElement(s.a.Fragment,null,s.a.createElement(g.a,{icon:"icon-check",hotkey:d&&o+" + /",onClick:this.onClickComplete},a.isComplete()?"Uncomplete":"Complete"),s.a.createElement(g.a,{icon:"icon-zoom-in",hotkey:d&&l+" + Enter",onClick:this.onClickZoom},"Zoom In"),s.a.createElement(g.a,{icon:"icon-star",hotkey:d&&o+" + 8",onClick:this.onClickStar},a.isStarred()?"Unstar":"Star"),s.a.createElement(p.a,{hotkey:d&&o+" + #"},"Priority"),s.a.createElement("div",{className:"horizontalMenu"},s.a.createElement(m.a,{className:"c-border-heavy",id:"itemPriorityNone",width:24,height:24,tooltip:d&&o+" + 0",onClick:this.onClickPriority.bind(this,VMLIFlag.None)}),s.a.createElement(m.a,{className:"c-border-heavy",id:"itemPriorityLow",width:24,height:24,tooltip:d&&o+" + 3",onClick:this.onClickPriority.bind(this,VMLIFlag.P2)}),s.a.createElement(m.a,{className:"c-border-heavy",id:"itemPriorityMed",width:24,height:24,tooltip:d&&o+" + 2",onClick:this.onClickPriority.bind(this,VMLIFlag.P1)}),s.a.createElement(m.a,{className:"c-border-heavy",id:"itemPriorityHigh",width:24,height:24,tooltip:d&&o+" + 1",onClick:this.onClickPriority.bind(this,VMLIFlag.P0)})),s.a.createElement(p.a,null,"Item Type"),s.a.createElement("div",{className:"horizontalMenu"},s.a.createElement(m.a,{className:"c-border-heavy",iconSize:14,width:24,height:24,tooltip:"None",onClick:this.onClickPrefix.bind(this,null)}),s.a.createElement(m.a,{className:"c-border-heavy",icon:"icon-hash",iconSize:16,width:24,height:24,tooltip:"Project",onClick:this.onClickPrefix.bind(this,r.a.Prefix.Header)}),s.a.createElement(m.a,{className:"c-border-heavy",icon:"icon-check",iconSize:15,width:24,height:24,tooltip:"Task",onClick:this.onClickPrefix.bind(this,r.a.Prefix.Task)}),s.a.createElement(m.a,{className:"c-border-heavy",icon:"icon-bullet",iconSize:28,width:24,height:24,tooltip:"Bullet",onClick:this.onClickPrefix.bind(this,r.a.Prefix.Bullet)}),s.a.createElement(m.a,{className:"c-border-heavy",icon:"icon-numlist",iconSize:13,width:24,height:24,tooltip:"Numbered List",onClick:this.onClickPrefix.bind(this,r.a.Prefix.NumList)})),e&&s.a.createElement("hr",null),e,s.a.createElement("hr",null),u&&s.a.createElement(g.a,{icon:"icon-format_indent_increase",hotkey:"Tab",onClick:this.onClickIndent.bind(this,!1)},"Indent"),h&&s.a.createElement(g.a,{icon:"icon-format_indent_decrease",hotkey:"Shift + Tab",onClick:this.onClickIndent.bind(this,!0)},"Unindent"),!c&&s.a.createElement(g.a,{icon:"icon-align-left",hotkey:i.a.secModKeyForce+" + M",onClick:this.onClickMove},"Move"),s.a.createElement("hr",null),!c&&s.a.createElement(g.a,{icon:"icon-sticky-note-o",hotkey:"Shift + Enter",onClick:this.onClickNote},"Add Note"),s.a.createElement(g.a,{icon:"icon-zoom-in-plus",onClick:this.onClickZoomNewPane},"Open in New Pane"),s.a.createElement(g.a,{icon:"icon-keyboard-tab",hotkey:d&&o+" + G",onClick:this.onClickGoto},"Go to in all panes"),s.a.createElement("hr",null),s.a.createElement(g.a,{icon:"icon-task",onClick:this.onClickArchive},"Archive Item"),s.a.createElement(g.a,{icon:"icon-delete",onClick:this.onClickDelete},"Delete"))},renderMenuArchived:function(){return s.a.createElement(s.a.Fragment,null,s.a.createElement(g.a,{icon:"icon-task",onClick:this.onClickUnarchive},"Unarchive"),s.a.createElement(g.a,{icon:"icon-delete",onClick:this.onClickDelete},"Delete"))},renderMenuDrive:function(){var e=this.props.pane,t=this.item,a=t.isCollapsed(e,!1),n=e.supportCollapsing&&(t.isHeader()||t.hasChildren()),i=t.isHeader()||t.hasChildren();return s.a.createElement(s.a.Fragment,null,e.plugin&&s.a.createElement(g.a,{disabled:!n,icon:a?"icon-add":"icon-minus",hotkey:this.mod+" + ,",onClick:this.onClickCollapse},a?"Uncollapse":"Collapse"),e.plugin&&s.a.createElement(g.a,{disabled:!i,icon:"icon-zoom-in",hotkey:this.priMod+" + Enter",onClick:this.onClickZoom},"Zoom In"),s.a.createElement(g.a,{onClick:this.onViewInDrive},"View in Drive"),!e.plugin&&s.a.createElement("hr",null))},renderMenuGCalendar:function(e){return e.getPlugin().hasWritePermissionForAttach(e)?s.a.createElement(s.a.Fragment,null,s.a.createElement(g.a,{icon:"icon-check",onClick:this.onClickComplete},e.getField("isComplete")?"Uncomplete":"Complete"),s.a.createElement(g.a,{icon:"icon-task",onClick:this.onClickArchive},e.getField("isArchived")?"Unarchive":"Archive"),s.a.createElement("hr",null),s.a.createElement(g.a,{className:"mat-subheader"},"Priority"),s.a.createElement("div",{id:"contextMenuPriority",className:"horizontalMenu"},s.a.createElement(m.a,{className:"c-border-heavy",id:"itemPriorityNone",onClick:this.onClickPriority.bind(this,VMLIFlag.None)}),s.a.createElement(m.a,{className:"c-border-heavy",id:"itemPriorityLow",onClick:this.onClickPriority.bind(this,VMLIFlag.P2)}),s.a.createElement(m.a,{className:"c-border-heavy",id:"itemPriorityMed",onClick:this.onClickPriority.bind(this,VMLIFlag.P1)}),s.a.createElement(m.a,{className:"c-border-heavy",id:"itemPriorityHigh",onClick:this.onClickPriority.bind(this,VMLIFlag.P0)})),s.a.createElement("hr",null),s.a.createElement(g.a,{icon:"icon-delete",onClick:this.onClickDeleteCalendar},"Delete Event")):s.a.createElement(s.a.Fragment,null,s.a.createElement(g.a,{icon:"icon-warning"},"Read-Only Event"))},renderMenuGmail:function(e){var t=this.item,a=this.mod,n="PaneGmail"===this.props.pane.type,i=e.getPlugin(),r=i.isItemUnread(t),o=i.isItemStarred(t),l=i.isItemArchived(t),c=i.isItemFullTrashed(t),d=u.a.isLinkedAccountAuthorized(e.getField("accountID"),GScope.GmailModify),h=s.a.createElement(s.a.Fragment,null,s.a.createElement(g.a,{icon:"icon-reply",hotkey:n&&"R",onClick:this.onClickReply},"Reply"),s.a.createElement(g.a,{icon:"icon-reply-all",hotkey:n&&"Shift + R",onClick:this.onClickReplyAll},"Reply All"),s.a.createElement(g.a,{icon:"icon-forward",hotkey:n&&"F",onClick:this.onClickForward},"Forward"),s.a.createElement("hr",null));return s.a.createElement(s.a.Fragment,null,h,n&&s.a.createElement(s.a.Fragment,null,s.a.createElement(g.a,{icon:r?"icon-drafts":"icon-unread",iconSize:14,hotkey:r?"":"U",onClick:this.onClickRead},r?"Mark as read":"Mark as unread"),s.a.createElement(g.a,{icon:"icon-star",hotkey:n?"8":a+" + 8",onClick:this.onClickStarGmail},o?"Unstar":"Star"),s.a.createElement("hr",null),s.a.createElement(g.a,{className:"mat-subheader",hotkey:a+" + #"},"Priority"),s.a.createElement("div",{id:"contextMenuPriority",className:"horizontalMenu"},s.a.createElement(m.a,{className:"c-border-heavy",id:"itemPriorityNone",onClick:this.onClickPriority.bind(this,VMLIFlag.None)}),s.a.createElement(m.a,{className:"c-border-heavy",id:"itemPriorityLow",onClick:this.onClickPriority.bind(this,VMLIFlag.P2)}),s.a.createElement(m.a,{className:"c-border-heavy",id:"itemPriorityMed",onClick:this.onClickPriority.bind(this,VMLIFlag.P1)}),s.a.createElement(m.a,{className:"c-border-heavy",id:"itemPriorityHigh",onClick:this.onClickPriority.bind(this,VMLIFlag.P0)})),s.a.createElement("hr",null),s.a.createElement(g.a,{disabled:!d,icon:"icon-access_time",hotkey:"D",onClick:this.onClickSnooze},"Snooze"),s.a.createElement(g.a,{icon:"icon-tag",hotkey:n&&"L",onClick:this.onClickLabel},"Label"),s.a.createElement(g.a,{icon:"icon-check",hotkey:"T",onClick:this.onClickCreateTask},"Create Task"),s.a.createElement(g.a,{icon:"icon-align-left",hotkey:"M",onClick:this.onClickMove},"Add to Outline"),s.a.createElement(g.a,{icon:"icon-calendar",hotkey:"C",onClick:this.onClickSchedule},"Add To Calendar"),s.a.createElement("hr",null),s.a.createElement(g.a,{disabled:c,icon:"icon-task",hotkey:"E",onClick:this.onClickArchiveGmail},l?"Unarchive":"Archive"),s.a.createElement(g.a,{disabled:c,icon:"icon-delete",hotkey:n&&"Backspace",onClick:this.onClickDeleteGmail},c?"Undelete":"Delete")))},render:function(){var e,t,a=this.props,i=a.pane,o=this.item,l=a.element,c=n.default.getPluginForElement(l);if(c){var d=c.getAttribute("plugin");if(o.hasPluginAttachment(d))switch(d){case PluginID.Drive:t=this.renderMenuDrive();break;case PluginID.GCalendar:t=this.renderMenuGCalendar(o.getAttachmentByPlugin(d));break;case PluginID.Gmail:t=this.renderMenuGmail(o.getAttachmentByPlugin(d))}i.plugin||(e=t,t=void 0)}else if(n.default.hasClass(l,"date")){n.default.vmMain.getDefaultCalendarPlugin()&&(t=o.hasAttachmentType(r.a.PluginType.Calendar)?this.renderMenuGCalendar(o.getAttachmentByPlugin(PluginID.GCalendar)):this.renderMenuDate())}else o.isNote()&&(t=this.renderMenuNote());if(!t){var u=i.getContextMenuMode(o);switch(u){case r.a.ContextMenuMode.Default:t=this.renderMenuDefault();break;case r.a.ContextMenuMode.Archived:t=this.renderMenuArchived();break;case r.a.ContextMenuMode.Gmail:t=this.renderMenuGmail(o.getAttachmentByPlugin(PluginID.Gmail));break;case r.a.ContextMenuMode.Calendar:t=this.renderMenuGCalendar(o.getAttachmentByPlugin(PluginID.GCalendar));break;default:try{n.default.PAssert(1972,!1,"Unknown context menu mdoe: "+u)}catch(e){n.default.reportError(e)}}}return s.a.createElement(h.a,{id:"contextMenuItem",element:a.element,supportArrows:!0,pos:a.pos,noBackdrop:a.noBackdrop},e,t)}});t.default=f},function(e,t,a){"use strict";a.r(t);var n=a(0),i=a(1),r=a(2),o=a.n(r),s=a(12),l=a(18),c=a(31),d=s.a.createClass({displayName:"ReactContextMenuEmailDetails",componentDisplay:i.a.ComponentDisplay.Desktop,_generateParticipantTextExpanded:function(e){return e.text?o.a.createElement("span",null,o.a.createElement("b",null,e.text)," <"+e.email+">"):e.email},renderLabels:function(){for(var e=n.default.vmMain.getDefaultEmailPlugin(),t=this.props.accountID,a=this.props.message.labelIds,i=[],r=0;r<a.length;r++){var s=e._getLabelByID(t,a[r]);i.push(o.a.createElement("div",{key:r},s.getName()))}return this.renderLine("labels",i)},renderParticipants:function(e){var t=this.props.message[e].map(function(e,t){return o.a.createElement("div",{key:t},this._generateParticipantTextExpanded(e))}.bind(this));return this.renderLine(e,t)},renderLine:function(e,t){return o.a.createElement("div",{className:"emailDetailsLine flexbox"},o.a.createElement("div",null,e+":"),o.a.createElement("span",{className:"f1"},t))},render:function(){var e=this.props.message,t=e.date,a=t.toString(l.a.getFormat(DFormat.DayMonthDateYear))+" at "+t.toString(l.a.getFormat(DFormat.ShortTime));return o.a.createElement(c.a,{key:"contextMenuEmailDetails",id:"contextMenuEmailDetails",element:this.props.element},this.renderLine("from",this._generateParticipantTextExpanded(e.from)),e.to&&this.renderParticipants("to"),e.cc&&this.renderParticipants("cc"),e.bcc&&this.renderParticipants("bcc"),this.renderLine("date",a),this.renderLine("subject",e.subject),e.labelIds&&this.renderLabels())}});t.default=d},function(e,t,a){"use strict";a.r(t);var n=a(0),i=a(1),r=(a(4),a(7)),o=a(2),s=a.n(o),l=a(12),c=a(30),d=(a(29),a(53)),u=a(14),m=a(13),h=(a(3),a(45)),p=a(10),g=a(31),f=a(28),v=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var n in a)Object.prototype.hasOwnProperty.call(a,n)&&(e[n]=a[n])}return e},E=l.a.createClass({displayName:"ReactContextMenuDropBucket",componentDisplay:i.a.ComponentDisplay.Everywhere,init:function(){this.createObservables({draggingItem:void 0})},componentDidMount:function(){m.a.listen("droppedItem",this.onItemDropped)},onUnmount:function(){m.a.unlisten("droppedItem",this.onItemDropped)},getState:function(){return{items:n.default.vmMain.dropBucket.getItems(),isDragging:u.default.isVisible}},createEvent:function(e,t){var a=n.default.findChild(t.target,"item")||n.default.findParent(t.target,"item",5);return{fromDropBucket:!0,startSrc:a,target:a,clientX:t.clientX,clientY:t.clientY,eventX:t.eventX||t.clientX,eventY:t.eventY||t.clientY,pageX:t.pageX,pageY:t.pageY,preventDefault:n.default.emptyFn,stopPropagation:n.default.emptyFn,stopImmediatePropagation:n.default.emptyFn,pane:e.pane}},onMouseDown:function(e,t){e.item},onClickItem:function(e,t){if(!n.default.hasClass(t.target,"fancyButton")){var a={mode:i.a.AutocompleteMode.Move,text:"Select item to move to",buttonText:"MOVE",elementDisplay:t.target,onSelected:function(t){r.a.beginAction();var a=e.item.clone(t.item,ChangeType.Local);t.item.insertItem(a,0),e.item.parent().removeChild(e.item,ChangeType.Local),n.default.vmMain.dropBucket.removeTextEntry(e.id),0===this.state.items.length&&n.default.menus.closeContextMenu(),r.a.endAction()}.bind(this)};c.a.showPopup(a)}},onMouseMove:function(e,t){e.item},onMouseUp:function(e,t){e.item},onCloseButton:function(e,t){e.item&&n.default.vmMain.dropBucket.hasItemEntry(e.item)&&n.default.vmMain.dropBucket.removeItemEntry(e.item),n.default.vmMain.dropBucket.hasTextEntry(e.id)&&n.default.vmMain.dropBucket.consumeTextEntry(e.id),t.stopPropagation()},onItemDropped:function(e){n.default.vmMain.dropBucket.hasItemEntry(e)&&n.default.vmMain.dropBucket.removeItemEntry(e),n.default.vmMain.dropBucket.hasTextEntry(e.id)&&n.default.vmMain.dropBucket.removeTextEntry(e.id)},_renderBucketItem:function(e,t){return e.item?s.a.createElement(h.a,{item:e.item,index:t,allowDrag:!0,inAutocomplete:!0}):s.a.createElement(d.a,null,e.text)},render:function(){for(var e=this.props,t=this.state,a=[],i=0;i<t.items.length;i++){var r=t.items[i],o=r.item,l=r.id,c={width:"100%",overflow:"hidden"},u=n.default.classNames({dragging:t.draggingItem===o});c.maxWidth="335px",a.push(s.a.createElement(f.a,{key:l,className:u,onClick:this.onClickItem.bind(this,r),clickCloses:!1,hasButtons:!0,hoverEffects:!0},s.a.createElement(d.a,{style:c,onMouseDown:this.onMouseDown.bind(this,r),onMouseMove:this.onMouseMove.bind(this,r),onMouseUp:this.onMouseUp.bind(this,r)},this._renderBucketItem(r,i)),s.a.createElement(p.a,{icon:"icon-close",width:"48px",iconSize:20,onClick:this.onCloseButton.bind(this,r)})))}return s.a.createElement(g.a,v({},e,{key:"contextMenuDropBucket",id:"contextMenuDropBucket",supportArrows:!0}),a)}});t.default=E},function(e,t,a){"use strict";a.r(t);var n=a(0),i=a(1),r=a(2),o=a.n(r),s=a(12),l=a(3),c=a(4),d=a(13),u=a(82),m=a(31),h=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var n in a)Object.prototype.hasOwnProperty.call(a,n)&&(e[n]=a[n])}return e},p=s.a.createClass({displayName:"ReactNotePopup",componentDisplay:i.a.ComponentDisplay.Everywhere,componentDidMount:function(){d.a.listen("windowResize",this.onResize)},onResize:function(){this.updateState(),setTimeout(function(){this.refs.menu.updateState()}.bind(this),300)},onUnmount:function(){var e=this.props.item;d.a.unlisten("windowResize",this.onResize),l.a.selectIndex(this.props.index-1,e.getParsedText().length)},onKeyPress:function(e){c.a.getKeyCode(e)!==KeyCode.Enter||!e.shiftKey||e.altKey||e.ctrlKey||e.metaKey||(n.default.menus.closeContextMenu(),e.preventDefault(),e.stopPropagation())},getState:function(){return{maxWidth:this.props.pane.getWidth()-20}},render:function(){var e=this.props,t=this.state.maxWidth;return o.a.createElement(m.a,h({},this.props,{key:e.note.id+"_Note",id:"contextMenuNote",width:600,maxWidth:t,bottom:!1,ref:"menu"}),o.a.createElement(u.a,{ref:"noteText",item:e.item,focused:!0,onKeyPress:this.onKeyPress,selectionStart:e.selectionStart,selectionEnd:e.selectionEnd}))}});t.default=p},function(e,t,a){"use strict";a.r(t);var n=a(0),i=a(1),r=a(2),o=a.n(r),s=a(12),l=a(83),c=a(31),d=s.a.createClass({displayName:"ReactContextMenuContactDetails",componentDisplay:i.a.ComponentDisplay.Everywhere,onClose:function(){n.default.menus.closeContextMenu("ReactContextMenuContactDetails")},render:function(){return o.a.createElement(c.a,{key:"contextMenuContactDetails",id:"contextMenuContactDetails",element:this.props.element,position:this.props.position},o.a.createElement(l.a,{contact:this.props.contact,onClose:this.onClose}))}});t.default=d},function(e,t,a){"use strict";a.r(t);var n=a(0),i=a(1),r=a(2),o=a.n(r),s=a(12),l=(a(37),a(23)),c=a(32),d=a(31),u=a(10),m=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var n in a)Object.prototype.hasOwnProperty.call(a,n)&&(e[n]=a[n])}return e},h=s.a.createClass({displayName:"ReactContextMenuInsertLink",componentDisplay:i.a.ComponentDisplay.Everywhere,init:function(){var e=this.props.text;null===new RegExp(/\S{2,}\.[^0-9.\s]{2,}\S*$/).exec(e)?this.text=e:this.link=e},getHotkeys:function(){return[l.a.create(KeyCode.Enter,!0,i.a.Primary.Either,i.a.Shift.Either,this.onClick),l.a.create(KeyCode.Escape,!0,i.a.Primary.Either,i.a.Shift.Either,this.close)]},componentDidMount:function(){var e;(e=this.link||!this.text?this.refs.text:this.refs.link).focus(),e.selectEnd()},close:function(){n.default.menus.closeContextMenu()},onClick:function(){var e=this.refs.text.getValue(),t=this.refs.link.getValue();this.close(),e&&t&&(t.startsWith("http")||(t="http://"+t),this.props.onInsertLink({text:e,url:t}))},render:function(){return o.a.createElement(d.a,m({},this.props,{key:"contextMenuInsertLink",id:"contextMenuInsertLink"}),o.a.createElement("div",{className:"flexbox"},o.a.createElement("span",null,"Text"),o.a.createElement(c.a,{className:"f1",ref:"text",height:28,width:260,value:this.text})),o.a.createElement("div",{className:"flexbox"},o.a.createElement("span",null,"Link"),o.a.createElement(c.a,{className:"f1",ref:"link",height:28,width:260,value:this.link})),o.a.createElement("div",{className:"flexbox"},o.a.createElement(u.a,{primary:!0,raised:!0,onClick:this.onClick},"INSERT")))}});t.default=h},function(e,t,a){"use strict";a.r(t);var n=a(0),i=a(1),r=a(2),o=a.n(r),s=a(12),l=a(7),c=a(10),d=a(50),u=a(31),m=a(52),h=a(28),p=s.a.createClass({displayName:"ReactContextMenuCalendars",componentDisplay:i.a.ComponentDisplay.Desktop,init:function(){this.createObservables({anyCalendarsSync:this.computeAnyCalendarsSync()}),l.a.miscAction({type:TrackerType.Misc,misc:TrackerMisc.OpenCalendarsMenu})},getState:function(){var e=this.props.pane;return{displayCalendars:e.displayCalendars,displayLocalItems:e.displayLocalItems}},getSyncCalendars:function(){return n.default.vmMain.pluginManager.getPlugin(PluginID.GCalendar).getImportCalendarList()},computeAnyCalendarsSync:function(){for(var e=this.props.pane.displayCalendars.get(),t=this.getSyncCalendars(),a=0,n=0;n<t.length;n++)!1!==e[t[n].id]&&a++;return a>0},onChangeDisplayCalendar:function(e,t){this.props.pane.setDisplayCalendar(e,t),this.anyCalendarsSync.set(this.computeAnyCalendarsSync())},onChangeDisplayLocal:function(e){this.props.pane.setDisplayLocal(e)},onChangeAllCalendars:function(e){for(var t=this.props.pane,a=this.getSyncCalendars(),n=this.state.displayCalendars,i=0;i<a.length;i++){var r=a[i];n[r.id]!==e&&t.setDisplayCalendar(r,e)}},onClickAdd:function(){n.default.menus.closeContextMenu(),n.default.menus.openSettings(i.a.SettingsSections.GoogleCalendar)},render:function(){var e=this.state,t=this.props,a=n.default.vmMain.pluginManager.getPlugin(PluginID.GCalendar),i=this.getSyncCalendars(),r=e.displayCalendars;return o.a.createElement(u.a,{key:"contextMenuSelectCalendars",id:"contextMenuSelectCalendars",element:t.element},o.a.createElement(h.a,null,o.a.createElement(d.a,{checked:e.displayLocalItems,onChange:this.onChangeDisplayLocal},"Display local events")),o.a.createElement(m.a,null,o.a.createElement(d.a,{checked:e.anyCalendarsSync,onChange:this.onChangeAllCalendars,size:14},"Google Calendars")),i&&i.map(function(e){var t=a.getCalendarBackgroundColor(e.id);return o.a.createElement(h.a,{key:e.id},o.a.createElement(d.a,{checked:!1!==r[e.id],checkedColor:t,onChange:this.onChangeDisplayCalendar.bind(this,e)},e.summary||e.id))}.bind(this)),(!i||0===i.length)&&o.a.createElement("div",{className:"center",style:{marginTop:8}},o.a.createElement(c.a,{raised:!0,primary:!0,onClick:this.onClickAdd},"ADD CALENDARS")))}});t.default=p},function(e,t,a){"use strict";a.r(t);var n=a(0),i=a(1),r=a(2),o=a.n(r),s=a(12),l=a(31),c=a(28),d=(a(52),s.a.createClass({displayName:"ReactContextMenuAddItem",componentDisplay:i.a.ComponentDisplay.Desktop,onClickPrefix:function(e){n.default.vmMain.applyPrefixToSelection(e,this.props.item)},onClickHR:function(){this.props.item.setText("---",!0,ChangeType.Local)},render:function(){return o.a.createElement(l.a,{key:"contextMenuAddItem",id:"contextMenuAddItem",element:this.props.element},o.a.createElement(c.a,{icon:"icon-hash",hotkey:i.a.Prefix.Header+" Space",onClick:this.onClickPrefix.bind(this,i.a.Prefix.Header)},"Project"),o.a.createElement(c.a,{icon:"icon-check",hotkey:i.a.Prefix.Task+" Space",onClick:this.onClickPrefix.bind(this,i.a.Prefix.Task)},"Task"),o.a.createElement(c.a,{icon:"icon-bullet",hotkey:i.a.Prefix.Bullet+" Space",onClick:this.onClickPrefix.bind(this,i.a.Prefix.Bullet)},"Bullet"),o.a.createElement(c.a,{icon:"icon-numlist",hotkey:i.a.Prefix.NumList+" Space",iconSize:14,onClick:this.onClickPrefix.bind(this,i.a.Prefix.NumList)},"Numbered List"),o.a.createElement(c.a,{icon:"icon-hr",hotkey:"---",iconSize:14,onClick:this.onClickHR},"Horizontal Line"))}}));t.default=d},function(e,t,a){"use strict";a.r(t);var n=a(0),i=a(1),r=a(2),o=a.n(r),s=a(12),l=a(31),c=a(28),d=a(52),u=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var n in a)Object.prototype.hasOwnProperty.call(a,n)&&(e[n]=a[n])}return e},m=s.a.createClass({displayName:"ReactContextMenuSelectGmailAccount",componentDisplay:i.a.ComponentDisplay.Everywhere,addPane:function(e){this.props.onSelected(e)},render:function(){var e=this,t=this.props,a=n.default.vmMain.pluginManager.getPlugin(PluginID.Gmail),i=a.getSyncAccounts();return o.a.createElement(l.a,u({},t,{key:"contextMenuTitle",id:"contextMenuTitle",maxHeight:400}),t.showHeader&&o.a.createElement(d.a,{topHeader:!0},"Open Gmail Account"),i.map(function(t){var n=a.getDefaultDisplayItem(t);return o.a.createElement(c.a,{key:t,onClick:e.addPane.bind(e,n)},t)}))}});t.default=m},function(e,t,a){"use strict";a.r(t);var n=a(0),i=a(1),r=(a(4),a(2)),o=a.n(r),s=a(12),l=a(23),c=a(26),d=a(10),u=a(31),m=a(52),h=a(32),p=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var n in a)Object.prototype.hasOwnProperty.call(a,n)&&(e[n]=a[n])}return e};var g=s.a.createClass({displayName:"ReactContextMenuNameBoard",componentDisplay:i.a.ComponentDisplay.Desktop,getHotkeys:function(){return[l.a.create(KeyCode.Escape,!0,i.a.Primary.Either,i.a.Shift.Either,this.onClickCancel),l.a.create(KeyCode.Enter,!0,i.a.Primary.Either,i.a.Shift.Either,this.onClickSave)]},onClickSave:function(){var e=this.refs.input.getValue();!this.props.workspace?n.default.menus.closeContextMenu("ReactContextMenuNameBoard",e):c.a.renameWorkspace(this.props.workspace,e)?(n.default.tooltip.hideTip(),n.default.menus.closeContextMenu("ReactContextMenuNameBoard"),this.updateState()):n.default.tooltip.displayTip({text:"Please give this board a unique name.",element:this.refs.menu})},onClickCancel:function(){n.default.menus.closeContextMenu("ReactContextMenuNameBoard",!1)},render:function(){var e=this.props,t=e.workspace,a=function(e,t){var a={};for(var n in e)t.indexOf(n)>=0||Object.prototype.hasOwnProperty.call(e,n)&&(a[n]=e[n]);return a}(e,["workspace"]),n=(t?"Rename":"Name new")+" board";return o.a.createElement(u.a,p({},a,{key:"contextMenuEditBoard",id:"contextMenuEditBoard",width:400}),o.a.createElement(m.a,{padding:0,border:!1},n),o.a.createElement(h.a,{value:t?this.props.workspace.name:"",focused:!0,ref:"input"}),o.a.createElement("div",{className:"fancyModalButtons center"},o.a.createElement(d.a,{primary:!0,width:100,onClick:this.onClickSave},"SAVE"),o.a.createElement(d.a,{width:100,onClick:this.onClickCancel},"CANCEL")))}});t.default=g},function(e,t,a){"use strict";a.r(t);var n=a(0),i=a(1),r=a(2),o=a.n(r),s=a(12),l=a(30),c=a(37),d=a(67),u=a(80),m=a(10),h=a(31),p=a(52),g=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var n in a)Object.prototype.hasOwnProperty.call(a,n)&&(e[n]=a[n])}return e},f=i.a.TaskSortMode,v=s.a.createClass({displayName:"ReactContextMenuSearch",componentDisplay:i.a.ComponentDisplay.Desktop,getState:function(){var e=this.props.pane,t=e.search,a={hasFilter:!1,matches:l.a.matches,showHelp:n.default.vmMain.shouldShowHelp("searchHelp"),viewState:e.viewState,viewMode:e.getViewMode(),sortModeBlocks:e.supportsSortBlocks()&&e.getSortModeBlocks(),sortModeItems:e.supportsSortItems()&&e.getSortModeItems()};e.isViewDates()&&(a.calendars=c.a.GCalendarsAvailable,a.displayCalendars=e.displayCalendars,a.displayLocalItems=e.displayLocalItems);for(var i=0;i<t.filters.length;i++){var r=t.filters[i];a[r.name]=r.value,a[r.name+"Enabled"]=r.enabled,0!==r.value.get()&&(a.hasFilter=!0)}return a},componentDidMount:function(){this.listenTo(this.props.pane.search.onChanged),n.default.settings.listen("settingChanged",Settings.DefaultGroup,Settings.closedHelps,this.updateState)},onUnmount:function(){n.default.settings.unlisten("settingChanged",Settings.DefaultGroup,Settings.closedHelps,this.updateState)},onClickSelectCalendars:function(e){n.default.menus.openContextMenu({componentName:"ReactContextMenuCalendars",element:e.target,pane:this.props.pane})},saveScrollOfTop:function(){this.props.pane.getInfiniteList().saveScrollOfTop(!0)},onToggleButton:function(e){this.saveScrollOfTop(),this.props.pane.search.toggleFilter(e)},setPriority:function(e){this.saveScrollOfTop();var t=this.props.pane.search;t.getFilterValue("priority")===e&&(e=0),t.setFilter("priority",e)},onClickCloseHelp:function(){n.default.vmMain.closeHelp("searchHelp")},onClickShowHelp:function(){n.default.vmMain.uncloseHelp("searchHelp")},setSortMode:function(e,t){this.props.pane["setSortMode"+(e?"Blocks":"Items")](t)},renderSortMode:function(e,t){if(!e||this.props.pane.supportsSortBlocksMode(t)){var a=n.default.classNames("c-border-light",{selected:t===this.state["sortMode"+(e?"Blocks":"Items")]});return o.a.createElement(m.a,{className:a,height:i.a.SearchHeight,onClick:this.setSortMode.bind(this,e,t)},i.a.TaskSortModeText[t])}},renderSearchButton:function(e){var t=this.props.pane;return o.a.createElement(d.a,{key:e.name,filter:e,filterValue:e.value.get(),search:t.search,hasBorder:!0})},renderSearchPriority:function(){var e=this.props.pane.search.filter_priority.value.get(),t=n.default.classNames("searchPriorities",{hasSelected:!!e}),a=n.default.classNames("searchPriority searchP0",{selected:e===VMLIFlag.P0}),i=n.default.classNames("searchPriority searchP1",{selected:e===VMLIFlag.P1}),r=n.default.classNames("searchPriority searchP2",{selected:e===VMLIFlag.P2});return o.a.createElement("span",{key:"priority",className:t},o.a.createElement("span",{className:a,"data-tooltip":"Show only high priority",onClick:this.setPriority.bind(this,VMLIFlag.P0)}),o.a.createElement("span",{className:i,"data-tooltip":"Show medium priority and higher",onClick:this.setPriority.bind(this,VMLIFlag.P1)}),o.a.createElement("span",{className:r,"data-tooltip":"Show low priority and higher",onClick:this.setPriority.bind(this,VMLIFlag.P2)}))},render:function(){for(var e=this.props,t=this.props.pane,a=this.state,r=t.search,s=[],l=[],c=0;c<r.filters.length;c++){var d=r.filters[c];d.enabled.get()&&(d.isOption?l.push(this.renderSearchButton(d)):d.icon?s.push(this.renderSearchButton(d)):"priority"===d.name&&s.push(this.renderSearchPriority()))}if(t.isViewDates()){var v=t.isCalFilterActive(),E=n.default.classNames("buttonCalendars",{selected:v});l.push(o.a.createElement(m.a,{key:"calendars",height:26,className:E,onClick:this.onClickSelectCalendars,padding:8,tooltip:"Select calendars to display in this pane"},"Calendars"))}return o.a.createElement(h.a,g({},e,{key:"contextMenuSearch"+t.id,id:"contextMenuSearch",maxHeight:400,element:e.element}),o.a.createElement("div",{className:"flexbox"},s.length>0&&o.a.createElement("div",null,o.a.createElement(p.a,null,"Filters"),o.a.createElement("div",{className:"searchFilters c-border-light"},s)),l.length>0&&o.a.createElement("div",null,o.a.createElement(p.a,null,"Options"),o.a.createElement("div",{className:"searchFilters c-border-light"},l)),o.a.createElement("div",{className:"f1"}),!a.showHelp&&o.a.createElement(m.a,{className:"searchHelpButton",icon:"icon-question",iconSize:12,width:28,height:28,onClick:this.onClickShowHelp})),t.supportsSortBlocks()&&o.a.createElement("div",null,o.a.createElement(p.a,null,"Sort ",i.a.TaskViewModeTextSimple[a.viewMode]),o.a.createElement("div",{className:"searchFilters sortBlocks c-border-light"},this.renderSortMode(!0,f.None),this.renderSortMode(!0,f.Alphabetical),this.renderSortMode(!0,f.NumItems),this.renderSortMode(!0,f.Priority),this.renderSortMode(!0,f.Date),this.renderSortMode(!0,f.Created),this.renderSortMode(!0,f.Completed))),t.supportsSortItems()&&o.a.createElement("div",null,o.a.createElement(p.a,null,"Sort Items"),o.a.createElement("div",{className:"searchFilters sortBlocks c-border-light"},this.renderSortMode(!1,f.None),this.renderSortMode(!1,f.Alphabetical),this.renderSortMode(!1,f.NumItems),this.renderSortMode(!1,f.Priority),this.renderSortMode(!1,f.Date),this.renderSortMode(!1,f.Created))),(a.matches.length>0||a.showHelp)&&o.a.createElement("hr",null),a.matches.length>0&&o.a.createElement(u.default,{onlyMatches:!0,matches:a.matches,onSelected:this.onAutocompleteSelected}),a.showHelp&&0===a.matches.length&&o.a.createElement("div",{className:"rel"},o.a.createElement(p.a,null,"Hints"),o.a.createElement(m.a,{className:"searchHintsClose",icon:"icon-close",iconSize:12,width:28,height:28,onClick:this.onClickCloseHelp}),o.a.createElement("div",{className:"searchHints c-foreground-light"},o.a.createElement("div",null,o.a.createElement("b",null,"-word")," hide items including word"),o.a.createElement("div",null,o.a.createElement("b",null,"#tag")," show items with #tag"),o.a.createElement("div",null,o.a.createElement("b",null,"+name")," show items with +name"),o.a.createElement("div",null,o.a.createElement("b",null,"@date")," show items on date"),o.a.createElement("div",null,o.a.createElement("span",null,o.a.createElement("b",null,"@overdue")),o.a.createElement("span",null,"before:",o.a.createElement("b",null,"@date")),o.a.createElement("span",null,"after:",o.a.createElement("b",null,"@date"))))))}});t.default=v},function(e,t,a){"use strict";a.r(t);a(0);var n=a(1),i=a(2),r=a.n(i),o=a(12),s=a(31),l=a(28),c=a(52),d=o.a.createClass({displayName:"ReactContextMenuGmailSort",componentDisplay:n.a.ComponentDisplay.Desktop,setViewMode:function(e){this.props.onSelected(e)},render:function(){this.props.pane;return r.a.createElement(s.a,{key:"contextMenuGmailSort",id:"contextMenuGmailSort",element:this.props.element},r.a.createElement(c.a,null,"Sort by"),r.a.createElement(l.a,{icon:"icon-access_time",onClick:this.setViewMode.bind(this,n.a.GmailViewMode.Date)},n.a.GmailViewMode.Date),r.a.createElement(l.a,{icon:"icon-exclamation",onClick:this.setViewMode.bind(this,n.a.GmailViewMode.Priority)},n.a.GmailViewMode.Priority))}});t.default=d},function(e,t,a){"use strict";a.r(t);var n=a(0),i=a(1),r=a(2),o=a.n(r),s=a(12),l=a(3),c=a(31),d=a(28),u=s.a.createClass({displayName:"ReactContextMenuOverviewOptions",componentDisplay:i.a.ComponentDisplay.Desktop,onClickScroll:function(){var e=this.props;e.pane.overview.scrollItemIntoView(e.item)},onClickAddSubproject:function(){var e=this.props;n.default.vmMain.zoomin(e.item),e.pane.addProject()},onClickZoom:function(){this.props.item.canZoom()&&(l.a.setFocusedPane(this.props.pane),n.default.vmMain.zoomin(this.props.item))},render:function(){this.props.pane;return o.a.createElement(c.a,{key:"contextMenuGmailSort",id:"contextMenuGmailSort",element:this.props.element},o.a.createElement(d.a,{icon:"icon-unfold_less",onClick:this.onClickScroll},"Scroll to item in pane"),o.a.createElement(d.a,{icon:"icon-add",onClick:this.onClickAddSubproject},"Add subproject"),o.a.createElement(d.a,{icon:"icon-zoom-in",onClick:this.onClickZoom},"Zoom In"))}});t.default=u},function(e,t,a){"use strict";a.r(t);var n=a(0),i=a(1),r=a(2),o=a.n(r),s=a(12),l=a(10),c=a(32),d=a(75),u=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var n in a)Object.prototype.hasOwnProperty.call(a,n)&&(e[n]=a[n])}return e},m=s.a.createClass({displayName:"ReactModalEnterCode",componentDisplay:i.a.ComponentDisplay.Desktop,componentDidMount:function(){this.refs.code.focus()},onClickConfirm:function(){n.default.billingManager.redeemCode(this.refs.code.getValue()),this.refs.modal.close()},onClickCancel:function(){this.refs.modal.close()},render:function(){return o.a.createElement(d.a,u({},this.props,{id:"modalEnterCode",title:"Redeem Code",width:325,scrollable:!1,modalID:Modals.EnterCode,ref:"modal"}),o.a.createElement("div",{key:"content"},o.a.createElement("div",{className:"fancyModalText"},"Enter your code below to redeem"),o.a.createElement(c.a,{ref:"code"})),o.a.createElement("div",{key:"buttons",style:{textAlign:"right"}},o.a.createElement(l.a,{width:100,onClick:this.onClickCancel},"CANCEL"),o.a.createElement(l.a,{primary:!0,width:100,onClick:this.onClickConfirm},"CONFIRM")))}});t.default=m},function(e,t,a){"use strict";a.r(t);var n=a(2),i=a.n(n),r=a(1),o=a(0),s=a(12),l=(a(20),a(10)),c=a(50),d=a(76),u=a(75),m=s.a.createClass({displayName:"ReactModalFeedback",componentDisplay:r.a.ComponentDisplay.Everywhere,onClickUV:function(e){o.default.openUrl("https://feedback.moo.do/",e),o.default.sendEvent("Menu","FeedbackUserVoice")},onClickTwitter:function(e){o.default.openUrl("https://www.twitter.com/MooDoApp",e),o.default.sendEvent("Menu","FeedbackTwitter")},onClickFacebook:function(e){o.default.openUrl("https://www.facebook.com/MooDoApp",e),o.default.sendEvent("Menu","FeedbackFacebook")},onClickGooglePlus:function(e){o.default.openUrl("https://www.google.com/+MooDoApp",e),o.default.sendEvent("Menu","FeedbackGoogle")},onClickCancel:function(e){o.default.menus.closeModalNew(Modals.ReportBug)},onClickSend:function(e){var t=this.refs.description.getValue();if(t&&t.length>2){var a="Moo.do Feedback";if(this.refs.share.getValue()){var n=o.default.vmMain.docManager.getOpenDoc();if(n){a+=" [DocShared]",t+="\r\n\r\nShared Document - "+n.id;o.default.vmMain.remoteAPI().drivePermissionsInsert(n.id,"debug@moo.do",!1,o.default.emptyFn,function(){o.default.reportError(new Error("Unable to share doc with debug account"))})}}o.default.sendFeedback(a,t),o.default.menus.closeModalNew(Modals.ReportBug),o.default.toasts.pushMessage({text:"Thanks for taking the time to send us feedback!"}),o.default.sendEvent("Menu","SendFeedback")}},render:function(){return i.a.createElement(u.a,{id:"reportBug",modalID:Modals.ReportBug,ref:"modal",title:"Contact Support",width:650,height:650},i.a.createElement("div",{key:"content"},i.a.createElement("div",{className:"c-foreground-light"},"If you're requesting a feature, it's often easier to vote it up (or add it) on our UserVoice page."),i.a.createElement("div",{className:"center"},i.a.createElement(l.a,{className:"mc",primary:!0,onClick:this.onClickUV},"Open UserVoice")),i.a.createElement("br",null),i.a.createElement("div",{className:"c-foreground-light"},"Or talk to us on your favorite social network."),i.a.createElement("div",{className:"flexbox flex-center"},i.a.createElement(l.a,{width:50,height:50,icon:"icon-twitter",tooltip:"@MooDoApp",onClick:this.onClickTwitter}),i.a.createElement(l.a,{width:50,height:50,marginLeft:16,icon:"icon-facebook",tooltip:"MooDoApp",onClick:this.onClickFacebook}),i.a.createElement(l.a,{width:50,height:50,marginLeft:16,icon:"icon-google-plus",tooltip:"+MooDoApp",onClick:this.onClickGooglePlus})),i.a.createElement("div",{className:"mat-subheader c-foreground-light"},"Or send us a message directly."),i.a.createElement(d.a,{focused:!0,id:"bugDescription",height:200,ref:"description",margin:0}),i.a.createElement("div",{className:"mt8 c-foreground-light"},"Some error reports may be helped by sharing your file with us. We can diagnose issues in your particular file. Please only share your file with us if we have asked."),i.a.createElement("br",null),i.a.createElement(c.a,{ref:"share"},"Share file with developers")),i.a.createElement("div",{key:"buttons"},i.a.createElement(l.a,{raised:!0,onClick:this.onClickCancel},"CANCEL"),i.a.createElement(l.a,{raised:!0,primary:!0,marginLeft:16,onClick:this.onClickSend},"SEND")))}});t.default=m},function(e,t,a){"use strict";a.r(t);var n=a(2),i=a.n(n),r=a(1),o=a(0),s=a(12),l=a(15),c=a(32),d=a(10),u=a(75),m=s.a.createClass({displayName:"ReactModalSharing",componentDisplay:r.a.ComponentDisplay.Everywhere,init:function(){var e=this.props.doc;this.helpID="NewFile",this.createObservables({isLoading:e.hasDriveBacking(),permissions:[],errorName:!1,errorInvite:!1}),this.isCreating=!e.hasDriveBacking(),this.isSaving=!1,this.permissionsRemove=[],o.default.settings.listen("settingChanged",Settings.DefaultGroup,Settings.closedHelps,this.updateState),e.hasDriveBacking()&&e.listPermissions(this.onListPermissions)},getState:function(){return{titleText:"Modal title",shouldShowHelp:o.default.vmMain.shouldShowHelp(this.helpID)}},onUnmount:function(){o.default.settings.unlisten("settingChanged",Settings.DefaultGroup,Settings.closedHelps,this.updateState)},onClosing:function(e){this.closeCallback&&(this.closeCallback(e),this.closeCallback=void 0)},onListPermissions:function(e){if(e){for(var t=[],a=0;a<e.length;++a){var n=e[a];n.emailAddress!==o.default.getUserIdentifier()&&(n.onRemove=this.onClickRemovePermission.bind(this,n),"anyone"!==n.id&&(n.emailAddress||("owner"===n.role?n.emailAddress="Owner":n.emailAddress=""),"owner"===n.role?t.splice(0,0,n):t.push(n)),n.emailDisplay="("+n.emailAddress+")")}this.permissions.set(t,!1),this.isLoading.set(!1)}},onClickRemovePermission:function(e){this.permissionsRemove.push(e),this.permissions.remove(e),o.default.sendEvent("Menu","SharingRemoveUser")},onClickGotIt:function(){o.default.vmMain.closeHelp(this.helpID)},onClickDelete:function(){o.default.sendEvent("Menu","SharingDelete");var e=this.props.doc;o.default.menus.confirm("Are you sure you want to delete the file?",function(t){o.default.vmMain.docManager.deleteDoc(e.id,function(e){log("File Delete Response: ",e),e||o.default.toasts.pushMessage({text:"Unable to delete file on the remote server."})}),o.default.menus.closeModalNew(Modals.ShareDoc,!1)})},onClickCancel:function(){o.default.menus.closeModalNew(Modals.ShareDoc,!1),o.default.sendEvent("Menu","SharingCancel")},create:function(e){var t=this.props.doc;this.justCreated=!0,this.isSaving=!0;var a=this.refs.name.getValue().trim();t.rename(a,function(e){try{o.default.PAssert(1966,e,"Rename during create must be successful")}catch(e){o.default.reportError(e)}}),l.default.createAndSetupDocument(t,!1,function(e){e&&!e.error?(this.isSaving=!1,this.isCreating=!1,this.onClickSave()):this.errorName.set("Error: Unable to create new file.")}.bind(this))},onClickSave:function(){if(!this.isSaving){o.default.sendEvent("Menu","SharingSave");this.state;var e=this.props.doc;if(this.isSaving&&!this.justCreated)return;if(!this.checkName())return;if(this.isCreating)return this.create(),!0;this.rename();for(var t=e.isShared(),a=0,n=function(n){n?--a<=0&&(o.default.menus.closeModalNew(Modals.ShareDoc,!1),e.isOwned()&&e.isOpen()&&o.default.vmMain.pluginManager.onDocumentShared(t)):(this.errorInvite.set("Some people could not be invited."),this.isSaving=!1)}.bind(this),i=this.refs.invite.getTokens(),r=0;r<i.length;r++){var s=i[r];a++,e.insertPermission(s.email,n.bind(this))}for(r=0;r<this.permissionsRemove.length;r++){var l=this.permissionsRemove[r];a++,e.deletePermission(l.id,n.bind(this))}if(this.errorInvite.get()||this.errorName.get())return;if(0!==a)return this.isSaving=!0,!0;o.default.menus.closeModalNew(Modals.ShareDoc,!0)}},checkName:function(){var e=this.refs.name.getValue().trim();return e.length>0&&e.length<255?(this.errorName.set(!1),!0):(this.errorName.set("Error: File name must be >0 and <255 characters."),!1)},rename:function(){var e=this.refs.name.getValue().trim(),t=this.props.doc;e!==t.getTitle()&&t.rename(e,function(e){e||this.errorName("Error: Unable to update name on remote server.")}.bind(this))},render:function(){var e=this.props,t=this.state,a=e.doc,n="https://moo.do/app/#file="+e.doc.id+"&sinfo="+e.doc.generateShareInfo();return i.a.createElement(u.a,{id:"shareDoc",modalID:Modals.ShareDoc,ref:"modal",title:t.titleText,width:550,height:600},i.a.createElement("div",{key:"content"},this.isCreating&&t.shouldShowHelp&&i.a.createElement("div",{className:"inlineHelp c-bg-faded c-border-heavy"},i.a.createElement("div",null,i.a.createElement("div",{className:"inlineHelpTitle"},"HELP"),i.a.createElement("div",null,"A File contains all of your projects and tasks. Each File can be shared with a different set of people to collaborate with your friends or your team. If you are not collaborating with anyone, you likely don't want to use this feature.")),i.a.createElement("div",{className:"inlineHelpGotIt flexbox flexvert"},i.a.createElement(d.a,{primary:!0,onClick:this.onClickGotIt},"GOT IT"))),i.a.createElement("div",{className:"detailsSection flexbox itemContext c-foreground-faded"},i.a.createElement("div",{className:"c-foreground-faded"},"Name"),i.a.createElement(c.a,{value:e.doc.getTitle(),ref:"name",focused:this.isCreating})),t.errorName&&i.a.createElement("span",{className:"error"},t.errorName),!this.isCreating&&i.a.createElement("div",{className:"detailsSection flexbox itemContext c-foreground-faded"},i.a.createElement("div",{className:"c-foreground-faded"},"Share Link"),i.a.createElement(c.a,{value:n})),!this.isCreating&&(t.isLoading||t.permissions.length>0)&&i.a.createElement("div",{className:"modal-group"},i.a.createElement("div",{className:"mat-subheader"},i.a.createElement("i",{className:"icon-user"})," Who has access"),i.a.createElement("ul",{className:o.default.classNames("shareAccess c-border",{loading:t.isLoading})},t.permissions.map(function(e){return i.a.createElement("li",{key:e.emailAddress,className:"sharePerson flexbox"},i.a.createElement("span",{className:"shareDetails f1"},"owner"===e.role&&i.a.createElement("i",{className:"icon-star",tooltip:"Owner"}),i.a.createElement("span",null,e.name),i.a.createElement("span",{className:"c-foreground-faded",style:{marginLeft:16}},e.emailAddress)),a.isOwned()&&i.a.createElement(d.a,{icon:"icon-close",onClick:e.onRemove}))}))),a.isOwned()&&i.a.createElement("div",{className:"modal-group"},i.a.createElement("div",{className:"mat-subheader"},"Invite to share"),t.errorInvite&&i.a.createElement("div",{className:"error"},t.errorInvite),i.a.createElement(c.a,{id:"inputShareInvite",placeholder:"Email address",autocompleteMode:"email",ref:"invite"})),!a.isOwned()&&i.a.createElement("div",{className:"modal-group"},i.a.createElement("div",{className:"shareNotOwned gd"},"Only the creator of this file can share it with others. Please contact the creator to share it with others.")),i.a.createElement("div",{className:"scrollPad"})),i.a.createElement("div",{key:"buttons"},a.isOwned()&&i.a.createElement("div",{className:"flexbox",style:{padding:"0 16px"}},!this.isCreating&&i.a.createElement(d.a,{raised:!0,cancel:!0,id:"shareDelete",onClick:this.onClickDelete},"DELETE"),i.a.createElement("div",{className:"f1"}),i.a.createElement(d.a,{id:"shareCancel",raised:!0,onClick:this.onClickCancel},"CANCEL"),i.a.createElement(d.a,{id:"shareSave",raised:!0,primary:!0,marginLeft:16,onClick:this.onClickSave},"SAVE")),!a.isOwned()&&i.a.createElement(d.a,{id:"shareOkay",raised:!0,onClick:this.onClickCancel},"OKAY")))}});t.default=m},function(e,t,a){"use strict";a.r(t);var n=a(0),i=a(2),r=a.n(i),o=a(12),s=(a(23),a(1)),l=a(18),c=a(10),d=a(78),u=a(75),m=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var n in a)Object.prototype.hasOwnProperty.call(a,n)&&(e[n]=a[n])}return e},h=o.a.createClass({displayName:"ReactModalInvoices",componentDisplay:s.a.ComponentDisplay.Desktop,onTransactionClick:function(e){var t=n.default.clone(e);t.company=n.default.settings.get(Settings.invoiceCompany),t.address=n.default.settings.get(Settings.invoiceAddress);var a=window.btoa(JSON.stringify(t));n.default.openUrl(window.location.protocol+"//"+window.location.host+"/invoice#d="+a)},render:function(){return r.a.createElement(u.a,m({},this.props,{id:"modalInvoices",title:"Account Invoices",scrollable:!1,modalID:Modals.Invoices,ref:"modal"}),r.a.createElement("div",{key:"content"},this.props.transactions.length>0&&r.a.createElement(d.a,{className:"transactionsTable"},r.a.createElement("div",{key:"header"},r.a.createElement("div",null,"Transaction Date"),r.a.createElement("div",null,"Amount"),r.a.createElement("div",null)),this.props.transactions.map(function(e,t){var a=new Date(e.date).toString(l.a.getFormat(DFormat.LongStrDate));return r.a.createElement("div",{key:e.id},r.a.createElement("div",null,a),r.a.createElement("div",null,e.amount),r.a.createElement(c.a,{onClick:this.onTransactionClick.bind(this,e),height:"auto"},"View"))}.bind(this)),";"),0===this.props.transactions.length&&r.a.createElement("div",null,"There are not transactions available for this account.")))}});t.default=h},function(e,t,a){"use strict";a.r(t);var n=a(2),i=a.n(n),r=a(12),o=(a(23),a(1)),s=a(10),l=a(76),c=a(75),d=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var n in a)Object.prototype.hasOwnProperty.call(a,n)&&(e[n]=a[n])}return e},u=r.a.createClass({displayName:"ReactModalDeleteAccount",componentDisplay:o.a.ComponentDisplay.Desktop,componentDidMount:function(){this.refs.textarea.focus()},onClickCancel:function(){this.refs.modal.close(!1)},onClickDelete:function(){this.refs.modal.close(!0)},render:function(){return i.a.createElement(c.a,d({},this.props,{id:"modalDeleteAccount",title:"Please Confirm",scrollable:!1,modalID:Modals.DeleteAccount,ref:"modal"}),i.a.createElement("div",{key:"content"},i.a.createElement("div",{className:"fancyModalText"},"It would be very helpful if you could describe how Moo.do could be more useful to you. Your feedback will help us improve Moo.do for you and others. Thanks!"),i.a.createElement(l.a,{ref:"textarea"})),i.a.createElement("div",{key:"buttons",style:{textAlign:"right"}},i.a.createElement(s.a,{width:100,onClick:this.onClickCancel},"CANCEL"),i.a.createElement(s.a,{primary:!0,width:100,onClick:this.onClickDelete},"DELETE")))}});t.default=u},function(e,t,a){"use strict";a.r(t);var n=a(2),i=a.n(n),r=a(5),o=a(0),s=a(1),l=a(12),c=a(37),d=a(19),u=a(11),m=a(50),h=a(10),p=a(55),g=a(75),f=1,v=2,E=3,C=4,y=5,k=l.a.createClass({displayName:"ReactModalWelcome",componentDisplay:s.a.ComponentDisplay.Desktop,init:function(){var e=f,t=r.a.getURLParam("ispremium");t&&(e=E),this.createObservables({page:e,isConnected:!1,colorTheme:s.a.ColorTheme.Light}),u.a.onConnected(function(){this.isConnected.set(!0),t||(o.default.billingManager.hasPremiumFeatures()?this.page.set(E):this.page.set(v))}.bind(this)),r.a.removeURLParam("ispremium",!0)},onClickEnable:function(){try{o.default.PAssert(1964,this.state.isConnected,"Must always be connected to the server before enabling")}catch(e){o.default.reportError(e)}var e=this.state.page,t=[PluginID.Contacts,PluginID.GCalendar,PluginID.Gmail,PluginID.Drive],a=e===v?t:t.filter(function(e){return this.refs[e].getValue()}.bind(this)),n=a.map(function(t){return t===PluginID.Drive?{id:t,shared:e===v||this.refs.DriveShared.getValue()}:{id:t}}.bind(this)),i=e===v||this.refs.offlineFeatures.getValue();c.a.enablePlugins(n,i,function(e){e&&this.refs.modal&&(o.default.billingManager.hasPremiumFeatures()||(a.indexOf(PluginID.Drive)>=0||a.indexOf(PluginID.GCalendar)>=0)&&o.default.billingManager.startTrial(),this.page.set(C))}.bind(this))},onClickChoose:function(){this.page.set(E)},onChangeDrive:function(e){this.onChangeFeature(e),e||this.refs.DriveShared.setValue(!1)},onChangeDriveShared:function(e){this.onChangeFeature(e),e&&this.refs[PluginID.Drive].setValue(!0)},onChangeFree:function(e){this.refs[PluginID.Contacts].setValue(e),this.refs[PluginID.Gmail].setValue(e),this.refs.offlineFeatures.setValue(e)},onChangePremium:function(e){this.refs[PluginID.GCalendar].setValue(e),this.refs[PluginID.Drive].setValue(e),this.refs.DriveShared.setValue(e)},checkTier:function(e,t){for(var a=0,n=0;n<t.length;n++)this.refs[t[n]].getValue()?a++:a--;a===t.length&&e.setValue(!0),a===-t.length&&e.setValue(!1)},onChangeFeature:function(e){this.checkTier(this.refs.free,[PluginID.Contacts,PluginID.Gmail]),this.checkTier(this.refs.premium,[PluginID.GCalendar,PluginID.Drive,"DriveShared"])},setColorTheme:function(e){this.colorTheme.set(e),e&&d.a.changeColorTheme(e)},onClickDisplaySettings:function(){this.page.set(y)},onClickGetStarted:function(){this.refs.modal.close()},onClickImport:function(e){this.refs.modal.close(),o.default.menus.openModalNew(Modals.ImportData,{importer:e})},renderPage:function(e){switch(e){case f:return this.renderPageConnecting();case v:return this.renderPageEnableTrial();case E:return this.renderPagePluginSelect();case C:return this.renderPageThemeSelect();case y:return this.renderPageImportData();default:try{o.default.PAssert(1965,!1,"Invalid intro page requested: "+e)}catch(e){o.default.reportError(e)}}},renderPageConnecting:function(){return i.a.createElement("div",{key:"content"},i.a.createElement("div",{className:"setupTitle"},"Welcome to ",i.a.createElement("span",{className:"logoPseudo"}),"!"),i.a.createElement("div",{className:"flexbox flex-center",style:{margin:"64px 0"}},i.a.createElement(p.a,{center:!0},"Connecting to server...")))},renderPageEnableTrial:function(){var e=this.state.isConnected?"NEXT":"Connecting...";return i.a.createElement("div",{key:"content"},i.a.createElement("div",{className:"setupTitle"},"Welcome to ",i.a.createElement("span",{className:"logoPseudo"}),"!"),i.a.createElement("div",{className:"setupFeatures featureCheckboxes"},i.a.createElement("div",{className:"setupPage1Subtitle"},"Start your ",s.a.TrialDuration," day free trial of ",i.a.createElement("b",null,"Moo.do Premium")," and enable syncing with:"),i.a.createElement("div",{className:"featureTier flexbox c-border"},i.a.createElement("div",{className:"setupFeature setupFeatureRow f1"},i.a.createElement("img",{src:"/img/plugin-gcal.png"}),i.a.createElement("div",null,"Google Calendar")),i.a.createElement("div",{className:"setupFeature setupFeatureRow f1"},i.a.createElement("img",{src:"/img/plugin-gmail.png"}),i.a.createElement("div",null,"Gmail")),i.a.createElement("div",{className:"setupFeature setupFeatureRow f1"},i.a.createElement("img",{src:"/img/plugin-gdrive.png"}),i.a.createElement("div",null,"Google Drive")),i.a.createElement("div",{className:"setupFeature setupFeatureRow f1"},i.a.createElement("i",{className:"icon-group"}),i.a.createElement("div",null,"Google Contacts"))),i.a.createElement("div",{className:"setupSubtext"},i.a.createElement("b",null,"Moo.do")," connects with your Google services to integrate everything together. ",i.a.createElement("b",null,"Moo.do")," data is stored in your personal Google Drive account and is never sent to any other server. Nobody can access any of your data. See our ",i.a.createElement("span",{className:"link"},"Privacy Policy")," for more details."),i.a.createElement("div",{className:"setupButtons flexbox"},i.a.createElement(h.a,{raised:!0,onClick:this.onClickChoose},"No thanks, I'll choose what to enable"),i.a.createElement(h.a,{enabled:this.state.isConnected,raised:!0,primary:!0,onClick:this.onClickEnable},e))))},renderPagePluginSelect:function(){var e=this.state.isConnected?"NEXT":"Connecting...";return i.a.createElement("div",{key:"content",className:"pageConnect"},i.a.createElement("div",{className:"setupTitle"},"Connect ",i.a.createElement("span",{className:"logoPseudo"})," with..."),i.a.createElement("div",{className:"setupFeatures featureCheckboxes"},i.a.createElement("div",{className:"featureTier c-border"},i.a.createElement("div",{className:"tierTitleWrapper"},i.a.createElement(m.a,{ref:"free",className:"tierTitle c-background",checked:!0,onChange:this.onChangeFree},"Free Features")),i.a.createElement("div",{className:"flexbox"},i.a.createElement("div",{className:"setupFeatureHalf"},i.a.createElement(m.a,{ref:PluginID.Contacts,checked:!0,onChange:this.onChangeFeature},i.a.createElement("i",{className:"icon-group"}),"Google Contacts"),i.a.createElement(m.a,{ref:PluginID.Gmail,checked:!0,onChange:this.onChangeFeature},i.a.createElement("img",{src:"/img/plugin-gmail.png"}),"Gmail")),i.a.createElement("div",{className:"setupFeatureHalf"},i.a.createElement("div",{className:"setupFeature"},i.a.createElement(m.a,{ref:"offlineFeatures",checked:!0,onChange:this.onChangeFeature},"Offline Features"),i.a.createElement("div",{className:"setupFeatureDesc c-foreground-light"},"Gmail features like Snooze require server access to your account so Moo.do can manage your inbox."))))),i.a.createElement("div",{className:"featureTier c-border"},i.a.createElement("div",{className:"tierTitleWrapper"},i.a.createElement(m.a,{ref:"premium",className:"tierTitle c-background",checked:!0,onChange:this.onChangePremium},"Premium Features")),!o.default.billingManager.hasPremiumFeatures()&&i.a.createElement("div",{className:"featureTierDesc c-foreground-light"},"Enabling Premium features will start a free "+s.a.TrialDuration+" day trial of Moo.do Premium."),i.a.createElement("div",{className:"flexbox"},i.a.createElement("div",{className:"setupFeature setupFeatureHalf"},i.a.createElement(m.a,{ref:PluginID.GCalendar,checked:!0,onChange:this.onChangeFeature},i.a.createElement("img",{src:"/img/plugin-gcal.png"}),"Google Calendar")),i.a.createElement("div",{className:"setupFeature setupFeatureHalf"},i.a.createElement(m.a,{ref:PluginID.Drive,checked:!0,onChange:this.onChangeDrive},i.a.createElement("img",{src:"/img/plugin-gdrive.png"}),"Google Drive"),i.a.createElement(m.a,{ref:"DriveShared",checked:!0,className:"subcheckbox",onChange:this.onChangeDriveShared},"Share files with collaborators")))),i.a.createElement("div",{className:"setupSubtext"},i.a.createElement("b",null,"Moo.do")," connects with your Google services to integrate everything together. ",i.a.createElement("b",null,"Moo.do")," data is stored in your personal Google Drive account and is never sent to any other server. Nobody can access any of your data. See our ",i.a.createElement("span",{className:"link"},"Privacy Policy")," for more details."),i.a.createElement("div",{className:"setupButtons"},i.a.createElement(h.a,{enabled:this.state.isConnected,raised:!0,primary:!0,onClick:this.onClickEnable},e))))},renderPageThemeSelect:function(){var e=this.state.colorTheme;return i.a.createElement("div",{key:"content"},i.a.createElement("div",{className:"setupTitle"},"What's your style?"),i.a.createElement("div",{className:"flexbox flex-center",style:{margin:"24px 0"}},i.a.createElement("div",{className:"setupStyle",onClick:this.setColorTheme.bind(this,s.a.ColorTheme.Light)},i.a.createElement(m.a,{radio:!0,ref:"checkLight",checked:e===s.a.ColorTheme.Light},"Light")),i.a.createElement("div",{className:"setupStyle",onClick:this.setColorTheme.bind(this,s.a.ColorTheme.Dark)},i.a.createElement(m.a,{radio:!0,ref:"checkDark",checked:e===s.a.ColorTheme.Dark},"Dark"))),i.a.createElement("div",{className:"setupSubtext center"},"Don't worry! You can always change your style later."),i.a.createElement("div",{className:"setupButtons"},i.a.createElement(h.a,{raised:!0,primary:!0,onClick:this.onClickDisplaySettings},"NEXT")))},renderPageImportData:function(){this.state;return i.a.createElement("div",{key:"content"},i.a.createElement("div",{className:"setupTitle"},"Import from another app"),i.a.createElement("div",{className:"welcomeImporters"},["Wunderlist","Workflowy","Trello","Google Tasks","Todoist","IQTell"].map(function(e,t){return i.a.createElement(h.a,{key:t,heavy:!0,onClick:this.onClickImport.bind(this,e)},e)}.bind(this))),i.a.createElement("div",{className:"setupSubtext center"},"Don't worry! You can always import your data later."),i.a.createElement("div",{className:"setupButtons"},i.a.createElement(h.a,{raised:!0,primary:!0,onClick:this.onClickGetStarted},"FINISH")))},render:function(){this.state.page;return i.a.createElement(g.a,{id:"modalWelcome",width:720,minWidth:600,modalID:Modals.Welcome,closeButton:!1,backdropClose:!1,ref:"modal"},this.renderPage(this.state.page))}});t.default=k},function(e,t,a){"use strict";a.r(t);a(0);var n=a(1),i=a(2),r=a.n(i),o=a(21),s=a(12),l=a(10),c=a(76),d=a(75),u=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var n in a)Object.prototype.hasOwnProperty.call(a,n)&&(e[n]=a[n])}return e},m=s.a.createClass({displayName:"ReactModalReportProblem",componentDisplay:n.a.ComponentDisplay.Desktop,componentDidMount:function(){this.refs.textarea.focus()},sendReport:function(e){var t=this.props;o.a.reportMessage(t.accountID,t.threadID,t.msgID,this.refs.textarea.getValue(),e),this.refs.modal.close()},onClickSend:function(){this.sendReport(!0)},onClickCancel:function(){this.sendReport(!1)},render:function(){return r.a.createElement(d.a,u({},this.props,{id:"modalReportProblem",title:"Report Problem",scrollable:!1,modalID:Modals.ReportProblem,ref:"modal"}),r.a.createElement("div",{key:"content"},r.a.createElement("div",{className:"fancyModalText"},"Please describe the display problem."),r.a.createElement(c.a,{ref:"textarea"}),r.a.createElement("div",{className:"fancyModalText"},"This will send the content of your email to the developers to fix display errors.")),r.a.createElement("div",{key:"buttons",style:{textAlign:"right"}},r.a.createElement(l.a,{width:100,onClick:this.onClickCancel},"CANCEL"),r.a.createElement(l.a,{primary:!0,width:100,onClick:this.onClickSend},"SEND")))}});t.default=m},,function(e,t,a){"use strict";a.r(t);var n,i=a(0),r=a(1),o=a(2),s=a.n(o),l=a(12),c=a(75),d=a(77),u=a(10),m=a(32),h=l.a.createClass({displayName:"ReactModalImport",componentDisplay:r.a.ComponentDisplay.Desktop,init:function(){var e=this.props.importer,t=this;Promise.all([a.e(1),a.e(2)]).then(a.bind(null,114)).then(function(e){n=e.default,t.importer=new n}),"GTasks"===e&&(e="Google Tasks"),this.createObservables({isImporting:!1,preloadDisable:0,currentImporter:e||"JSON",importMessage:""})},getImporterFromName:function(e){var t;switch(e){case"Wunderlist":t=this.importer.wunderlist;break;case"Workflowy":t=this.importer.workflowy;break;case"OPML":t=this.importer.opml;break;case"JSON":t=this.importer.json;break;case"Text":t=this.importer.text;break;case"GTasks":case"Google Tasks":t=this.importer.gtasks;break;case"Trello":t=this.importer.trello;break;case"Todoist":t=this.importer.todoist;break;case"Toodledo":t=this.importer.toodledo;break;case"IQTell":t=this.importer.iqtell;break;default:try{i.default.PAssert(1962,!1,"Must add valid importer: ",e)}catch(e){i.default.reportError(e)}}return t},selectImporter:function(e){var t=this.getImporterFromName(e);this.currentImporter.set(e),this.importMessage.set(""),this.isImporting.set(!1),t&&t.preload&&!t.isLoaded&&(this.preloadDisable.set(this.preloadDisable.get()+1),this.importMessage.set("Loading Trello login..."),t.preload(function(){this.preloadDisable.set(this.preloadDisable.get()-1);var e=this.getImporterFromName(this.currentImporter.get());0===this.preloadDisable.get()&&e&&e.preload&&this.importMessage.set("")}.bind(this),function(e){this.preloadDisable.set(this.preloadDisable.get()-1),this.importMessage.set("Error loading Trello. Please try again.")}.bind(this)))},onImportError:function(e,t){!1!==e?(e&&i.default.isString(e)||(t||(t=e),e="Moo.do encountered an error importing your data. The developers have been notified with details of the error."),i.default.reportError(t||e,e),this.importMessage.set(e)):this.importMessage.set(""),this.isImporting.set(!1)},runImport:function(e,t,a){if(!(this.isImporting.get()||this.preloadDisable.get()>0)){var n=this.getImporterFromName(e);if(n){i.default.sendEvent("Menu","Import"+e),this.isImporting.set(!0),this.importMessage.set("Importing...");try{setTimeout(function(){n.login(t,a,function(){n.import(function(t){n.save(t,function(){this.isImporting.set(!1),this.importMessage.set(""),i.default.menus.alert({text:"Your data has been imported successfully!",actionText:"OK",callback:function(){i.default.menus.closeModalNew(Modals.ImportData)}}),i.default.sendEvent("ImportSuccess",e)}.bind(this),this.onImportError)}.bind(this),this.onImportError)}.bind(this),this.onImportError)}.bind(this),0)}catch(e){this.onImportError("There was an issue importing your data. Please try again later.",e)}}}},onTapSelect:function(e){this.selectImporter(e,this.onImportSuccess,this.onImportError)},whichArea:function(){switch(this.state.currentImporter){case"Wunderlist":return"OAuthArea";case"Workflowy":return"LoginArea";case"OPML":case"JSON":return"UploadArea";case"Google Tasks":case"GTasks":case"Trello":case"Todoist":case"Toodledo":return"OAuthArea";case"IQTell":return"UploadAreaIQTell";default:try{i.default.PAssert(1963,!1,"Must add valid importer")}catch(e){i.default.reportError(e)}}return!1},onClickImport:function(){if(!this.isImporting.get()){var e=this.refs.email&&this.refs.email.getValue(),t=this.refs.password&&this.refs.password.getValue();this.runImport(this.state.currentImporter,e,t)}},renderListItem:function(e){return s.a.createElement(d.a,{selected:this.state.currentImporter===e,onClick:this.onTapSelect.bind(this,e)},e)},renderContent:function(){var e,t=this.state,a=this.state.currentImporter,n=this.whichArea(a);return"LoginArea"===n?e=s.a.createElement("div",null,s.a.createElement("div",{className:"importTitle"},"Import data from ",a),s.a.createElement(m.a,{floatingText:"Email",display:"block",ref:"email"}),s.a.createElement(m.a,{type:"password",floatingText:"Password",display:"block",ref:"password"}),s.a.createElement("br",null)):"UploadArea"===n?e=s.a.createElement("div",{id:"importUploadArea"},s.a.createElement("div",{className:"importTitle"},"Upload ",a," file"),s.a.createElement("div",null,"Select a","OPML"===a?"n":""," ",a," file to upload"),s.a.createElement("form",{name:"importFileUpload"},s.a.createElement("input",{id:"importFileUploadButton",type:"file",required:"required",name:"importFile"}))):"UploadAreaIQTell"===n?e=s.a.createElement("div",{id:"importUploadArea"},s.a.createElement("div",{className:"importTitle"},"Upload ",a," files [BETA]"),s.a.createElement("div",null,"Export each folder from IQTell that you would like to import. You must include either the 'Short Descripton' or 'Title' fields for each. Select *all* of the exported files at once to do a single import otherwise data may be missing."),s.a.createElement("div",null," "),s.a.createElement("div",null,"Please report any issues to support@moo.do with a description of what you expect vs what you are seeing. Screenshots are very helpful."),s.a.createElement("form",{name:"importFileUpload"},s.a.createElement("input",{id:"importFileUploadButton",type:"file",required:"required",name:"importFile",multiple:!0}))):"OAuthArea"===n&&(e=s.a.createElement("div",null,s.a.createElement("div",{className:"importTitle"},"Import data from ",a),s.a.createElement("div",null,"Click to login to your account"))),s.a.createElement("div",{className:"importInside"},e,s.a.createElement(u.a,{primary:!0,enabled:0===t.preloadDisable&&!t.isImporting,onClick:this.onClickImport},"IMPORT"),s.a.createElement("div",{className:"importMessage"},t.importMessage))},render:function(){return s.a.createElement(c.a,{id:"modalImport",title:"Import Data",width:600,height:600,modalID:Modals.ImportData},s.a.createElement("div",{key:"sidebar",width:180},s.a.createElement(d.a,{header:!0},"Import from app"),this.renderListItem("Wunderlist"),this.renderListItem("Google Tasks"),this.renderListItem("Workflowy"),this.renderListItem("IQTell"),this.renderListItem("Trello"),this.renderListItem("Todoist"),s.a.createElement(d.a,{header:!0},"Import from data"),this.renderListItem("JSON"),this.renderListItem("OPML")),s.a.createElement("div",{key:"content"},this.renderContent()))}});t.default=h},function(e,t,a){"use strict";a.r(t);var n=a(0),i=a(1),r=a(6),o=a(4),s=a(2),l=a.n(s),c=a(12),d=a(17),u=a(10),m=a(77),h=a(50),p=a(75),g=c.a.createClass({displayName:"ReactModalExport",componentDisplay:i.a.ComponentDisplay.Desktop,init:function(){this.createObservables({exportArchived:!1,includeNotes:!0,dataType:"html"})},setDataType:function(e){this.dataType.set(e)},exportData:function(){var e,t,a=r.default.getRootItem(),n=this.state.exportArchived,i=this.state.includeNotes;if("html"===this.dataType.get())t=e=r.default.toHtml(a,n,i);else if("text"===this.dataType.get()){t=(e=r.default.toPlainText(a,0,n,i)).replace(/\n/g,"<br>").replace(/\t/g,"&nbsp;&nbsp;&nbsp;&nbsp;")}else"json"===this.dataType.get()&&(t=e=r.default.toJSON(a,!1,n,i));return this.exportedContent=e,t},onChangeArchiveItems:function(e){e&&n.default.vmMain.parseSubtreeArchive(n.default.vmMain.root(),ChangeType.Auto),this.exportArchived.set(e)},onChangeIncludeNotes:function(e){this.includeNotes.set(e)},onTapOpen:function(){var e="text"===this.dataType.get()?this.exportData():this.exportedContent;open("url").document.write(e)},onTapSelect:function(){var e=d.default.createSelectionRange();e.selectNodeContents(this.refs.exportedContent),d.default.setSelectionRange(e)},onTapSaveExport:function(){var e;"html"===this.dataType.get()?e="html":"text"===this.dataType.get()?e="txt":"json"===this.dataType.get()&&(e="json");try{n.default.saveFile(this.exportedContent,"moodo."+e)}catch(e){n.default.reportError(e)}},onKeyDown:function(e){var t=o.a.getKeyCode(e);(o.a.mac&&e.metaKey||!o.a.mac&&e.ctrlKey)&&t===KeyCode.A&&this.onTapSelect(),e.preventDefault(),e.stopPropagation()},render:function(){var e=this.state.dataType,t=n.default.classNames("exportedContent",e),a=this.exportData();return l.a.createElement(p.a,{id:"modalExport",title:"Export Data",width:860,height:900,modalID:Modals.ExportData},l.a.createElement("div",{key:"sidebar",width:180},l.a.createElement(m.a,{header:!0},"Data Type"),l.a.createElement(m.a,{selected:"html"===e,onClick:this.setDataType.bind(this,"html")},"HTML"),l.a.createElement(m.a,{selected:"text"===e,onClick:this.setDataType.bind(this,"text")},"Plain Text"),l.a.createElement(m.a,{selected:"json"===e,onClick:this.setDataType.bind(this,"json")},"JSON"),l.a.createElement(m.a,{header:!0},"Options"),l.a.createElement(m.a,null,l.a.createElement(h.a,{checked:this.state.includeNotes,onChange:this.onChangeIncludeNotes},"Include Notes")),l.a.createElement(m.a,null,l.a.createElement(h.a,{checked:this.state.exportArchived,onChange:this.onChangeArchiveItems},"Archived Items")),l.a.createElement(m.a,{header:!0},"Export"),!o.a.app&&l.a.createElement(u.a,{onClick:this.onTapOpen},"OPEN IN TAB"),l.a.createElement(u.a,{onClick:this.onTapSelect},"SELECT"),l.a.createElement(u.a,{onClick:this.onTapSaveExport},"SAVE")),l.a.createElement("div",{key:"content"},l.a.createElement("div",{className:t,onKeyDown:this.onKeyDown,contentEditable:!0,dangerouslySetInnerHTML:{__html:a},ref:"exportedContent"})))}});t.default=g},function(e,t,a){"use strict";a.r(t);var n=a(1),i=a(2),r=a.n(i),o=a(12),s=a(10),l=a(75),c=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var n in a)Object.prototype.hasOwnProperty.call(a,n)&&(e[n]=a[n])}return e},d=o.a.createClass({displayName:"ReactModalOptions",componentDisplay:n.a.ComponentDisplay.Everywhere,onClickOption:function(e){this.refs.modal.close(e)},render:function(){return r.a.createElement(l.a,c({},this.props,{id:"modalOptions",title:"Please Choose",small:!0,backdropClose:!1,scrollable:!1,modalID:Modals.Options,ref:"modal"}),r.a.createElement("div",{key:"content"},this.props.text),r.a.createElement("div",{key:"buttons"},this.props.options.map(function(e,t){return r.a.createElement(s.a,{key:t,raised:!0,width:120,margin:"0 8px",onClick:this.onClickOption.bind(this,e)},e)}.bind(this)),r.a.createElement(s.a,{cancel:!0,raised:!0,width:100,margin:"0 8px",onClick:this.onClickOption},"Cancel")))}});t.default=d},function(e,t,a){"use strict";a.r(t);var n=a(2),i=a.n(n),r=a(12),o=a(23),s=a(1),l=a(10),c=a(75),d=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var n in a)Object.prototype.hasOwnProperty.call(a,n)&&(e[n]=a[n])}return e},u=r.a.createClass({displayName:"ReactModalConfirm",componentDisplay:s.a.ComponentDisplay.Everywhere,getHotkeys:function(){return[o.a.create(KeyCode.Escape,!0,s.a.Primary.Either,s.a.Shift.Either,this.onClickNo),o.a.create(KeyCode.N,!0,s.a.Primary.Either,s.a.Shift.Either,this.onClickNo),o.a.create(KeyCode.Enter,!0,s.a.Primary.Either,s.a.Shift.Either,this.onClickYes),o.a.create(KeyCode.Y,!0,s.a.Primary.Either,s.a.Shift.Either,this.onClickYes)]},onClickYes:function(){this.refs.modal.close(!0)},onClickNo:function(){this.refs.modal.close(!1)},render:function(){return i.a.createElement(c.a,d({},this.props,{id:"modalConfirm",small:!0,backdropClose:!1,scrollable:!1,closeButton:!1,modalID:Modals.Confirm,ref:"modal"}),i.a.createElement("div",{key:"content"},this.props.text),i.a.createElement("div",{key:"buttons"},i.a.createElement(l.a,{primary:!0,width:100,onClick:this.onClickYes},"YES"),i.a.createElement(l.a,{width:100,onClick:this.onClickNo},"NO")))}});t.default=u},function(e,t,a){"use strict";a.r(t);var n=a(2),i=a.n(n),r=a(1),o=a(0),s=a(12),l=a(10),c=a(55),d=a(75),u=null,m=1,h=2,p=3,g=4,f=5,v=6,E=null,C=1,y=2,k=3,b=4,S=5,D=6,N=7,M=8,x=9,w=["2m4b","gjgm","pmjw","5pm2"];var P=s.a.createClass({displayName:"ReactModalBilling",componentDisplay:r.a.ComponentDisplay.Desktop,init:function(){this._braintreeRequested=!1,this._braintreeLoaded=!1,this._clientTokenRequested=!1,this._clientTokenLoaded=!1,this._clientToken=void 0,this._btClient=void 0,this._btIntegration=void 0,this._isMethodUpdate=this.props.isUpdate,this.createObservables({isSubmitting:!1,isLoading:!0,billingFailureCode:u,signupFailureCode:E,signupErrorMessage:void 0}),this._ensureBraintreeLib(),this._ensureClientToken()},onUnmount:function(){this._btIntegration&&(this._btIntegration.teardown(),this._btIntegration=void 0)},_handlePaymentMethodUpdate:function(e){this._isMethodUpdate?e&&e.nonce?this._processUpdateNonce(void 0,e.nonce):this._processUpdateNonce({error:!0},void 0):e&&e.nonce?this._processPaymentNonce(void 0,e.nonce):this._processPaymentNonce({error:!0},void 0)},_notifyDependencyLoaded:function(){this._braintreeLoaded&&this._clientTokenLoaded&&(this._btClient=new braintree.api.Client({clientToken:this._clientToken}),braintree.setup(this._clientToken,"dropin",{container:"braintreeDropin",onPaymentMethodReceived:this._handlePaymentMethodUpdate,onError:function(e){o.default.reportError(e)},onReady:function(e){this.isLoading.set(!1),this._btIntegration=e}.bind(this)}))},_notifyDependencyLoadError:function(e){this.billingFailureCode.set(e),o.default.reportError(new Error("Client hit error in billing: "+e)),o.default.billingManager.setLastSignupError(e),o.default.sendEvent("Billing","SignupError_"+e)},_ensureBraintreeLib:function(){this._braintreeRequested||(window.braintree?(this._braintreeLoaded=!0,this._notifyDependencyLoaded()):(this._braintreeRequested=!0,o.default.addScriptHack("https://js.braintreegateway.com/v2/braintree.js","braintreeScript",function(){window.braintree?(this._braintreeLoaded=!0,this._notifyDependencyLoaded()):(this._braintreeRequested=!1,this._notifyDependencyLoadError(m))}.bind(this),function(){this._braintreeRequested=!1,this._notifyDependencyLoadError(h)}.bind(this))))},_ensureClientToken:function(){var e=o.default.billingManager.getBillingIdentifier();e?this._clientTokenRequested||(this._clientTokenRequested=!0,o.default.XHR_PrivateAPI({type:"POST",path:"/billing/getToken",data:{email:e},requireAuth:!0,autoRetry:!0,maxRetries:1,cb:function(e){if(200===e.status){this._clientTokenLoaded=!0;try{var t=JSON.parse(e.responseText).data;t&&t.token?(this._clientToken=t.token,this._notifyDependencyLoaded()):this._notifyDependencyLoadError(p)}catch(e){o.default.reportError(e),this._notifyDependencyLoadError(g)}}else this._clientTokenRequested=!1,this._notifyDependencyLoadError(f)}.bind(this)})):this._notifyDependencyLoadError(v)},_setPaymentResponse:function(e){switch(e.code){case PrivateAPIErrorCodes.UnauthorizedUser:this.signupFailureCode.set(b),this.signupErrorMessage.set(void 0);break;case PrivateAPIErrorCodes.InvalidParameter:this.signupFailureCode.set(S),this.signupErrorMessage.set(void 0);break;case PrivateAPIErrorCodes.MissingParameter:this.signupFailureCode.set(D),this.signupErrorMessage.set(void 0);break;case PrivateAPIErrorCodes.BraintreePaypalBlock:this.signupFailureCode.set(M),this.signupErrorMessage.set(e.data);break;case PrivateAPIErrorCodes.BraintreeInvalidCCN:this.signupFailureCode.set(x),this.signupErrorMessage.set(e.data);break;case PrivateAPIErrorCodes.BraintreeUnknown:this.signupFailureCode.set(N),this.signupErrorMessage.set(e.data);break;default:this.signupFailureCode.set(k),this.signupErrorMessage.set(void 0)}},_processUpdateNonce:function(e,t){o.default.sendEvent("Billing","PremiumUpdate"),!e&&t&&(this.isSubmitting.get()||(this.isSubmitting.set(!0),o.default.XHR_PrivateAPI({type:"POST",path:"/billing/updateMethod",data:{nonce:t},requireAuth:!0,cb:function(e){if(this.isSubmitting.set(!1),200===e.status)o.default.menus.isModalOpen(this.id)&&this.onClickClose(),o.default.menus.alert({text:"Your payment information has been updated.",actionText:"OKAY"}),o.default.sendEvent("Billing","PremiumUpdateSUCCESS");else{if(e.response)try{var t=JSON.parse(e.response);this._setPaymentResponse(t)}catch(e){o.default.reportError(e),this.signupFailureCode.set(k),this.signupErrorMessage.set(void 0)}else this.signupFailureCode.set(k),this.signupErrorMessage.set(void 0);o.default.sendEvent("Billing","PremiumUpdateFAILURE")}}.bind(this)})))},_processPaymentNonce:function(e,t){if(o.default.sendEvent("Billing","PremiumSignup"),!e&&t){this.signupFailureCode.set(E),this.signupErrorMessage.set(void 0);var a=w[o.default.billingManager.getBillingPeriod()];try{o.default.PAssert(1968,a,"Must have selected a valid plan to signup")}catch(e){o.default.reportError(e)}a?this.isSubmitting.get()||(this.isSubmitting.set(!0),o.default.XHR_PrivateAPI({type:"POST",path:"/billing/signup",data:{email:o.default.billingManager.getBillingIdentifier(),nonce:t,planID:a},requireAuth:!0,cb:function(e){if(this.isSubmitting.set(!1),200===e.status){o.default.billingManager.setPremiumStatus(PremiumStatus.Active),o.default.menus.isModalOpen(this.id)&&this.onClickClose(),o.default.menus.alert({text:"Thank you for signing up for <b>Moo.do</b> premium!",actionText:"OKAY"}),o.default.sendEvent("Billing","PremiumSignupSUCCESS");var t=o.default.parseInt(o.default.billingManager.getPlanPrice(w.indexOf(a)));o.default.reportAdConversion(r.a.ConversionID.Purchase,t)}else{if(e.response)try{var n=JSON.parse(e.response);this._setPaymentResponse(n)}catch(e){o.default.reportError(e),this.signupFailureCode.set(k),this.signupErrorMessage.set(void 0)}else this.signupFailureCode.set(k),this.signupErrorMessage.set(void 0);o.default.sendEvent("Billing","PremiumSignupFAILURE")}}.bind(this)})):(this.signupFailureCode.set(y),this.signupErrorMessage.set(void 0),o.default.sendEvent("Billing","PremiumSignupFAILURE"))}else this.signupFailureCode.set(C),this.signupErrorMessage.set(void 0),o.default.sendEvent("Billing","PremiumSignupFAILURE")},onClickSubmit:function(){this.refs.form.submit()},onClickClose:function(){this.refs.modal.close()},render:function(){var e=this.state,t=e.billingFailureCode||e.signupFailureCode?200:400,a=o.default.classNames("billingSubmit loading20 right",{loading:e.isSubmitting},{disabled:e.isLoading}),n=e.signupErrorMessage?e.signupErrorMessage:"There was an error processing your payment. We will follow up with you shortly.";return i.a.createElement(d.a,{id:"modalBilling",title:"Enter Billing Info",width:400,height:t,backdropClose:!1,scrollable:!1,modalID:Modals.Billing,ref:"modal"},i.a.createElement("div",{key:"content"},!e.billingFailureCode&&!e.signupFailureCode&&i.a.createElement("form",{id:"billingForm",method:"post",action:"javascript:void(0);",ref:"form"},i.a.createElement("div",{id:"braintreeDropin"}),e.isLoading&&i.a.createElement(c.a,{center:!0},"Loading billing system..."),!e.billingFailureCode&&i.a.createElement("div",{className:a},i.a.createElement("input",{type:"submit",className:"new-modal-button mat-button-raised mat-button-blue",value:"SUBMIT"}))),e.signupFailureCode&&i.a.createElement("div",{id:"billingSignupError"},n),e.billingFailureCode&&i.a.createElement("div",{id:"billingError"},"There was an error loading our payment system. Please contact support@moo.do with code "+e.billingFailureCode+" or try again in a few minutes.")),i.a.createElement("div",{key:"buttons",style:{textAlign:"right"}},e.billingFailureCode&&i.a.createElement(l.a,{primary:!0,onClick:this.onClickClose},"OK")))}});t.default=P},function(e,t,a){"use strict";a.r(t);var n=a(2),i=a.n(n),r=a(12),o=a(23),s=a(1),l=a(10),c=a(75),d=r.a.createClass({displayName:"ReactModalAlert",componentDisplay:s.a.ComponentDisplay.Everywhere,getHotkeys:function(){return[o.a.create(KeyCode.Enter,!0,s.a.Primary.Either,s.a.Shift.Either,this.onClickButton)]},onClickButton:function(){this.refs.modal.close()},render:function(){var e=this.props.actionText||"OKAY";return i.a.createElement(c.a,{id:"modalAlert",closeButton:!1,small:!0,backdropClose:!1,scrollable:!1,modalID:Modals.Alert,ref:"modal"},i.a.createElement("div",{key:"content",dangerouslySetInnerHTML:{__html:this.props.text}}),i.a.createElement("div",{key:"buttons"},i.a.createElement(l.a,{primary:!0,onClick:this.onClickButton},e)))}});t.default=d},function(e,t,a){"use strict";a.r(t);var n=a(2),i=a.n(n),r=a(12),o=a(1),s=a(21),l=a(58),c=(a(10),a(75)),d=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var n in a)Object.prototype.hasOwnProperty.call(a,n)&&(e[n]=a[n])}return e},u=r.a.createClass({displayName:"ReactModalEmailReply",componentDisplay:o.a.ComponentDisplay.Everywhere,componentDidMount:function(){var e=this.props,t=this.refs.compose;setTimeout(function(){e.responseMode===o.a.EmailResponseMode.Forward?t.focusTo():t.focusBody()},250)},onUnmount:function(){s.a.setMessageResponseMode(this.props.inReplyToMessage.id,o.a.EmailResponseMode.None)},onClickSend:function(){this.refs.compose.send(),this.refs.modal.close()},onComposeClose:function(){var e=this.refs.modal;e&&e.close()},onCloseButton:function(){this.refs.compose.discard()},_getModalTitle:function(e){var t;return e===o.a.EmailResponseMode.Reply?t="Reply":e===o.a.EmailResponseMode.ReplyAll?t="Reply All":e===o.a.EmailResponseMode.Forward?t="Forward":e===o.a.EmailResponseMode.Other&&(t="Compose"),t},render:function(){var e=this.props,t=e.responseMode,a=this._getModalTitle(t);return i.a.createElement(c.a,d({},e,{id:"modalEmailReply",title:a,modalID:Modals.EmailReply,ref:"modal",confirmIcon:"icon-send",onConfirm:this.onClickSend,onCloseButton:this.onCloseButton}),i.a.createElement(l.a,{key:"content",threadAttach:e.threadAttach,message:e.message,ref:"compose",onClose:this.onComposeClose,responseMode:this.state.responseMode}))}});t.default=u},function(e,t,a){"use strict";a.r(t);var n=a(2),i=a.n(n),r=a(12),o=a(23),s=a(1),l=a(10),c=a(32),d=a(75),u=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var n in a)Object.prototype.hasOwnProperty.call(a,n)&&(e[n]=a[n])}return e},m=r.a.createClass({displayName:"ReactModalPrompt",componentDisplay:s.a.ComponentDisplay.Everywhere,getHotkeys:function(){return[o.a.create(KeyCode.Enter,!0,s.a.Primary.Either,s.a.Shift.Either,this.onClickYes)]},onClickYes:function(){this.refs.modal.close(this.refs.input.getValue())},onClickNo:function(){this.refs.modal.close(!1)},render:function(){return i.a.createElement(d.a,u({},this.props,{id:"modalPrompt",title:this.props.text,small:!0,scrollable:!1,modalID:Modals.Prompt,ref:"modal"}),i.a.createElement("div",{key:"content"},i.a.createElement(c.a,{focused:!0,ref:"input"})),i.a.createElement("div",{key:"buttons"},i.a.createElement(l.a,{primary:!0,width:100,onClick:this.onClickYes},"OK"),i.a.createElement(l.a,{width:100,onClick:this.onClickNo},"NO")))}});t.default=m},function(e,t,a){"use strict";a.r(t);var n=a(0),i=a(1),r=a(4),o=a(2),s=a.n(o),l=a(12),c=a(75),d=a(10),u=a(55),m=l.a.createClass({displayName:"ReactModalLightbox",componentDisplay:i.a.ComponentDisplay.Desktop,init:function(){this.createObservables({isLoaded:!1,error:!1})},onLoaded:function(){this.isLoaded.set(!0)},onError:function(){this.isLoaded.set(!0,!1),this.error.set("Could not load image")},openExternal:function(){this.props.buttonAction?this.props.buttonAction():n.default.openUrl(this.props.src),this.close()},close:function(){this.refs.modal.close()},render:function(){var e=this.props,t=this.state,a=e.src,i={maxWidth:Math.min(.95*r.a.windowWidth(),900),maxHeight:Math.min(.95*r.a.windowHeight()-30,900),visibility:!t.isLoaded&&"hidden"},o=n.default.classNames({loaded:t.isLoaded});return s.a.createElement(c.a,{id:"modalLightbox",className:o,closeButton:!1,scrollable:!1,modalID:Modals.Lightbox,ref:"modal"},s.a.createElement("div",{key:"content"},!t.isLoaded&&s.a.createElement(u.a,{center:!0}),!t.error&&s.a.createElement("img",{src:a,style:i,onLoad:this.onLoaded,onError:this.onError,onClick:this.close,ref:"image"}),t.error&&s.a.createElement("div",{className:"lightboxText"},t.error),t.isLoaded&&s.a.createElement(d.a,{id:"lightboxOpen",className:"c-border-heavy",primary:!0,height:30,onClick:this.openExternal},e.buttonText||(r.a.app?"Open in browser":"Open in new tab"))))}});t.default=m},function(e,t,a){"use strict";a.r(t);var n=a(0),i=a(1),r=a(2),o=a.n(r),s=a(46),l=a(12),c=a(14),d={ReactAutocomplete:a(80),ReactContextMenuOverviewOptions:a(106),ReactContextMenuGmailSort:a(105),ReactContextMenuSearch:a(104),ReactContextMenuNameBoard:a(103),ReactContextMenuSelectGmailAccount:a(102),ReactContextMenuAddItem:a(101),ReactContextMenuCalendars:a(100),ReactContextMenuInsertLink:a(99),ReactContextMenuContactDetails:a(98),ReactNotePopup:a(97),ReactContextMenuDropBucket:a(96),ReactItemDetailsPopup:a(85),ReactContextMenuEmailDetails:a(95),ReactContextMenuItem:a(94),ReactContextMenuOnlineStatus:a(93),ReactContextMenuPanes:a(81),ReactContextMenuAuthorize:a(92),ReactContextMenuDocuments:a(86),ReactContextMenuHelp:a(91),ReactContextMenuShare:a(90),ReactContextMenuPaneMode:a(89),ReactContextMenuOptions:a(88)},u=l.a.createClass({displayName:"ReactContextMenus",componentDisplay:i.a.ComponentDisplay.Everywhere,getState:function(){return{contextMenus:n.default.menus.contextMenuStack,noFade:n.default.menus.contextMenuNoFade,isDragging:c.default.isVisible}},onClickBackground:function(e){var t=n.default.menus.getTopContextMenu();n.default.menus.closeContextMenu(t),n.default.preventDefault(e),n.default.stopPropagation(e)},render:function(){for(var e=this.state,t=[],a=0;a<e.contextMenus.length;a++){var i=e.contextMenus[a];if(i.noBackdrop||t.push(o.a.createElement("div",{key:"backdrop_"+a,className:"contextMenusBackdrop",onMouseDown:this.onClickBackground})),i.fn)t.push(i.fn(i));else if(i.componentName){i.key=i.key||i.componentName,i.id=i.id||i.key;var r=d[i.componentName].default;t.push(o.a.createElement(r,i))}}var l=n.default.classNames("contextMenusReact",{open:t.length>0},{takeClick:t.length>0&&!i.noBackdrop},{none:0===t.length},{hideBackground:e.noFade});return o.a.createElement(s.CSSTransitionGroup,{className:l,transitionName:"contextMenuAnim",transitionEnterTimeout:150,transitionLeaveTimeout:200},t)}});t.default=u},function(e,t,a){"use strict";a.r(t);var n=a(0),i=a(1),r=a(2),o=a.n(r),s=a(46),l=a(12),c=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var n in a)Object.prototype.hasOwnProperty.call(a,n)&&(e[n]=a[n])}return e},d={},u=Modals;d[u.Lightbox]=a(123),d[u.Prompt]=a(122),d[u.EmailReply]=a(121),d[u.Settings]=a(87),d[u.Alert]=a(120),d[u.Billing]=a(119),d[u.Confirm]=a(118),d[u.Options]=a(117),d[u.ExportData]=a(116),d[u.ImportData]=a(115),d[u.RevisionHistory]=a(84),d[u.ReportProblem]=a(113),d[u.Welcome]=a(112),d[u.DeleteAccount]=a(111),d[u.Invoices]=a(110),d[u.ShareDoc]=a(109),d[u.ReportBug]=a(108),d[u.EnterCode]=a(107);var m=d,h=l.a.createClass({displayName:"ReactModals",componentDisplay:i.a.ComponentDisplay.Everywhere,getState:function(){return{modals:n.default.menus.modalStack}},renderModal:function(e){var t=e.id,a=m[t].default;try{n.default.PAssert(1343,a,"Could not find modal with id "+t)}catch(e){n.default.reportError(e)}return o.a.createElement(a,c({key:e.id},e))},render:function(){for(var e=[],t=0;t<this.state.modals.length;t++)e.push(this.renderModal(this.state.modals[t]));var a=n.default.classNames("modals",{none:0===e.length});return o.a.createElement(s.CSSTransitionGroup,{className:a,transitionName:"modalTransition",transitionEnterTimeout:400,transitionLeaveTimeout:300},e)}});t.default=h}])]);
//# sourceMappingURL=delayedUI-1521790598555.js.map