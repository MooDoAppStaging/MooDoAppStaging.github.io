!function(){function e(){function e(e,r){postMessage({id:e,done:!1,msg:r})}function r(e,r){var t={};for(var o in e)if(void 0!==e[o]&&null!==e[o]){var n=r[o];n?t[n]=e[o]:t[o]=e[o]}return t}function t(e){return r(e,o)}var o={a:"isArchived",c:"dateCreated",d:"date",e:"duration",f:"formats",g:"durationText",h:"favorites",i:"items",k:"isNote",l:"modifiedOffline",m:"isCollapsed",n:"note",o:"modifiedOfflineText",p:"priority",r:"repeatDate",s:"dateText",t:"text",u:"versionText",v:"version",x:"isDeleted",z:"isComplete",ai:"archivedItems",ad:"allDayDate",id:"id","*":"isStarred","^":"dateCompleted"};onmessage=function(r){var o=indexedDB.open("duchess");o.onupgradeneeded=function(t){e(r.data.id,"No pre-existing DB"),o.transaction.abort()},o.onerror=function(t){e(r.data.id,"Error opening DB: "+t.target.errorCode)},o.onsuccess=function(o){var n=o.target.result,a=[],i=n.transaction("items","readwrite");i.oncomplete=function(){n.close();for(var e=new Array(a.length),o=0;o<a.length;++o)e[o]=t(a[o]);postMessage({id:r.data.id,done:!0,data:e}),close()},i.onerror=function(){e(r.data.id,"Transaction error")},i.onabort=function(){e(r.data.id,"Transaction abort")};var d=i.objectStore("items");d?d.openCursor().onsuccess=function(e){var r=e.target.result;r&&(a.push(r.value),r["continue"]())}:e(r.data.id,"No items store present")}}}function r(){var e=!1,r=navigator.userAgent,t=-1!==r.indexOf("Chrome")||-1!==r.indexOf("CriOS");return t&&-1===r.indexOf("Edge")&&(e=!0),e}function t(){var t=window.__preload;if(!t.mainLoaded&&r()){var n=o.createWorkerFromFnList([e],function(e){t.onDataLoaded?t.onDataLoaded(e.data.data):t.dataResults=e.data.data},function(e){console.log("Error in worker: ",e,e.message)});n&&(n.postMessage({id:1}),t.runDataLoad=!0)}}var o={createWorkerFromObj:function(e,r,t){var o;try{o=new Worker(e),o.onmessage=r,o.onerror=t}catch(n){console.log("Exception during worker create: ",n)}return o},createWorkerFromFnList:function(e,r,t){var o=[];try{for(var n=0;n<e.length;++n)o.push(e[n].toString()),o.push(e[n].name+"();");return this.createWorkerFromStrings(o,r,t)}catch(a){console.log("Exception during worker source gen: ",a)}},createWorkerFromStrings:function(e,r,t){var o=window.URL||window.webkitURL,n=o.createObjectURL(new Blob(e,{type:"text/javascript"}));return this.createWorkerFromObj(n,r,t)}};window.__preload||(window.__preload={mainLoaded:!1}),t()}();